"use strict";var zt=Object.defineProperty,Ht=Object.defineProperties;var Dt=Object.getOwnPropertyDescriptors;var Pe=Object.getOwnPropertySymbols;var Mt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable;var Ne=(t,e,s)=>e in t?zt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,ce=(t,e)=>{for(var s in e||(e={}))Mt.call(e,s)&&Ne(t,s,e[s]);if(Pe)for(var s of Pe(e))Bt.call(e,s)&&Ne(t,s,e[s]);return t},le=(t,e)=>Ht(t,Dt(e));Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function Vt(t){if(t&&t.__esModule)return t;var e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return t&&Object.keys(t).forEach(function(s){if(s!=="default"){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}}),e.default=t,Object.freeze(e)}var Wt=(()=>`.netless-app-docs-viewer-content{position:relative;height:100%;overflow:hidden}.netless-app-docs-viewer-preview-mask{display:block;position:absolute;z-index:200;top:0;left:0;width:100%;height:100%}.netless-app-docs-viewer-preview{display:flex;flex-direction:column;align-items:center;z-index:300;top:0;right:0;width:23%;padding:12px;box-shadow:-4.8px -3.2px 20px #20233826;transition:transform .4s;background:#f5f5fc;border-radius:4px;-webkit-box-shadow:-4.8px -3.2px 20px rgba(32,35,56,.15);height:100%;position:absolute}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview-mask{display:block}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview{transform:translate(0);opacity:1}.netless-app-docs-viewer-preview-head{display:flex;align-items:center;justify-content:space-between;width:100%;margin-bottom:10px}.netless-app-docs-viewer-preview-head>h3{color:#484c70;font-weight:400;font-size:14px;width:calc(100% - 20px);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.netless-app-docs-viewer-preview-head .netless-app-docs-viewer-close{width:25px;height:25px;padding:0;outline:none;border:none;background:#fff;display:flex;justify-content:center;align-items:center;border-radius:100%;cursor:pointer}.netless-app-docs-viewer-preview-head .netless-app-docs-viewer-close button{width:22px;height:22px;padding:0;outline:none;border:none;background:center/cover no-repeat;background-image:url(./icons/close.svg)}.netless-app-docs-viewer-preview-page{position:relative;display:flex;width:100%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border-radius:4px;transition:border-color .3s;user-select:none;align-items:flex-end}.netless-app-docs-viewer-preview-page>img{width:calc(90% - 10px);height:auto;box-sizing:border-box;border:2px solid rgba(0,0,0,.5);border-radius:2px;background-color:#fff}.netless-app-docs-viewer-preview-page>img.netless-app-docs-viewer-active{border-color:#ff5353}.netless-app-docs-viewer-preview-page-name{text-align:right;font-size:12px;color:#8d8fa6;user-select:none;margin-right:10px;width:5%}.netless-app-docs-viewer-footer{box-sizing:border-box;height:40px;display:flex;align-items:center;padding:0 16px;color:#191919;background:#ebecfa}.netless-app-docs-viewer-float-footer{width:100%;min-height:40px;position:absolute;left:0;bottom:0;z-index:2000;transition:opacity .4s;color:#191919}.netless-app-docs-viewer-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:4px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);color:#8d8fa6}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-disable{color:#c6c7d2;cursor:not-allowed}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-disable .arrow{fill:#c6c7d2}.netless-app-docs-viewer-footer-btn .arrow{fill:#8d8fa6}.netless-app-docs-viewer-footer-btn:hover{background-color:#1b1f4d0a}@media (hover: none){.netless-app-docs-viewer-footer-btn:hover{background:transparent!important}}.netless-app-docs-viewer-footer-btn>svg{width:100%;height:100%}.netless-app-docs-viewer-footer-btn>svg:nth-of-type(2){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-docs-viewer-hide{display:none}.netless-app-docs-viewer-page-jumps{flex:1;display:flex;justify-content:center;align-items:center;gap:8px}.netless-app-docs-viewer-page-number{font-size:14px;color:#8d8fa6;user-select:none;white-space:nowrap;word-break:keep-all}.netless-app-docs-viewer-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;background:transparent;transition:background .4s;user-select:text;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn:hover{background:transparent}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:active{background:transparent;box-shadow:none}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:disabled{color:inherit}.netless-app-docs-viewer-readonly.netless-app-docs-viewer-float-footer{display:none}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input{color:#a6a6a8}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:active,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:focus,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:hover{color:#222}.telebox-color-scheme-dark .netless-app-docs-viewer-footer{color:#a6a6a8;background:#2d2d33;border-top:none}.telebox-color-scheme-dark .netless-app-docs-viewer-footer-btn:hover{background:#212126}.telebox-color-scheme-dark .netless-app-docs-viewer-preview{background:rgba(50,50,50,.9)}.netless-app-docs-viewer-static-scrollbar{position:absolute;top:0;right:0;z-index:2147483647;width:8px;min-height:30px;margin:0;padding:0;border:none;outline:none;border-radius:4px;background:rgba(68,78,96,.4);box-shadow:1px 1px 8px #ffffffb3;opacity:0;transition:background .4s,opacity .4s 3s,transform .2s;user-select:none}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging{background:rgba(68,78,96,.6);opacity:1;transition:background .4s,opacity .4s 3s!important}.netless-app-docs-viewer-static-scrollbar:hover,.netless-app-docs-viewer-static-scrollbar:focus{background:rgba(68,78,96,.5)}.netless-app-docs-viewer-static-scrollbar:active{background:rgba(68,78,96,.6)}.netless-app-docs-viewer-content:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-static-scrollbar{display:none}.netless-app-docs-viewer-static-pages:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.page-renderer-pages-container{position:relative;overflow:hidden}.page-renderer-page{position:absolute;top:0;left:0;background-position:center;background-size:cover;background-repeat:no-repeat}.page-renderer-pages-container.is-hwa .page-renderer-page{will-change:transform}.page-renderer-page-img{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-pages{overflow:hidden;position:relative;height:100%;user-select:none}.netless-app-docs-viewer-static-page{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-wb-view,.netless-app-docs-viewer-dynamic-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:auto}.netless-app-docs-viewer-dynamic-wb-view .cursor-clicker .ppt-event-source{cursor:pointer}
`)();const Ut=(t,e,s,i)=>{if(s==="length"||s==="prototype"||s==="arguments"||s==="caller")return;const r=Object.getOwnPropertyDescriptor(t,s),o=Object.getOwnPropertyDescriptor(e,s);!Ft(r,o)&&i||Object.defineProperty(t,s,o)},Ft=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},jt=(t,e)=>{const s=Object.getPrototypeOf(e);s!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,s)},Yt=(t,e)=>`/* Wrapped ${t}*/
${e}`,Gt=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),qt=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Xt=(t,e,s)=>{const i=s===""?"":`with ${s.trim()}() `,r=Yt.bind(null,i,e.toString());Object.defineProperty(r,"name",qt),Object.defineProperty(t,"toString",le(ce({},Gt),{value:r}))};function Jt(t,e,{ignoreNonConfigurable:s=!1}={}){const{name:i}=t;for(const r of Reflect.ownKeys(e))Ut(t,e,r,s);return jt(t,e),Xt(t,e,i),t}const Zt=(t,e={})=>{if(typeof t!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof t}\``);const{wait:s=0,maxWait:i=Number.Infinity,before:r=!1,after:o=!0}=e;if(!r&&!o)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,n,c;const l=function(...h){const d=this,f=()=>{a=void 0,n&&(clearTimeout(n),n=void 0),o&&(c=t.apply(d,h))},m=()=>{n=void 0,a&&(clearTimeout(a),a=void 0),o&&(c=t.apply(d,h))},u=r&&!a;return clearTimeout(a),a=setTimeout(f,s),i>0&&i!==Number.Infinity&&!n&&(n=setTimeout(m,i)),u&&(c=t.apply(d,h)),c};return Jt(l,t),l.cancel=()=>{a&&(clearTimeout(a),a=void 0),n&&(clearTimeout(n),n=void 0)},l},Kt="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Qt=87,es=20,$e=[],ts=()=>{for(let t=0;t<es;t++)$e[t]=Kt.charAt(Math.random()*Qt);return $e.join("")};function Xe(t){try{return t()}catch(e){console.error(e)}}class ee{constructor(){this.push=this.addDisposer,this.disposers=new Map}addDisposer(e,s=this.genUID()){return this.flush(s),this.disposers.set(s,Array.isArray(e)?ss(e):e),s}add(e,s=this.genUID()){const i=e();return i?this.addDisposer(i,s):s}addEventListener(e,s,i,r,o=this.genUID()){return e.addEventListener(s,i,r),this.addDisposer(()=>e.removeEventListener(s,i,r),o),o}setTimeout(e,s,i=this.genUID()){const r=window.setTimeout(()=>{this.remove(i),e()},s);return this.addDisposer(()=>window.clearTimeout(r),i)}setInterval(e,s,i=this.genUID()){const r=window.setInterval(e,s);return this.addDisposer(()=>window.clearInterval(r),i)}remove(e){const s=this.disposers.get(e);return this.disposers.delete(e),s}flush(e){const s=this.remove(e);s&&s()}flushAll(){this.disposers.forEach(Xe),this.disposers.clear()}genUID(){let e;do e=ts();while(this.disposers.has(e));return e}}function ss(t){return()=>t.forEach(Xe)}var P=[],is=function(){return P.some(function(t){return t.activeTargets.length>0})},rs=function(){return P.some(function(t){return t.skippedTargets.length>0})},ke="ResizeObserver loop completed with undelivered notifications.",os=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:ke}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=ke),window.dispatchEvent(t)},U;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(U||(U={}));var N=function(t){return Object.freeze(t)},as=function(){function t(e,s){this.inlineSize=e,this.blockSize=s,N(this)}return t}(),Je=function(){function t(e,s,i,r){return this.x=e,this.y=s,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,N(this)}return t.prototype.toJSON=function(){var e=this,s=e.x,i=e.y,r=e.top,o=e.right,a=e.bottom,n=e.left,c=e.width,l=e.height;return{x:s,y:i,top:r,right:o,bottom:a,left:n,width:c,height:l}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),ge=function(t){return t instanceof SVGElement&&"getBBox"in t},Ze=function(t){if(ge(t)){var e=t.getBBox(),s=e.width,i=e.height;return!s&&!i}var r=t,o=r.offsetWidth,a=r.offsetHeight;return!(o||a||t.getClientRects().length)},Re=function(t){var e,s;if(t instanceof Element)return!0;var i=(s=(e=t)===null||e===void 0?void 0:e.ownerDocument)===null||s===void 0?void 0:s.defaultView;return!!(i&&t instanceof i.Element)},ns=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},V=typeof window!="undefined"?window:{},X=new WeakMap,Le=/auto|scroll/,cs=/^tb|vertical/,ls=/msie|trident/i.test(V.navigator&&V.navigator.userAgent),v=function(t){return parseFloat(t||"0")},O=function(t,e,s){return t===void 0&&(t=0),e===void 0&&(e=0),s===void 0&&(s=!1),new as((s?e:t)||0,(s?t:e)||0)},Oe=N({devicePixelContentBoxSize:O(),borderBoxSize:O(),contentBoxSize:O(),contentRect:new Je(0,0,0,0)}),Ke=function(t,e){if(e===void 0&&(e=!1),X.has(t)&&!e)return X.get(t);if(Ze(t))return X.set(t,Oe),Oe;var s=getComputedStyle(t),i=ge(t)&&t.ownerSVGElement&&t.getBBox(),r=!ls&&s.boxSizing==="border-box",o=cs.test(s.writingMode||""),a=!i&&Le.test(s.overflowY||""),n=!i&&Le.test(s.overflowX||""),c=i?0:v(s.paddingTop),l=i?0:v(s.paddingRight),h=i?0:v(s.paddingBottom),d=i?0:v(s.paddingLeft),f=i?0:v(s.borderTopWidth),m=i?0:v(s.borderRightWidth),u=i?0:v(s.borderBottomWidth),x=i?0:v(s.borderLeftWidth),D=d+l,_=c+h,M=x+m,y=f+u,q=n?t.offsetHeight-y-t.clientHeight:0,I=a?t.offsetWidth-M-t.clientWidth:0,oe=r?D+M:0,w=r?_+y:0,p=i?i.width:v(s.width)-oe-I,R=i?i.height:v(s.height)-w-q,ae=p+D+I+M,ne=R+_+q+y,L=N({devicePixelContentBoxSize:O(Math.round(p*devicePixelRatio),Math.round(R*devicePixelRatio),o),borderBoxSize:O(ae,ne,o),contentBoxSize:O(p,R,o),contentRect:new Je(d,c,p,R)});return X.set(t,L),L},Qe=function(t,e,s){var i=Ke(t,s),r=i.borderBoxSize,o=i.contentBoxSize,a=i.devicePixelContentBoxSize;switch(e){case U.DEVICE_PIXEL_CONTENT_BOX:return a;case U.BORDER_BOX:return r;default:return o}},hs=function(){function t(e){var s=Ke(e);this.target=e,this.contentRect=s.contentRect,this.borderBoxSize=N([s.borderBoxSize]),this.contentBoxSize=N([s.contentBoxSize]),this.devicePixelContentBoxSize=N([s.devicePixelContentBoxSize])}return t}(),et=function(t){if(Ze(t))return 1/0;for(var e=0,s=t.parentNode;s;)e+=1,s=s.parentNode;return e},ds=function(){var t=1/0,e=[];P.forEach(function(a){if(a.activeTargets.length!==0){var n=[];a.activeTargets.forEach(function(l){var h=new hs(l.target),d=et(l.target);n.push(h),l.lastReportedSize=Qe(l.target,l.observedBox),d<t&&(t=d)}),e.push(function(){a.callback.call(a.observer,n,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var s=0,i=e;s<i.length;s++){var r=i[s];r()}return t},Ae=function(t){P.forEach(function(s){s.activeTargets.splice(0,s.activeTargets.length),s.skippedTargets.splice(0,s.skippedTargets.length),s.observationTargets.forEach(function(r){r.isActive()&&(et(r.target)>t?s.activeTargets.push(r):s.skippedTargets.push(r))})})},ps=function(){var t=0;for(Ae(t);is();)t=ds(),Ae(t);return rs()&&os(),t>0},he,tt=[],us=function(){return tt.splice(0).forEach(function(t){return t()})},gs=function(t){if(!he){var e=0,s=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return us()}).observe(s,i),he=function(){s.textContent=""+(e?e--:e++)}}tt.push(t),he()},fs=function(t){gs(function(){requestAnimationFrame(t)})},K=0,ws=function(){return!!K},vs=250,bs={attributes:!0,characterData:!0,childList:!0,subtree:!0},ze=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],He=function(t){return t===void 0&&(t=0),Date.now()+t},de=!1,ms=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var s=this;if(e===void 0&&(e=vs),!de){de=!0;var i=He(e);fs(function(){var r=!1;try{r=ps()}finally{if(de=!1,e=i-He(),!ws())return;r?s.run(1e3):e>0?s.run(e):s.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,s=function(){return e.observer&&e.observer.observe(document.body,bs)};document.body?s():V.addEventListener("DOMContentLoaded",s)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ze.forEach(function(s){return V.addEventListener(s,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),ze.forEach(function(s){return V.removeEventListener(s,e.listener,!0)}),this.stopped=!0)},t}(),pe=new ms,De=function(t){!K&&t>0&&pe.start(),K+=t,!K&&pe.stop()},Ss=function(t){return!ge(t)&&!ns(t)&&getComputedStyle(t).display==="inline"},xs=function(){function t(e,s){this.target=e,this.observedBox=s||U.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Qe(this.target,this.observedBox,!0);return Ss(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),ys=function(){function t(e,s){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=s}return t}(),J=new WeakMap,Me=function(t,e){for(var s=0;s<t.length;s+=1)if(t[s].target===e)return s;return-1},Z=function(){function t(){}return t.connect=function(e,s){var i=new ys(e,s);J.set(e,i)},t.observe=function(e,s,i){var r=J.get(e),o=r.observationTargets.length===0;Me(r.observationTargets,s)<0&&(o&&P.push(r),r.observationTargets.push(new xs(s,i&&i.box)),De(1),pe.schedule())},t.unobserve=function(e,s){var i=J.get(e),r=Me(i.observationTargets,s),o=i.observationTargets.length===1;r>=0&&(o&&P.splice(P.indexOf(i),1),i.observationTargets.splice(r,1),De(-1))},t.disconnect=function(e){var s=this,i=J.get(e);i.observationTargets.slice().forEach(function(r){return s.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t}(),Es=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Z.connect(this,e)}return t.prototype.observe=function(e,s){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Re(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Z.observe(this,e,s)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Re(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Z.unobserve(this,e)},t.prototype.disconnect=function(){Z.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();function Ts(t){const e="http://www.w3.org/2000/svg",s=document.createElementNS(e,"svg");return s.setAttribute("class",`${t}-footer-icon-arrow-left`),s.setAttribute("viewBox","0 0 20 20"),s.innerHTML=`<g clip-path="url(#clip0_11800_99864)">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5283 4.86182L12.4711 5.80463L8.22849 10.0473L12.4711 14.2899L11.5283 15.2327L6.34287 10.0473L11.5283 4.86182Z" class="arrow" />
</g>
<defs>
<clipPath id="clip0_11800_99864">
<rect width="16" height="16" fill="white" transform="translate(2 2)"/>
</clipPath>
</defs>`,s}function Cs(t){const e="http://www.w3.org/2000/svg",s=document.createElementNS(e,"svg");return s.setAttribute("class",`${t}-footer-icon-arrow-right`),s.setAttribute("viewBox","0 0 20 20"),s.innerHTML=`<g clip-path="url(#clip0_11800_99870)">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8.1377 4.86182L7.19489 5.80463L11.4375 10.0473L7.19489 14.2899L8.1377 15.2327L13.3231 10.0473L8.1377 4.86182Z" class="arrow" />
</g>
<defs>
<clipPath id="clip0_11800_99870">
<rect width="16" height="16" fill="white" transform="translate(2 2)"/>
</clipPath>
</defs>`,s}function _s(t){const e="http://www.w3.org/2000/svg",s=document.createElementNS(e,"svg");s.setAttribute("class",`${t}-footer-icon-play`),s.setAttribute("viewBox","0 0 500 500");const i=document.createElementNS(e,"path");return i.setAttribute("fill","currentColor"),i.setAttribute("d","M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z"),s.appendChild(i),s}function Is(t){const e="http://www.w3.org/2000/svg",s=document.createElementNS(e,"svg");s.setAttribute("class",`${t}-footer-icon-pause`),s.setAttribute("viewBox","0 0 500 500");const i=document.createElementNS(e,"path");return i.setAttribute("fill","currentColor"),i.setAttribute("d","M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z"),s.appendChild(i),s}const T=typeof window!="undefined",st=T&&!("onscroll"in window)||typeof navigator!="undefined"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),it=T&&"IntersectionObserver"in window,rt=T&&"classList"in document.createElement("p"),ot=T&&window.devicePixelRatio>1,Ps={elements_selector:".lazy",container:st||T?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},at=t=>Object.assign({},Ps,t),Be=function(t,e){let s;const i="LazyLoad::Initialized",r=new t(e);try{s=new CustomEvent(i,{detail:{instance:r}})}catch{s=document.createEvent("CustomEvent"),s.initCustomEvent(i,!1,!1,{instance:r})}window.dispatchEvent(s)},Ns=(t,e)=>{if(!!e)if(!e.length)Be(t,e);else for(let s=0,i;i=e[s];s+=1)Be(t,i)},S="src",fe="srcset",we="sizes",nt="poster",j="llOriginalAttrs",ct="data",ve="loading",lt="loaded",ht="applied",$s="entered",be="error",dt="native",pt="data-",ut="ll-status",g=(t,e)=>t.getAttribute(pt+e),ks=(t,e,s)=>{var i=pt+e;if(s===null){t.removeAttribute(i);return}t.setAttribute(i,s)},Y=t=>g(t,ut),k=(t,e)=>ks(t,ut,e),te=t=>k(t,null),me=t=>Y(t)===null,Rs=t=>Y(t)===ve,Ls=t=>Y(t)===be,Se=t=>Y(t)===dt,Os=[ve,lt,ht,be],As=t=>Os.indexOf(Y(t))>=0,C=(t,e,s,i)=>{if(!!t){if(i!==void 0){t(e,s,i);return}if(s!==void 0){t(e,s);return}t(e)}},H=(t,e)=>{if(rt){t.classList.add(e);return}t.className+=(t.className?" ":"")+e},b=(t,e)=>{if(rt){t.classList.remove(e);return}t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},zs=t=>{t.llTempImage=document.createElement("IMG")},Hs=t=>{delete t.llTempImage},gt=t=>t.llTempImage,se=(t,e)=>{if(!e)return;const s=e._observer;!s||s.unobserve(t)},Ds=t=>{t.disconnect()},Ms=(t,e,s)=>{e.unobserve_entered&&se(t,s)},xe=(t,e)=>{!t||(t.loadingCount+=e)},Bs=t=>{!t||(t.toLoadCount-=1)},ft=(t,e)=>{!t||(t.toLoadCount=e)},Vs=t=>t.loadingCount>0,Ws=t=>t.toLoadCount>0,wt=t=>{let e=[];for(let s=0,i;i=t.children[s];s+=1)i.tagName==="SOURCE"&&e.push(i);return e},ye=(t,e)=>{const s=t.parentNode;if(!s||s.tagName!=="PICTURE")return;wt(s).forEach(e)},vt=(t,e)=>{wt(t).forEach(e)},ie=[S],bt=[S,nt],F=[S,fe,we],mt=[ct],re=t=>!!t[j],St=t=>t[j],xt=t=>delete t[j],A=(t,e)=>{if(re(t))return;const s={};e.forEach(i=>{s[i]=t.getAttribute(i)}),t[j]=s},Us=t=>{re(t)||(t[j]={backgroundImage:t.style.backgroundImage})},Fs=(t,e,s)=>{if(!s){t.removeAttribute(e);return}t.setAttribute(e,s)},$=(t,e)=>{if(!re(t))return;const s=St(t);e.forEach(i=>{Fs(t,i,s[i])})},js=t=>{if(!re(t))return;const e=St(t);t.style.backgroundImage=e.backgroundImage},yt=(t,e,s)=>{H(t,e.class_applied),k(t,ht),s&&(e.unobserve_completed&&se(t,e),C(e.callback_applied,t,s))},Et=(t,e,s)=>{H(t,e.class_loading),k(t,ve),s&&(xe(s,1),C(e.callback_loading,t,s))},E=(t,e,s)=>{!s||t.setAttribute(e,s)},Ve=(t,e)=>{E(t,we,g(t,e.data_sizes)),E(t,fe,g(t,e.data_srcset)),E(t,S,g(t,e.data_src))},Ys=(t,e)=>{ye(t,s=>{A(s,F),Ve(s,e)}),A(t,F),Ve(t,e)},Gs=(t,e)=>{A(t,ie),E(t,S,g(t,e.data_src))},qs=(t,e)=>{vt(t,s=>{A(s,ie),E(s,S,g(s,e.data_src))}),A(t,bt),E(t,nt,g(t,e.data_poster)),E(t,S,g(t,e.data_src)),t.load()},Xs=(t,e)=>{A(t,mt),E(t,ct,g(t,e.data_src))},Js=(t,e,s)=>{const i=g(t,e.data_bg),r=g(t,e.data_bg_hidpi),o=ot&&r?r:i;!o||(t.style.backgroundImage=`url("${o}")`,gt(t).setAttribute(S,o),Et(t,e,s))},Zs=(t,e,s)=>{const i=g(t,e.data_bg_multi),r=g(t,e.data_bg_multi_hidpi),o=ot&&r?r:i;!o||(t.style.backgroundImage=o,yt(t,e,s))},Ks=(t,e,s)=>{const i=g(t,e.data_bg_set);if(!i)return;const r=i.split("|");let o=r.map(a=>`image-set(${a})`);t.style.backgroundImage=o.join(),t.style.backgroundImage===""&&(o=r.map(a=>`-webkit-image-set(${a})`),t.style.backgroundImage=o.join()),yt(t,e,s)},Tt={IMG:Ys,IFRAME:Gs,VIDEO:qs,OBJECT:Xs},Qs=(t,e)=>{const s=Tt[t.tagName];!s||s(t,e)},ei=(t,e,s)=>{const i=Tt[t.tagName];!i||(i(t,e),Et(t,e,s))},ti=["IMG","IFRAME","VIDEO","OBJECT"],si=t=>ti.indexOf(t.tagName)>-1,Ct=(t,e)=>{e&&!Vs(e)&&!Ws(e)&&C(t.callback_finish,e)},We=(t,e,s)=>{t.addEventListener(e,s),t.llEvLisnrs[e]=s},ii=(t,e,s)=>{t.removeEventListener(e,s)},Ee=t=>!!t.llEvLisnrs,ri=(t,e,s)=>{Ee(t)||(t.llEvLisnrs={});const i=t.tagName==="VIDEO"?"loadeddata":"load";We(t,i,e),We(t,"error",s)},ue=t=>{if(!Ee(t))return;const e=t.llEvLisnrs;for(let s in e){const i=e[s];ii(t,s,i)}delete t.llEvLisnrs},_t=(t,e,s)=>{Hs(t),xe(s,-1),Bs(s),b(t,e.class_loading),e.unobserve_completed&&se(t,s)},oi=(t,e,s,i)=>{const r=Se(e);_t(e,s,i),H(e,s.class_loaded),k(e,lt),C(s.callback_loaded,e,i),r||Ct(s,i)},ai=(t,e,s,i)=>{const r=Se(e);_t(e,s,i),H(e,s.class_error),k(e,be),C(s.callback_error,e,i),s.restore_on_error&&$(e,F),r||Ct(s,i)},Te=(t,e,s)=>{const i=gt(t)||t;if(Ee(i))return;ri(i,a=>{oi(a,t,e,s),ue(i)},a=>{ai(a,t,e,s),ue(i)})},ni=(t,e,s)=>{zs(t),Te(t,e,s),Us(t),Js(t,e,s),Zs(t,e,s),Ks(t,e,s)},ci=(t,e,s)=>{Te(t,e,s),ei(t,e,s)},Ce=(t,e,s)=>{si(t)?ci(t,e,s):ni(t,e,s)},li=(t,e,s)=>{t.setAttribute("loading","lazy"),Te(t,e,s),Qs(t,e),k(t,dt)},Ue=t=>{t.removeAttribute(S),t.removeAttribute(fe),t.removeAttribute(we)},hi=t=>{ye(t,e=>{Ue(e)}),Ue(t)},It=t=>{ye(t,e=>{$(e,F)}),$(t,F)},di=t=>{vt(t,e=>{$(e,ie)}),$(t,bt),t.load()},pi=t=>{$(t,ie)},ui=t=>{$(t,mt)},gi={IMG:It,IFRAME:pi,VIDEO:di,OBJECT:ui},fi=t=>{const e=gi[t.tagName];if(!e){js(t);return}e(t)},wi=(t,e)=>{me(t)||Se(t)||(b(t,e.class_entered),b(t,e.class_exited),b(t,e.class_applied),b(t,e.class_loading),b(t,e.class_loaded),b(t,e.class_error))},vi=(t,e)=>{fi(t),wi(t,e),te(t),xt(t)},bi=(t,e,s,i)=>{!s.cancel_on_exit||!Rs(t)||t.tagName==="IMG"&&(ue(t),hi(t),It(t),b(t,s.class_loading),xe(i,-1),te(t),C(s.callback_cancel,t,e,i))},mi=(t,e,s,i)=>{const r=As(t);k(t,$s),H(t,s.class_entered),b(t,s.class_exited),Ms(t,s,i),C(s.callback_enter,t,e,i),!r&&Ce(t,s,i)},Si=(t,e,s,i)=>{me(t)||(H(t,s.class_exited),bi(t,e,s,i),C(s.callback_exit,t,e,i))},xi=["IMG","IFRAME","VIDEO"],Pt=t=>t.use_native&&"loading"in HTMLImageElement.prototype,yi=(t,e,s)=>{t.forEach(i=>{xi.indexOf(i.tagName)!==-1&&li(i,e,s)}),ft(s,0)},Ei=t=>t.isIntersecting||t.intersectionRatio>0,Ti=t=>({root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}),Ci=(t,e,s)=>{t.forEach(i=>Ei(i)?mi(i.target,i,e,s):Si(i.target,i,e,s))},_i=(t,e)=>{e.forEach(s=>{t.observe(s)})},Ii=(t,e)=>{Ds(t),_i(t,e)},Pi=(t,e)=>{!it||Pt(t)||(e._observer=new IntersectionObserver(s=>{Ci(s,t,e)},Ti(t)))},Nt=t=>Array.prototype.slice.call(t),Q=t=>t.container.querySelectorAll(t.elements_selector),Ni=t=>Nt(t).filter(me),$i=t=>Ls(t),ki=t=>Nt(t).filter($i),Fe=(t,e)=>Ni(t||Q(e)),Ri=(t,e)=>{ki(Q(t)).forEach(i=>{b(i,t.class_error),te(i)}),e.update()},Li=(t,e)=>{!T||(e._onlineHandler=()=>{Ri(t,e)},window.addEventListener("online",e._onlineHandler))},Oi=t=>{!T||window.removeEventListener("online",t._onlineHandler)},G=function(t,e){const s=at(t);this._settings=s,this.loadingCount=0,Pi(s,this),Li(s,this),this.update(e)};G.prototype={update:function(t){const e=this._settings,s=Fe(t,e);if(ft(this,s.length),st||!it){this.loadAll(s);return}if(Pt(e)){yi(s,e,this);return}Ii(this._observer,s)},destroy:function(){this._observer&&this._observer.disconnect(),Oi(this),Q(this._settings).forEach(t=>{xt(t)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){const e=this._settings;Fe(t,e).forEach(i=>{se(i,this),Ce(i,e,this)})},restoreAll:function(){const t=this._settings;Q(t).forEach(e=>{vi(e,t)})}};G.load=(t,e)=>{const s=at(e);Ce(t,s)};G.resetStatus=t=>{te(t)};T&&Ns(G,window.lazyLoadOptions);var qe;const W=(qe=window.navigator)==null?void 0:qe.userAgent;W==null||W.match(/(Edge?)\/(\d+)/);const je=()=>typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(W),Ye=()=>typeof navigator!="undefined"&&/Android/.test(W);class $t{constructor({context:e,readonly:s,box:i,pages:r,onNewPageIndex:o,onPlay:a}){if(this.pageIndex=0,this.namespace="netless-app-docs-viewer",this.isShowPreview=!1,this.isSmallBox=!1,this.sideEffect=new ee,r.length<=0)throw new Error("[DocsViewer] Empty pages.");this.context=e,this.readonly=s,this.box=i,this.pages=r,this.onNewPageIndex=o,this.onPlay=a,this.onPageIndexChanged=()=>{},this.render()}mount(){this.box.mountContent(this.$content),this.box.mountFooter(this.$footer),this.box.events.on("maximized",e=>{this.$footer.classList.toggle(this.wrapClassName("hide"),e)}),this.$footer.classList.toggle(this.wrapClassName("hide"),this.box.maximized)}unmount(){this.$content.remove(),this.$footer.remove()}setReadonly(e){this.readonly!==e&&(this.readonly=e,this.$content.classList.toggle(this.wrapClassName("readonly"),e),this.$footer.classList.toggle(this.wrapClassName("readonly"),e))}destroy(){this.sideEffect.flushAll(),this.unmount()}setPageIndex(e){Number.isNaN(e)||(this.scrollPreview(e),this.pageIndex=e,this.$pageNumberInput.textContent=String(e+1),this.onPageIndexChanged(e),this.$btnPageBack.classList.toggle(this.wrapClassName("footer-btn-disable"),e==0),this.$btnPageNext.classList.toggle(this.wrapClassName("footer-btn-disable"),e==this.pages.length-1))}scrollPreview(e){var n;const s=(n=this.$preview)==null?void 0:n.querySelectorAll("."+this.wrapClassName("preview-page"));if(s==null||s.forEach((c,l)=>{var h;(h=c.querySelector("img"))==null||h.classList.toggle(this.wrapClassName("active"),Number(e)==l)}),!s)return;const i=Array.prototype.slice.call(s).find(c=>c.querySelector("img").className.includes(this.wrapClassName("active")));if(!i)return;const r=this.$preview.getBoundingClientRect(),o=i==null?void 0:i.getBoundingClientRect();o.top>=r.top&&o.bottom<=r.bottom||this.$preview.scrollTo({top:i.offsetTop-16,behavior:this.isShowPreview?"smooth":"auto"})}setSmallBox(e){this.isSmallBox!==e&&(this.isSmallBox=e,this.$footer.classList.toggle(this.wrapClassName("float-footer"),e))}render(){return this.renderContent(),this.renderFooter(),this.$content}renderContent(){if(!this.$content){const e=document.createElement("div");e.className=this.wrapClassName("content"),this.$content=e,this.readonly&&e.classList.add(this.wrapClassName("readonly"))}return this.$content}renderPreview(){if(!this.$preview){const e=document.createElement("div");e.className=this.wrapClassName("preview")+" tele-fancy-scrollbar",this.$preview=e;const s=document.createElement("div");s.className=this.wrapClassName("preview-head");const i=document.createElement("h3");i.textContent=this.box.title,s.appendChild(i),this.$preview.appendChild(s);const r=this.wrapClassName("preview-page"),o=this.wrapClassName("preview-page-name");this.pages.forEach((a,n)=>{var m;const c=(m=a.thumbnail)!=null?m:a.src.startsWith("ppt")?void 0:a.src;if(!c)return;const l=String(n),h=document.createElement("a");h.className=r+" "+this.wrapClassName(`preview-page-${n}`),h.setAttribute("href","#"),h.dataset.pageIndex=l;const d=document.createElement("span");d.className=o,d.textContent=String(n+1),d.dataset.pageIndex=l;const f=document.createElement("img");f.width=a.width,f.height=a.height,f.dataset.src=c,f.dataset.pageIndex=l,h.appendChild(d),h.appendChild(f),e.appendChild(h),f.classList.toggle(this.wrapClassName("active"),this.pageIndex==n)}),this.sideEffect.addEventListener(e,"click",a=>{var c;if(this.readonly)return;const n=(c=a.target.dataset)==null?void 0:c.pageIndex;n&&(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),this.onNewPageIndex(Number(n)))})}return this.$preview}renderPreviewMask(){return this.$previewMask||(this.$previewMask=document.createElement("div"),this.$previewMask.className=this.wrapClassName("preview-mask"),this.sideEffect.addEventListener(this.$previewMask,"click",e=>{this.readonly||e.target===this.$previewMask&&this.togglePreview(!1)})),this.$previewMask}renderFooter(){if(!this.$footer){const e=document.createElement("div");e.className=this.wrapClassName("footer"),this.$footer=e,this.readonly&&e.classList.add(this.wrapClassName("readonly")),this.isSmallBox&&e.classList.add(this.wrapClassName("float-footer"));const s=document.createElement("div");s.className=this.wrapClassName("page-jumps");const i=this.renderFooterBtn("btn-page-back",Ts(this.namespace));if(this.sideEffect.addEventListener(i,"click",()=>{this.readonly||this.onNewPageIndex(this.pageIndex-1)}),s.appendChild(i),this.$btnPageBack=i,this.onPlay){const c=this.renderFooterBtn("btn-page-play",_s(this.namespace),Is(this.namespace)),l=()=>{this.sideEffect.setTimeout(()=>{c.classList.toggle(this.wrapClassName("footer-btn-playing"),!1)},500,"returnPlay")};this.sideEffect.addEventListener(c,"click",()=>{var h;this.readonly||(c.classList.toggle(this.wrapClassName("footer-btn-playing"),!0),(h=this.onPlay)==null||h.call(this),l())}),!this.context.getIsAppReadonly()&&!je()&&!Ye()&&this.$footer.appendChild(c)}const r=document.createElement("div");r.className=this.wrapClassName("page-number");const o=document.createElement("span");o.className=this.wrapClassName("page-number-input"),o.textContent=String(this.pageIndex+1),this.$pageNumberInput=o;const a=document.createElement("span");a.textContent=" / "+this.pages.length,r.appendChild(o),r.appendChild(a),s.appendChild(r);const n=this.renderFooterBtn("btn-page-next",Cs(this.namespace));this.sideEffect.addEventListener(n,"click",()=>{this.readonly||this.onNewPageIndex(this.pageIndex+1)}),s.appendChild(n),this.$btnPageNext=n,!this.context.getIsAppReadonly()&&!je()&&!Ye()&&this.$footer.appendChild(s)}return this.$footer}renderFooterBtn(e,s,i){const r=document.createElement("button");return r.className=this.wrapClassName("footer-btn")+" "+this.wrapClassName(e),r.appendChild(s),i&&r.appendChild(i),r}togglePreview(e){var s,i,r,o,a,n,c;this.isShowPreview=e!=null?e:!this.isShowPreview,console.log((s=this.context)==null?void 0:s.extendWrapper),this.$content.classList.toggle(this.wrapClassName("preview-active"),this.isShowPreview),this.isShowPreview?((i=this.context)!=null&&i.extendWrapper&&((o=(r=this.context)==null?void 0:r.extendWrapper)==null||o.appendChild(this.renderPreviewMask()),(n=(a=this.context)==null?void 0:a.extendWrapper)==null||n.appendChild(this.renderPreview()),this.context.extendWrapper.style.display="block"),setTimeout(()=>{const l=this.$preview.querySelector("."+this.wrapClassName(`preview-page-${this.pageIndex}`));l&&(this.sideEffect.add(()=>{const h=new G({container:this.$preview,elements_selector:`.${this.wrapClassName("preview-page>img")}`});return()=>h.destroy()},"preview-lazyload"),this.$preview.scrollTo({top:l.offsetTop-16})),l&&this.$preview.scrollTo({top:l.offsetTop-16})})):(c=this.context)!=null&&c.extendWrapper&&(this.context.extendWrapper.style.display="none",this.context.extendWrapper.innerHTML="")}wrapClassName(e){return`${this.namespace}-${e}`}}function z(t,e,s){return Math.min(Math.max(t,e),s)}function Ge(t){return t.touches?t.touches[0]:t}function kt(t){t.stopPropagation(),t.cancelable&&t.preventDefault()}function Rt(t){if(!t)return!1;const e=t.tagName;return e==="INPUT"||e==="TEXTAREA"||e==="SELECT"}class Ai{constructor(e){var s,i,r;this.velocity=0,this.paused=!0,this._animationFrameID=null,this._loopTimestamp=0,this.looper=o=>{if(this.paused)return;let a=Math.floor((o-this._loopTimestamp)/1e3*60)+1;for(this._loopTimestamp=o;a-- >0;)this.stepper();this.onStep(this.current,this),!this.paused&&this.current!==this.target&&window.requestAnimationFrame(this.looper)},this.current=(s=e.start)!=null?s:0,this.target=this.current,this.stiffness=(i=e.stiffness)!=null?i:170,this.damping=(r=e.damping)!=null?r:26,this.onStep=e.onStep}stepTo(e,s){this.paused&&s!=null&&(this.current=s),this.paused=!1,this.target=e,this.onStep(this.current,this),this._loopTimestamp=Date.now(),window.requestAnimationFrame(this.looper)}pause(){this.paused=!0}destroy(){this.pause()}stepper(){const e=-this.stiffness*(this.current-this.target),s=-this.damping*this.velocity,i=this.velocity+(e+s)/60,r=this.current+i/60;Math.abs(i-0)<.01&&Math.abs(r-this.target)<.01?(this.current=this.target,this.velocity=0):(this.current=r,this.velocity=i)}}class zi{constructor(e,s,i,r){this.scale=1,this.lastVisit=Date.now(),this.pageOffsetY=0,this.pageOffsetX=0,this.visible=!0,this.index=e,this.page=s,this.scale=i,this.pageOffsetX=(r-s.width)/2;const o=document.createElement("div");o.className="page-renderer-page",o.dataset.index=`${e}`,o.style.width=`${s.width*i}px`,o.style.height=`${s.height*i}px`,s.thumbnail&&(o.style.backgroundImage=`url("${s.thumbnail}")`);const a=document.createElement("img");a.className="page-renderer-page-img",a.width=s.width,a.height=s.height,a.src=s.src,o.appendChild(a),this.$page=o}translateY(e){Math.abs(e-this.pageOffsetY)>=.001&&(this.pageOffsetY=e,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setScale(e){Math.abs(e-this.scale)>=.001&&(this.scale=e,this.$page.style.width=`${this.page.width*this.scale}px`,this.$page.style.height=`${this.page.height*this.scale}px`,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setVisible(e){e!==this.visible&&(this.visible=e,this.$page.style.opacity=e?"1":"0")}}const Hi=window.requestIdleCallback||(t=>window.setTimeout(t,5e3)),Di=window.cancelIdleCallback||window.clearTimeout;class Mi{constructor(e,s,i){this.pages=e,this.pagesIntrinsicWidth=s,this.scale=i,this.els=new Map,this.maxElCount=200,this.gcTimer=null,this.gc=()=>{if(this.gcTimer=null,this.els.size>this.maxElCount){const r=[...this.els.values()].sort((o,a)=>a.lastVisit-o.lastVisit);for(let o=Math.floor(this.maxElCount/4);o<r.length;o++)this.els.delete(r[o].index)}}}getEl(e){let s=this.els.get(e);return s||(s=new zi(e,this.pages[e],this.scale,this.pagesIntrinsicWidth),this.els.set(e,s)),s.lastVisit=Date.now(),this.els.size>this.maxElCount&&this.gcTimer===null&&(this.gcTimer=Hi(this.gc)),s}setScale(e){e!==this.scale&&(this.scale=e,this.els.forEach(s=>s.setScale(e)))}destroy(){this.els.clear(),this.gcTimer!==null&&(Di(this.gcTimer),this.gcTimer=null)}}class Bi{constructor(e){this._hwaTimeout=NaN,this._turnOffHWA=()=>{window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN,this.$pages.classList.toggle("is-hwa",!1)},this.pagesScrollTop=e.pagesScrollTop||0,this.containerWidth=e.containerWidth||1,this.containerHeight=e.containerHeight||1,this.pages=e.pages.map(o=>{if(o.thumbnail)return o;try{const a=new URL(o.src);return a.searchParams.set("x-oss-process","image/resize,l_50"),le(ce({},o),{thumbnail:a.toString()})}catch(a){return console.error(a),o}});const s=Array(this.pages.length);let i=1/0,r=0;this.pagesIntrinsicHeight=this.pages.reduce((o,a,n)=>(s[n]=o,a.width>r&&(r=a.width),a.height<=i&&(i=a.height),o+a.height),0),this.pagesIntrinsicWidth=r,this.pagesMinHeight=i,this.pagesIntrinsicYs=s,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.onPageIndexChanged=e.onPageIndexChanged,this.pageScrollIndex=0,this.pagesScrollTop!==0&&(this.pageScrollIndex=this.findScrollPageIndex(),this.onPageIndexChanged&&this.pageScrollIndex>0&&this.onPageIndexChanged(this.pageScrollIndex)),this.pageElManager=new Mi(this.pages,r,this.scale),this.$pages=this.renderPages()}setContainerSize(e,s){e>0&&s>0&&(e!==this.containerWidth||s!==this.containerHeight)&&(this.containerWidth=e,this.containerHeight=s,this.$pages.style.width=`${this.containerWidth}px`,this.$pages.style.height=`${this.containerHeight}px`,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.pageElManager.setScale(this.scale),this.$pages.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}renderPages(){const e=document.createElement("div");return e.className="page-renderer-pages-container",e.style.width=`${this.containerWidth}px`,e.style.height=`${this.containerHeight}px`,e}pagesScrollTo(e,s){if(e=z(e,0,this.pagesIntrinsicHeight-this.containerHeight/this.scale),s||Math.abs(e-this.pagesScrollTop)>=.001){this._turnOnHWA(),this.pagesScrollTop=e;const i=this.findScrollPageIndex(),r=Math.max(i-this.threshold,0),o=Math.min(i+this.threshold,this.pages.length-1);for(let a=0;a<this.$pages.children.length;a++){const n=this.$pages.children[a],c=Number(n.dataset.index);c>=r&&c<=o||(n.remove(),a--)}for(let a=r;a<=o;a++){const n=this.pageElManager.getEl(a);n.$page.parentElement!==this.$pages&&this.$pages.appendChild(n.$page),n.translateY(this.pagesIntrinsicYs[a]-this.pagesScrollTop)}i!==this.pageScrollIndex&&(this.pageScrollIndex=i,this.onPageIndexChanged&&this.onPageIndexChanged(i))}}findScrollPageIndex(){for(let e=0;e<this.pagesIntrinsicYs.length;e++)if(this.pagesIntrinsicYs[e]+this.pages[e].height-this.pagesScrollTop>=.001)return e;return this.pagesIntrinsicYs.length-1}mount(e){e.appendChild(this.$pages),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$pages.remove()}destroy(){this.unmount(),this.onPageIndexChanged=void 0,this.pageElManager.destroy(),this._hwaTimeout&&(window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN)}_calcScale(){return this.containerWidth/this.pagesIntrinsicWidth||1}_calcThreshold(){return z(Math.ceil(this.containerHeight/this.scale/this.pagesMinHeight/2),1,this.pages.length)}_turnOnHWA(){this._hwaTimeout?window.clearTimeout(this._hwaTimeout):this.$pages.classList.toggle("is-hwa",!0),this._hwaTimeout=window.setTimeout(this._turnOffHWA,1e3)}}const Vi=30;class Wi{constructor(e){this.sideEffect=new ee,this.pagesScrollTop=e.pagesScrollTop||0,this.containerWidth=e.containerWidth||1,this.containerHeight=e.containerHeight||1,this.pagesWidth=e.pagesWidth||1,this.pagesHeight=e.pagesHeight||1,this.scale=this._calcScale(),this.scrollbarMinHeight=e.scrollbarMinHeight||Vi,this.scrollbarHeight=this._calcScrollbarHeight(),this.readonly=e.readonly,this.wrapClassName=e.wrapClassName,this.onDragScroll=e.onDragScroll,this.$scrollbar=this.renderScrollbar()}mount(e){e.appendChild(this.$scrollbar),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$scrollbar.remove()}setReadonly(e){this.readonly=e}setContainerSize(e,s){e>0&&s>0&&(e!==this.containerWidth||s!==this.containerHeight)&&(this.containerWidth=e,this.containerHeight=s,this.scale=this._calcScale(),this._updateScrollbarHeight(),this.$scrollbar.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}pagesScrollTo(e,s){if(e=z(e,0,this.pagesHeight-this.containerHeight/this.scale),s||Math.abs(e-this.pagesScrollTop)>=.001){this.pagesScrollTop=e;const i=this.pagesScrollTop*this.scale,r=this.pagesHeight*this.scale,o=i/(r-this.containerHeight)*(this.containerHeight-this.scrollbarHeight);window.requestAnimationFrame?window.requestAnimationFrame(()=>{this.$scrollbar.style.transform=`translateY(${o}px)`}):this.$scrollbar.style.transform=`translateY(${o}px)`}}destroy(){this.unmount(),this.onDragScroll=void 0,this.sideEffect.flushAll()}renderScrollbar(){const e=document.createElement("button");e.className=this.wrapClassName("scrollbar"),e.style.minHeight=`${this.scrollbarMinHeight}px`,e.style.height=`${this.scrollbarHeight}px`;const s=i=>{if(this.readonly||i.button!=null&&i.button!==0)return;kt(i);const r=this.wrapClassName("scrollbar-dragging");e.classList.toggle(r,!0);const o=this.pagesScrollTop,{clientY:a}=Ge(i),n=l=>{if(this.readonly)return;const{clientY:h}=Ge(l),d=(h-a)/this.scale;Math.abs(d)>0&&this.onDragScroll&&this.onDragScroll(o+d*(this.pagesHeight*this.scale/this.containerHeight))},c=()=>{e.classList.toggle(r,!1),window.removeEventListener("mousemove",n,!0),window.removeEventListener("touchmove",n,!0),window.removeEventListener("mouseup",c,!0),window.removeEventListener("touchend",c,!0),window.removeEventListener("touchcancel",c,!0)};window.addEventListener("mousemove",n,!0),window.addEventListener("touchmove",n,!0),window.addEventListener("mouseup",c,!0),window.addEventListener("touchend",c,!0),window.addEventListener("touchcancel",c,!0)};return this.sideEffect.addEventListener(e,"mousedown",s),this.sideEffect.addEventListener(e,"touchstart",s),e}_calcScale(){return this.containerWidth/this.pagesWidth||1}_calcScrollbarHeight(){return z(this.containerHeight/(this.pagesHeight*this.scale)*this.containerHeight,this.scrollbarMinHeight,this.containerHeight)}_updateScrollbarHeight(){const e=this._calcScrollbarHeight();Math.abs(e-this.scrollbarHeight)>.001&&(this.scrollbarHeight=e,this.$scrollbar.style.height=`${e}px`)}}const Ui=window.ResizeObserver||Es,B=640;class Fi{constructor({context:e,whiteboardView:s,readonly:i,box:r,pages:o,pageScrollTop:a=0,mountWhiteboard:n,onUserScroll:c,baseScenePath:l,appId:h}){this.sideEffect=new ee,this.userScrolling=!1,this.onNewPageIndex=u=>{this.scrollToPage(u)},this.toPdf=async()=>{const u=document.createElement("canvas"),x=u.getContext("2d");if(!x||!this.baseScenePath){this.reportProgress(100,null);return}const D=this.whiteboardView.focusScenePath||`${this.baseScenePath}/1`,_=this.pages[0],{jsPDF:M}=await Promise.resolve().then(function(){return Vt(require("jspdf"))}),y=new M({format:[_.width,_.height],orientation:_.width>_.height?"l":"p",compress:!0});for(const[I,oe]of this.pages.entries()){const{width:w,height:p,src:R}=oe;u.width=w,u.height=p;const ae=w>p?"l":"p";I>0&&y.addPage([w,p],ae);const ne=await this.getBase64FromUrl(R),L=document.createElement("img");L.src=ne,await new Promise(At=>L.onload=At),x.drawImage(L,0,0);const Lt=u.toDataURL("image/jpeg",.6);x.clearRect(0,0,w,p);const _e={centerX:w/2,centerY:p/2+I*p,scale:1},Ie=this.context.manager.windowManger;Ie._appliancePlugin?await Ie._appliancePlugin.screenshotToCanvasAsync(x,D,w,p,_e):this.whiteboardView.screenshotToCanvas(x,D,w,p,_e);const Ot=u.toDataURL("image/png");y.addImage(Lt,"JPEG",0,0,w,p,"","FAST"),y.addImage(Ot,"PNG",0,0,w,p,"","FAST"),x.clearRect(0,0,w,p),Math.ceil((I+1)/this.pages.length*100)<100&&this.reportProgress(Math.ceil((I+1)/this.pages.length*100),null)}const q=y.output("arraybuffer");this.reportProgress(100,{pdf:q,title:this.box.title})},this.context=e,this.whiteboardView=s,this.readonly=i,this.box=r,this.pages=o,this.baseScenePath=l,this.appId=h,this.mountWhiteboard=n,this._onUserScroll=c;const d=this.debounce(()=>{this.userScrolling=!1,this._onUserScroll&&this._onUserScroll(this.pageRenderer.pagesScrollTop)},{wait:80},"debounce-updateUserScroll");this.updateUserScroll=()=>{this.userScrolling=!0,d()},this.viewer=new $t({context:e,readonly:i,box:r,pages:o,onNewPageIndex:this.onNewPageIndex});const{width:f,height:m}=this.whiteboardView.size;this.pageRenderer=new Bi({pagesScrollTop:a,pages:this.pages,containerWidth:f,containerHeight:m,onPageIndexChanged:this.viewer.setPageIndex.bind(this.viewer)}),this.scrollbar=new Wi({pagesScrollTop:this.pageRenderer.pagesScrollTop,containerWidth:f,containerHeight:m,pagesWidth:this.pageRenderer.pagesIntrinsicWidth,pagesHeight:this.pageRenderer.pagesIntrinsicHeight,readonly:this.readonly,wrapClassName:this.wrapClassName.bind(this),onDragScroll:u=>{this.pageScrollTo(u),this.updateUserScroll()}}),this.pageScrollStepper=new Ai({start:this.pageRenderer.pagesScrollTop,onStep:u=>{this.pageScrollTo(u)}}),this.render()}mount(){this.viewer.mount(),this.setupScrollListener();const e=this.debounce(this.renderRatioHeight.bind(this),{wait:80});return this.sideEffect.add(()=>{const s=new Ui(e);return s.observe(this.viewer.$content),()=>s.disconnect()}),this.sideEffect.setTimeout(()=>{this.userScrolling||this.pageScrollTo(this.pageRenderer.pagesScrollTop)},100),this.sideEffect.add(()=>{const s=i=>{i.data.type==="@netless/_request_save_pdf_"&&i.data.appId===this.appId&&this.toPdf().catch(()=>this.reportProgress(100,null))};return window.addEventListener("message",s),()=>{window.removeEventListener("message",s)}}),this}unmount(){return this.viewer.unmount(),this}setReadonly(e){this.readonly!==e&&(this.readonly=e,this.viewer.setReadonly(e),this.scrollbar.setReadonly(e))}destroy(){this.sideEffect.flushAll(),this.pageScrollStepper.destroy(),this._onUserScroll=void 0,this.unmount(),this.viewer.destroy(),this.pageRenderer.destroy(),this.scrollbar.destroy()}syncPageScrollTop(e){!this.userScrolling&&e>=0&&Math.abs(this.pageRenderer.pagesScrollTop-e)>.01&&this.pageScrollStepper.stepTo(e,this.pageRenderer.pagesScrollTop)}render(){this.pageRenderer.mount(this.viewer.$content),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.scrollbar.mount(this.viewer.$content),this.renderRatioHeight()}renderRatioHeight(){const e=this.box.absoluteHeight,s=e<=B;if(this.viewer.setSmallBox(s),s){const i=40/B,r=40/e,o=40/B,a=40/e,n=Math.max((i+o-(r+a))/2,0);if(this.box.$titleBar){const c=r+n;this.box.$titleBar.style.height=`${c*100}%`}if(this.box.$footer){const c=a+n;this.box.$footer.style.height=`${c*100}%`}}else{if(this.box.$titleBar){const i=Math.max(40/B,40/e);this.box.$titleBar.style.height=`${i*100}%`}if(this.box.$footer){const i=Math.max(40/B,40/e);this.box.$footer.style.height=`${i*100}%`}}}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.mountWhiteboard(this.$whiteboardView),this.sideEffect.addEventListener(this.$whiteboardView,"wheel",e=>{kt(e),this.readonly||(this.pageScrollTo(this.pageRenderer.pagesScrollTop+e.deltaY),this.updateUserScroll())},{passive:!1,capture:!0}),this.sideEffect.addEventListener(this.$whiteboardView,"touchmove",e=>{this.readonly||e.touches.length<=1||this.updateUserScroll()},{passive:!0,capture:!0})),this.$whiteboardView}scrollTopPageToEl(e){return e*this.pageRenderer.scale}scrollTopElToPage(e){return e/this.pageRenderer.scale}elScrollTo(e){this.pageScrollTo(this.scrollTopElToPage(e))}pageScrollTo(e){const s=this.scrollTopElToPage(this.whiteboardView.size.height/2);this.whiteboardView.moveCamera({centerY:z(e+s,s,this.pageRenderer.pagesIntrinsicHeight-s),animationMode:"immediately"})}scrollToPage(e){if(!this.readonly&&!Number.isNaN(e)){const s=this.pageRenderer.pagesIntrinsicYs[e];s>=0&&(this.pageScrollTo(s+5/this.pageRenderer.scale),this.updateUserScroll())}}setupScrollListener(){this.sideEffect.add(()=>{const e=s=>{const{width:i,height:r}=this.whiteboardView.size;if(i<=0||r<=0)return;const o=s.centerY-this.pageRenderer.containerHeight/this.pageRenderer.scale/2;this.pageRenderer.pagesScrollTo(o),this.scrollbar.pagesScrollTo(o)};return this.whiteboardView.callbacks.on("onCameraUpdated",e),()=>this.whiteboardView.callbacks.off("onCameraUpdated",e)}),this.sideEffect.add(()=>{const{updateUserScroll:e}=this;return this.whiteboardView.callbacks.on("onCameraUpdatedByDevice",e),()=>this.whiteboardView.callbacks.off("onCameraUpdatedByDevice",e)}),this.sideEffect.add(()=>{const e=({width:s,height:i})=>{if(s<=0||i<=0)return;this.pageRenderer.setContainerSize(s,i),this.scrollbar.setContainerSize(s,i);const{pagesIntrinsicWidth:r,pagesIntrinsicHeight:o}=this.pageRenderer;this.whiteboardView.moveCameraToContain({originX:0,originY:this.pageRenderer.pagesScrollTop,width:r,height:i/this.pageRenderer.scale,animationMode:"immediately"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.pageRenderer.scale,minContentMode:()=>this.pageRenderer.scale,centerX:r/2,centerY:o/2,width:r,height:o})};return this.whiteboardView.callbacks.on("onSizeUpdated",e),()=>{this.whiteboardView.callbacks.off("onSizeUpdated",e)}},"whiteboard-size-update"),this.sideEffect.addEventListener(window,"keyup",e=>{if(this.readonly||!this.box.focus||this.box.minimized||Rt(e.target))return;let s=null;switch(e.key){case"PageDown":{s=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case"PageUp":{s=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case"ArrowDown":{s=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}case"ArrowUp":{s=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}}s!==null&&(this._onUserScroll?this._onUserScroll(s):(this.pageScrollTo(s),this.updateUserScroll()))},{capture:!0})}debounce(e,s,i){const r=Zt(e,s);return this.sideEffect.addDisposer(()=>r.cancel(),i),r}wrapClassName(e){return"netless-app-docs-viewer-static-"+e}async getBase64FromUrl(e){const i=await(await fetch(this._invalidate(e))).blob();return new Promise(r=>{const o=new FileReader;o.readAsDataURL(i),o.onloadend=()=>{const a=o.result;r(a)}})}_invalidate(e){try{const s=new URL(e);return s.searchParams.set("t",Date.now().toString()),s.toString()}catch{return e}}reportProgress(e,s){window.postMessage({type:"@netless/_result_save_pdf_",appId:this.appId,progress:e,result:s})}}class ji{constructor({context:e,whiteboardView:s,box:i,pages:r}){this.sideEffect=new ee,this.onPlayPPT=()=>{const o=this.context.getRoom();o&&o.pptNextStep()},this._scaleDocsToFitImpl=()=>{const o=this.pages[this.getPageIndex()];o&&(this.whiteboardView.moveCameraToContain({originX:-o.width/2,originY:-o.height/2,width:o.width,height:o.height,animationMode:"immediately"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.whiteboardView.camera.scale,minContentMode:()=>this.whiteboardView.camera.scale,centerX:0,centerY:0,width:o.width,height:o.height}))},this._scaleDocsToFitDebounced=()=>{this.sideEffect.setTimeout(this._scaleDocsToFitImpl,1e3,"_scaleDocsToFitDebounced")},this.scaleDocsToFit=()=>{this._scaleDocsToFitImpl(),this._scaleDocsToFitDebounced()},this.onNewPageIndex=o=>{this.jumpToPage(o,!0)},this.context=e,this.whiteboardView=s,this.box=i,this.pages=r,this.displayer=e.getDisplayer(),this.viewer=new $t({context:e,readonly:!e.getIsWritable(),box:i,pages:r,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlayPPT}),this.render(),this.sideEffect.add(()=>{const o=a=>{this.viewer.setReadonly(!a)};return this.context.emitter.on("writableChange",o),()=>this.context.emitter.off("writableChange",o)}),this.sideEffect.add(()=>{const o=a=>{this.jumpToPage(a.index)};return this.context.emitter.on("sceneStateChange",o),()=>this.context.emitter.off("sceneStateChange",o)}),this.sideEffect.add(()=>{const o=a=>{this.jumpToPage(a.index)};return this.context.emitter.on("pageStateChange",o),()=>this.context.emitter.off("pageStateChange",o)}),this.sideEffect.add(()=>{const o=a=>{this.viewer.togglePreview(a)};return this.context.emitter.on("togglePreview",o),()=>this.context.emitter.off("togglePreview",o)})}mount(){this.viewer.mount();const e=this.getPageIndex();return e!==0&&this.jumpToPage(e),this.scaleDocsToFit(),this.sideEffect.add(()=>(this.whiteboardView.callbacks.on("onSizeUpdated",this.scaleDocsToFit),()=>{this.whiteboardView.callbacks.off("onSizeUpdated",this.scaleDocsToFit)})),this}unmount(){return this.viewer.unmount(),this}destroy(){this.sideEffect.flushAll(),this.unmount(),this.viewer.destroy()}getPageIndex(){return this.displayer.state.sceneState.index}jumpToPage(e,s){var i,r;if(e=z(e,0,this.pages.length-1),e!==this.getPageIndex()&&this.context.getIsWritable()){const o=this.context.getInitScenePath(),a=(r=(i=this.context.getScenes())==null?void 0:i[e])==null?void 0:r.name;o&&a&&this.context.setScenePath(`${o}/${a}`),this.scaleDocsToFit()}if(e!==this.viewer.pageIndex&&this.viewer.setPageIndex(e),s){const o=this.context.getRoom();if(o){const a=o.state.globalState.__pptState;o.setGlobalState({__pptState:a&&{uuid:a.uuid,pageIndex:e,disableAutoPlay:a.disableAutoPlay}})}}}render(){this.viewer.$content.appendChild(this.renderMask()),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.sideEffect.addEventListener(window,"keydown",e=>{var s;if(this.box.focus&&!Rt(e.target))switch(e.key){case"ArrowUp":case"ArrowLeft":{this.jumpToPage(this.getPageIndex()-1,!0);break}case"ArrowRight":case"ArrowDown":{(s=this.context.getRoom())==null||s.pptNextStep();break}}})}renderMask(){if(!this.$mask){const e=document.createElement("div");e.className=this.wrapClassName("mask"),this.$mask=e;const s=document.createElement("button");s.className=this.wrapClassName("back");const i=document.createElement("button");i.className=this.wrapClassName("next")}return this.$mask}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.sideEffect.addEventListener(this.$whiteboardView,"click",e=>{var i;const s=this.context.getRoom();if(s&&s.state.memberState.currentApplianceName==="clicker"){for(let r=e.target;r;r=r.parentElement)if((i=r.classList)!=null&&i.contains("ppt-event-source"))return;s.pptNextStep()}}),this.context.mountView(this.$whiteboardView)),this.$whiteboardView}wrapClassName(e){return"netless-app-docs-viewer-dynamic-"+e}}const Yi="DocsViewer",Gi={kind:Yi,setup(t){const e=t.getBox(),s=t.getScenes();if(!s)throw new Error("[Docs Viewer]: scenes not found.");const i=t.getView();if(console.log(t.storage.state),!i)throw new Error("[Docs Viewer]: no whiteboard view.");const r=s.map(({ppt:o})=>o?{width:o.width,height:o.height,src:o.src,thumbnail:o.previewURL}:null).filter(o=>Boolean(o));if(r.length<=0)throw new Error("[Docs Viewer]: empty scenes.");return e.mountStyles(Wt),r[0].src.startsWith("ppt")?Xi(t,i,e,r):qi(t,i,e,r)}};function qi(t,e,s,i){var o;e.disableCameraTransform=!t.getIsWritable();const r=new Fi({context:t,whiteboardView:e,readonly:!t.getIsWritable(),box:s,pages:i,pageScrollTop:(o=t.getAttributes())==null?void 0:o.pageScrollTop,mountWhiteboard:t.mountView.bind(t),onUserScroll:a=>{var n;((n=t.getAttributes())==null?void 0:n.pageScrollTop)!==a&&!s.readonly&&t.updateAttributes(["pageScrollTop"],a)},baseScenePath:t.getInitScenePath(),appId:t.appId}).mount();return r.viewer.onPageIndexChanged=a=>{t.dispatchAppEvent("pageStateChange",{index:a,length:i.length})},t.dispatchAppEvent("pageStateChange",{index:r.viewer.pageIndex,length:i.length}),t.emitter.on("attributesUpdate",a=>{a&&a.pageScrollTop!=null&&r.syncPageScrollTop(a.pageScrollTop)}),t.emitter.on("writableChange",a=>{r.setReadonly(!a),e.disableCameraTransform=!a}),{viewer:()=>r,position:()=>{const a=r==null?void 0:r.viewer;if(a)return[a.pageIndex,r.pages.length]}}}function Xi(t,e,s,i){e.disableCameraTransform=!0;const r=new ji({context:t,whiteboardView:e,box:s,pages:i}).mount();return r.viewer.onPageIndexChanged=o=>{t.dispatchAppEvent("pageStateChange",{index:o,length:i.length})},t.dispatchAppEvent("pageStateChange",{index:r.getPageIndex(),length:i.length}),t.mountView(r.$whiteboardView),t.isAddApp&&e.callbacks.once("onSizeUpdated",({width:o,height:a})=>{if(i.length>0&&s.state!=="maximized"){const{width:n,height:c}=i[0],h=c/n*o-a;h!==0&&t.getIsWritable()&&t.emitter.emit("setBoxSize",{width:s.width,height:s.height+h/s.containerRect.height})}}),{viewer:()=>r,position:()=>{const o=r==null?void 0:r.viewer;if(o)return[o.pageIndex,r.pages.length]},nextStep:()=>r.onPlayPPT(),nextPage:()=>r.jumpToPage(r.getPageIndex()+1,!0),prevPage:()=>r.jumpToPage(r.getPageIndex()+1,!0),jumpToPage:o=>{typeof o=="number"&&r.jumpToPage(o,!0)},togglePreview:o=>{r.viewer.togglePreview(o)}}}exports.default=Gi;
//# sourceMappingURL=main.cjs.js.map
