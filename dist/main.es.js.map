{"version":3,"file":"main.es.js","sources":["../../../node_modules/.pnpm/mimic-fn@4.0.0/node_modules/mimic-fn/index.js","../../../node_modules/.pnpm/debounce-fn@5.1.0/node_modules/debounce-fn/index.js","../../../node_modules/.pnpm/side-effect-manager@1.2.1/node_modules/side-effect-manager/dist/side-effect-manager.es.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/freeze.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/element.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/global.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/process.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/scheduler.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObservation.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserver.js","../src/DocsViewer/icons/arrow-left.ts","../src/DocsViewer/icons/arrow-right.ts","../src/DocsViewer/icons/play.ts","../src/DocsViewer/icons/pause.ts","../../../node_modules/.pnpm/vanilla-lazyload@17.8.3/node_modules/vanilla-lazyload/dist/lazyload.esm.js","../src/DocsViewer/index.ts","../src/utils/helpers.ts","../src/StaticDocsViewer/stepper.ts","../src/PageRenderer/PageEl.ts","../src/PageRenderer/PageElManager.ts","../src/PageRenderer/index.ts","../src/ScrollBar/index.ts","../src/StaticDocsViewer/index.ts","../src/DynamicDocsViewer/index.ts","../src/constants.ts","../src/index.ts"],"sourcesContent":["const copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\t// `Function#arguments` and `Function#caller` should not be copied. They were reported to be present in `Reflect.ownKeys` for some devices in React Native (#41), so we explicitly ignore them here.\n\tif (property === 'arguments' || property === 'caller') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n// - one its descriptors is changed\n// - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable &&\n\t\ttoDescriptor.enumerable === fromDescriptor.enumerable &&\n\t\ttoDescriptor.configurable === fromDescriptor.configurable &&\n\t\t(toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tObject.defineProperty(to, 'toString', {...toStringDescriptor, value: newToString});\n};\n\nexport default function mimicFunction(to, from, {ignoreNonConfigurable = false} = {}) {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n}\n","import mimicFn from 'mimic-fn';\n\nconst debounceFn = (inputFunction, options = {}) => {\n\tif (typeof inputFunction !== 'function') {\n\t\tthrow new TypeError(`Expected the first argument to be a function, got \\`${typeof inputFunction}\\``);\n\t}\n\n\tconst {\n\t\twait = 0,\n\t\tmaxWait = Number.Infinity,\n\t\tbefore = false,\n\t\tafter = true,\n\t} = options;\n\n\tif (!before && !after) {\n\t\tthrow new Error('Both `before` and `after` are false, function wouldn\\'t be called.');\n\t}\n\n\tlet timeout;\n\tlet maxTimeout;\n\tlet result;\n\n\tconst debouncedFunction = function (...arguments_) {\n\t\tconst context = this; // eslint-disable-line unicorn/no-this-assignment\n\n\t\tconst later = () => {\n\t\t\ttimeout = undefined;\n\n\t\t\tif (maxTimeout) {\n\t\t\t\tclearTimeout(maxTimeout);\n\t\t\t\tmaxTimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst maxLater = () => {\n\t\t\tmaxTimeout = undefined;\n\n\t\t\tif (timeout) {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst shouldCallNow = before && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (maxWait > 0 && maxWait !== Number.Infinity && !maxTimeout) {\n\t\t\tmaxTimeout = setTimeout(maxLater, maxWait);\n\t\t}\n\n\t\tif (shouldCallNow) {\n\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tmimicFn(debouncedFunction, inputFunction);\n\n\tdebouncedFunction.cancel = () => {\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = undefined;\n\t\t}\n\n\t\tif (maxTimeout) {\n\t\t\tclearTimeout(maxTimeout);\n\t\t\tmaxTimeout = undefined;\n\t\t}\n\t};\n\n\treturn debouncedFunction;\n};\n\nexport default debounceFn;\n","const SOUP = \"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\nconst SOUP_LEN = 87;\nconst ID_LEN = 20;\nconst reusedIdCarrier = [];\nconst genUID = () => {\n  for (let i = 0; i < ID_LEN; i++) {\n    reusedIdCarrier[i] = SOUP.charAt(Math.random() * SOUP_LEN);\n  }\n  return reusedIdCarrier.join(\"\");\n};\nfunction invoke(fn) {\n  try {\n    return fn();\n  } catch (e) {\n    console.error(e);\n  }\n}\nclass SideEffectManager {\n  constructor() {\n    this.push = this.addDisposer;\n    this.disposers = new Map();\n  }\n  addDisposer(disposer, disposerID = this.genUID()) {\n    this.flush(disposerID);\n    this.disposers.set(disposerID, Array.isArray(disposer) ? joinDisposers(disposer) : disposer);\n    return disposerID;\n  }\n  add(executor, disposerID = this.genUID()) {\n    const disposers = executor();\n    return disposers ? this.addDisposer(disposers, disposerID) : disposerID;\n  }\n  addEventListener(el, type, listener, options, disposerID = this.genUID()) {\n    el.addEventListener(type, listener, options);\n    this.addDisposer(() => el.removeEventListener(type, listener, options), disposerID);\n    return disposerID;\n  }\n  setTimeout(handler, timeout, disposerID = this.genUID()) {\n    const ticket = window.setTimeout(() => {\n      this.remove(disposerID);\n      handler();\n    }, timeout);\n    return this.addDisposer(() => window.clearTimeout(ticket), disposerID);\n  }\n  setInterval(handler, timeout, disposerID = this.genUID()) {\n    const ticket = window.setInterval(handler, timeout);\n    return this.addDisposer(() => window.clearInterval(ticket), disposerID);\n  }\n  remove(disposerID) {\n    const disposer = this.disposers.get(disposerID);\n    this.disposers.delete(disposerID);\n    return disposer;\n  }\n  flush(disposerID) {\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      disposer();\n    }\n  }\n  flushAll() {\n    this.disposers.forEach(invoke);\n    this.disposers.clear();\n  }\n  genUID() {\n    let uid;\n    do {\n      uid = genUID();\n    } while (this.disposers.has(uid));\n    return uid;\n  }\n}\nfunction joinDisposers(disposers) {\n  return () => disposers.forEach(invoke);\n}\nclass AsyncSideEffectManager {\n  constructor() {\n    this.push = this.addDisposer;\n    this.finished = Promise.resolve();\n    this.disposers = new Map();\n    this._nextTask = new Map();\n    this._isRunning = new Set();\n  }\n  add(executor, disposerID = this.genUID()) {\n    if (this._isRunning.has(disposerID)) {\n      this._nextTask.set(disposerID, () => this._add(executor, disposerID));\n    } else {\n      this._add(executor, disposerID);\n    }\n    return disposerID;\n  }\n  async _add(executor, disposerID) {\n    this._startTask(disposerID);\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      try {\n        await disposer();\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    try {\n      const disposers = await executor();\n      if (disposers) {\n        this.disposers.set(disposerID, Array.isArray(disposers) ? joinAsyncDisposers(disposers) : disposers);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n    this._endTask(disposerID);\n    const task = this._nextTask.get(disposerID);\n    if (task) {\n      this._nextTask.delete(disposerID);\n      task();\n    }\n  }\n  addDisposer(disposer, disposerID = this.genUID()) {\n    return this.add(() => disposer, disposerID);\n  }\n  remove(disposerID) {\n    const disposer = this.disposers.get(disposerID);\n    this.disposers.delete(disposerID);\n    return disposer;\n  }\n  flush(disposerID) {\n    if (this._isRunning.has(disposerID)) {\n      this._nextTask.set(disposerID, () => this._flush(disposerID));\n    } else {\n      this._flush(disposerID);\n    }\n  }\n  async _flush(disposerID) {\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      this._startTask(disposerID);\n      try {\n        await disposer();\n      } catch (e) {\n        console.error(e);\n      }\n      this._endTask(disposerID);\n    }\n    const task = this._nextTask.get(disposerID);\n    if (task) {\n      this._nextTask.delete(disposerID);\n      task();\n    }\n  }\n  flushAll() {\n    this.disposers.forEach((_, disposerID) => this.flush(disposerID));\n  }\n  genUID() {\n    let uid;\n    do {\n      uid = genUID();\n    } while (this.disposers.has(uid));\n    return uid;\n  }\n  _startTask(disposerID) {\n    this._isRunning.add(disposerID);\n    if (!this._resolveFinished) {\n      this.finished = new Promise((resolve) => {\n        this._resolveFinished = resolve;\n      });\n    }\n  }\n  _endTask(disposerID) {\n    this._isRunning.delete(disposerID);\n    if (this._resolveFinished && this._isRunning.size <= 0 && this._nextTask.size <= 0) {\n      this._resolveFinished();\n      this._resolveFinished = void 0;\n    }\n  }\n}\nfunction joinAsyncDisposers(disposers) {\n  return () => Promise.all(disposers.map(invoke));\n}\nclass Disposable {\n  constructor() {\n    this.push = this.addDisposer;\n    this.disposers = new Set();\n  }\n  addDisposer(disposers) {\n    if (Array.isArray(disposers)) {\n      disposers.forEach((disposer) => {\n        this.disposers.add(disposer);\n      });\n    } else {\n      this.disposers.add(disposers);\n    }\n  }\n  add(executor) {\n    const disposers = executor();\n    if (disposers) {\n      this.push(disposers);\n    }\n  }\n  addEventListener(el, type, listener, options) {\n    el.addEventListener(type, listener, options);\n    const disposer = () => el.removeEventListener(type, listener, options);\n    this.push(disposer);\n    return disposer;\n  }\n  setTimeout(handler, timeout) {\n    const ticket = window.setTimeout(() => {\n      this.remove(disposer);\n      handler();\n    }, timeout);\n    const disposer = () => window.clearTimeout(ticket);\n    this.push(disposer);\n    return disposer;\n  }\n  setInterval(handler, timeout) {\n    const ticket = setInterval(handler, timeout);\n    const disposer = () => clearInterval(ticket);\n    this.push(disposer);\n    return disposer;\n  }\n  remove(disposer) {\n    this.disposers.delete(disposer);\n  }\n  flush(disposer) {\n    this.remove(disposer);\n    disposer();\n  }\n  flushAll() {\n    this.disposers.forEach(invoke);\n    this.disposers.clear();\n  }\n}\nexport { AsyncSideEffectManager, Disposable, SideEffectManager, genUID, joinAsyncDisposers, joinDisposers };\n//# sourceMappingURL=side-effect-manager.es.js.map\n","var resizeObservers = [];\nexport { resizeObservers };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a, _b;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_b = (_a = obj) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\" + (toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","export function arrowLeftSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-left`);\n  $svg.setAttribute(\"viewBox\", \"0 0 20 20\");\n\n  $svg.innerHTML = `<g clip-path=\"url(#clip0_11800_99864)\">\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.5283 4.86182L12.4711 5.80463L8.22849 10.0473L12.4711 14.2899L11.5283 15.2327L6.34287 10.0473L11.5283 4.86182Z\" class=\"arrow\" />\n</g>\n<defs>\n<clipPath id=\"clip0_11800_99864\">\n<rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(2 2)\"/>\n</clipPath>\n</defs>`;\n\n  return $svg;\n}\n","export function arrowRightSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-right`);\n  $svg.setAttribute(\"viewBox\", \"0 0 20 20\");\n\n  $svg.innerHTML = `<g clip-path=\"url(#clip0_11800_99870)\">\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.1377 4.86182L7.19489 5.80463L11.4375 10.0473L7.19489 14.2899L8.1377 15.2327L13.3231 10.0473L8.1377 4.86182Z\" class=\"arrow\" />\n</g>\n<defs>\n<clipPath id=\"clip0_11800_99870\">\n<rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(2 2)\"/>\n</clipPath>\n</defs>`;\n\n  return $svg;\n}\n","export function playSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-play`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","export function pauseSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-pause`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","const runningOnBrowser = typeof window !== \"undefined\";\n\nconst isBot =\n    (runningOnBrowser && !(\"onscroll\" in window)) ||\n    (typeof navigator !== \"undefined\" && /(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));\n\nconst supportsIntersectionObserver = runningOnBrowser && \"IntersectionObserver\" in window;\n\nconst supportsClassList = runningOnBrowser && \"classList\" in document.createElement(\"p\");\n\nconst isHiDpi = runningOnBrowser && window.devicePixelRatio > 1;\n\nconst defaultSettings = {\n    elements_selector: \".lazy\",\n    container: isBot || runningOnBrowser ? document : null,\n    threshold: 300,\n    thresholds: null,\n    data_src: \"src\",\n    data_srcset: \"srcset\",\n    data_sizes: \"sizes\",\n    data_bg: \"bg\",\n    data_bg_hidpi: \"bg-hidpi\",\n    data_bg_multi: \"bg-multi\",\n    data_bg_multi_hidpi: \"bg-multi-hidpi\",\n    data_bg_set: \"bg-set\",\n    data_poster: \"poster\",\n    class_applied: \"applied\",\n    class_loading: \"loading\",\n    class_loaded: \"loaded\",\n    class_error: \"error\",\n    class_entered: \"entered\",\n    class_exited: \"exited\",\n    unobserve_completed: true,\n    unobserve_entered: false,\n    cancel_on_exit: true,\n    callback_enter: null,\n    callback_exit: null,\n    callback_applied: null,\n    callback_loading: null,\n    callback_loaded: null,\n    callback_error: null,\n    callback_finish: null,\n    callback_cancel: null,\n    use_native: false,\n    restore_on_error: false,\n};\n\nconst getExtendedSettings = (customSettings) => {\n    return Object.assign({}, defaultSettings, customSettings);\n};\n\n/* Creates instance and notifies it through the window element */\nconst createInstance = function(classObj, options) {\n    let event;\n    const eventString = \"LazyLoad::Initialized\";\n    const instance = new classObj(options);\n    try {\n        // Works in modern browsers\n        event = new CustomEvent(eventString, { detail: { instance } });\n    } catch (err) {\n        // Works in Internet Explorer (all versions)\n        event = document.createEvent(\"CustomEvent\");\n        event.initCustomEvent(eventString, false, false, { instance });\n    }\n    window.dispatchEvent(event);\n};\n\n/* Auto initialization of one or more instances of lazyload, depending on the \n    options passed in (plain object or an array) */\nconst autoInitialize = (classObj, options) => {\n    if (!options) {\n        return;\n    }\n    if (!options.length) {\n        // Plain object\n        createInstance(classObj, options);\n    } else {\n        // Array of objects\n        for (let i = 0, optionsItem; (optionsItem = options[i]); i += 1) {\n            createInstance(classObj, optionsItem);\n        }\n    }\n};\n\nconst SRC = \"src\";\nconst SRCSET = \"srcset\";\nconst SIZES = \"sizes\";\nconst POSTER = \"poster\";\nconst ORIGINALS = \"llOriginalAttrs\";\nconst DATA = \"data\";\n\nconst statusLoading = \"loading\";\nconst statusLoaded = \"loaded\";\nconst statusApplied = \"applied\";\nconst statusEntered = \"entered\";\nconst statusError = \"error\";\nconst statusNative = \"native\";\n\nconst dataPrefix = \"data-\";\nconst statusDataName = \"ll-status\";\n\nconst getData = (element, attribute) => {\n    return element.getAttribute(dataPrefix + attribute);\n};\n\nconst setData = (element, attribute, value) => {\n    var attrName = dataPrefix + attribute;\n    if (value === null) {\n        element.removeAttribute(attrName);\n        return;\n    }\n    element.setAttribute(attrName, value);\n};\n\nconst getStatus = (element) => getData(element, statusDataName);\nconst setStatus = (element, status) => setData(element, statusDataName, status);\nconst resetStatus = (element) => setStatus(element, null);\n\nconst hasEmptyStatus = (element) => getStatus(element) === null;\nconst hasStatusLoading = (element) => getStatus(element) === statusLoading;\nconst hasStatusError = (element) => getStatus(element) === statusError;\nconst hasStatusNative = (element) => getStatus(element) === statusNative;\n\nconst statusesAfterLoading = [statusLoading, statusLoaded, statusApplied, statusError];\nconst hadStartedLoading = (element) => statusesAfterLoading.indexOf(getStatus(element)) >= 0;\n\nconst safeCallback = (callback, arg1, arg2, arg3) => {\n\tif (!callback) {\n\t\treturn;\n\t}\n\n\tif (arg3 !== undefined) {\n\t\tcallback(arg1, arg2, arg3);\n\t\treturn;\n\t}\n\tif (arg2 !== undefined) {\n\t\tcallback(arg1, arg2);\n\t\treturn;\n\t}\n\tcallback(arg1);\n};\n\nconst addClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.add(className);\n\t\treturn;\n\t}\n\telement.className += (element.className ? \" \" : \"\") + className;\n};\n\nconst removeClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.remove(className);\n\t\treturn;\n\t}\n\telement.className = element.className.\n\t\treplace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \").\n\t\treplace(/^\\s+/, \"\").\n\t\treplace(/\\s+$/, \"\");\n};\n\nconst addTempImage = (element) => {\n    element.llTempImage = document.createElement(\"IMG\");\n};\n\nconst deleteTempImage = (element) => {\n    delete element.llTempImage;\n};\n\nconst getTempImage = (element) => element.llTempImage;\n\nconst unobserve = (element, instance) => {\n    if (!instance) return;\n    const observer = instance._observer;\n    if (!observer) return;\n    observer.unobserve(element);\n};\n\nconst resetObserver = (observer) => {\n    observer.disconnect();\n};\n\nconst unobserveEntered = (element, settings, instance) => {\n    if (settings.unobserve_entered) unobserve(element, instance);\n};\n\nconst updateLoadingCount = (instance, delta) => {\n    if (!instance) return;\n    instance.loadingCount += delta;\n};\n\nconst decreaseToLoadCount = (instance) => {\n    if (!instance) return;\n    instance.toLoadCount -= 1;\n};\n\nconst setToLoadCount = (instance, value) => {\n    if (!instance) return;\n    instance.toLoadCount = value;\n};\n\nconst isSomethingLoading = (instance) => instance.loadingCount > 0;\n\nconst haveElementsToLoad = (instance) => instance.toLoadCount > 0;\n\nconst getSourceTags = (parentTag) => {\n  let sourceTags = [];\n  for (let i = 0, childTag; (childTag = parentTag.children[i]); i += 1) {\n      if (childTag.tagName === \"SOURCE\") {\n          sourceTags.push(childTag);\n      }\n  }\n  return sourceTags;\n};\n\nconst forEachPictureSource = (element, fn) => {\n  const parent = element.parentNode;\n  if (!parent || parent.tagName !== \"PICTURE\") {\n      return;\n  }\n  let sourceTags = getSourceTags(parent);\n  sourceTags.forEach(fn);\n};\n\nconst forEachVideoSource = (element, fn) => {\n  let sourceTags = getSourceTags(element);\n  sourceTags.forEach(fn);\n};\n\nconst attrsSrc = [SRC];\nconst attrsSrcPoster = [SRC, POSTER];\nconst attrsSrcSrcsetSizes = [SRC, SRCSET, SIZES];\nconst attrsData = [DATA];\n\nconst hasOriginalAttrs = (element) => !!element[ORIGINALS];\nconst getOriginalAttrs = (element) => element[ORIGINALS];\nconst deleteOriginalAttrs = (element) => delete element[ORIGINALS];\n\n// ## SAVE ##\n\nconst setOriginalsObject = (element, attributes) => {\n    if (hasOriginalAttrs(element)) {\n        return;\n    }\n    const originals = {};\n    attributes.forEach((attribute) => {\n        originals[attribute] = element.getAttribute(attribute);\n    });\n    element[ORIGINALS] = originals;\n};\n\nconst saveOriginalBackgroundStyle = (element) => {\n    if (hasOriginalAttrs(element)) {\n        return;\n    }\n    element[ORIGINALS] = { backgroundImage: element.style.backgroundImage };\n};\n\n// ## RESTORE ##\n\nconst setOrResetAttribute = (element, attrName, value) => {\n    if (!value) {\n        element.removeAttribute(attrName);\n        return;\n    }\n    element.setAttribute(attrName, value);\n};\n\nconst restoreOriginalAttrs = (element, attributes) => {\n    if (!hasOriginalAttrs(element)) {\n        return;\n    }\n    const originals = getOriginalAttrs(element);\n    attributes.forEach((attribute) => {\n        setOrResetAttribute(element, attribute, originals[attribute]);\n    });\n};\n\nconst restoreOriginalBgImage = (element) => {\n    if (!hasOriginalAttrs(element)) {\n        return;\n    }\n    const originals = getOriginalAttrs(element);\n    element.style.backgroundImage = originals.backgroundImage;\n};\n\nconst manageApplied = (element, settings, instance) => {\n    addClass(element, settings.class_applied);\n    setStatus(element, statusApplied);\n    // Instance is not provided when loading is called from static class\n    if (!instance) return;\n    if (settings.unobserve_completed) {\n        // Unobserve now because we can't do it on load\n        unobserve(element, settings);\n    }\n    safeCallback(settings.callback_applied, element, instance);\n};\n\nconst manageLoading = (element, settings, instance) => {\n    addClass(element, settings.class_loading);\n    setStatus(element, statusLoading);\n    // Instance is not provided when loading is called from static class\n    if (!instance) return;\n    updateLoadingCount(instance, +1);\n    safeCallback(settings.callback_loading, element, instance);\n};\n\nconst setAttributeIfValue = (element, attrName, value) => {\n    if (!value) {\n        return;\n    }\n    element.setAttribute(attrName, value);\n};\n\nconst setImageAttributes = (element, settings) => {\n    setAttributeIfValue(element, SIZES, getData(element, settings.data_sizes));\n    setAttributeIfValue(element, SRCSET, getData(element, settings.data_srcset));\n    setAttributeIfValue(element, SRC, getData(element, settings.data_src));\n};\n\nconst setSourcesImg = (imgEl, settings) => {\n    forEachPictureSource(imgEl, (sourceTag) => {\n        setOriginalsObject(sourceTag, attrsSrcSrcsetSizes);\n        setImageAttributes(sourceTag, settings);\n    });\n    setOriginalsObject(imgEl, attrsSrcSrcsetSizes);\n    setImageAttributes(imgEl, settings);\n};\n\nconst setSourcesIframe = (iframe, settings) => {\n    setOriginalsObject(iframe, attrsSrc);\n    setAttributeIfValue(iframe, SRC, getData(iframe, settings.data_src));\n};\n\nconst setSourcesVideo = (videoEl, settings) => {\n    forEachVideoSource(videoEl, (sourceEl) => {\n        setOriginalsObject(sourceEl, attrsSrc);\n        setAttributeIfValue(sourceEl, SRC, getData(sourceEl, settings.data_src));\n    });\n    setOriginalsObject(videoEl, attrsSrcPoster);\n\n    setAttributeIfValue(videoEl, POSTER, getData(videoEl, settings.data_poster));\n    setAttributeIfValue(videoEl, SRC, getData(videoEl, settings.data_src));\n    videoEl.load();\n};\n\nconst setSourcesObject = (object, settings) => {\n    setOriginalsObject(object, attrsData);\n    setAttributeIfValue(object, DATA, getData(object, settings.data_src));\n};\n\nconst setBackground = (element, settings, instance) => {\n    const bg1xValue = getData(element, settings.data_bg);\n    const bgHiDpiValue = getData(element, settings.data_bg_hidpi);\n    const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\n    if (!bgDataValue) return;\n    element.style.backgroundImage = `url(\"${bgDataValue}\")`;\n    getTempImage(element).setAttribute(SRC, bgDataValue);\n    manageLoading(element, settings, instance);\n};\n\n// NOTE: THE TEMP IMAGE TRICK CANNOT BE DONE WITH data-multi-bg\n// BECAUSE INSIDE ITS VALUES MUST BE WRAPPED WITH URL() AND ONE OF THEM\n// COULD BE A GRADIENT BACKGROUND IMAGE\nconst setMultiBackground = (element, settings, instance) => {\n    const bg1xValue = getData(element, settings.data_bg_multi);\n    const bgHiDpiValue = getData(element, settings.data_bg_multi_hidpi);\n    const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\n    if (!bgDataValue) {\n        return;\n    }\n    element.style.backgroundImage = bgDataValue;\n    manageApplied(element, settings, instance);\n};\n\nconst setImgsetBackground = (element, settings, instance) => {\n    const bgImgSetDataValue = getData(element, settings.data_bg_set);\n    if (!bgImgSetDataValue) {\n        return;\n    }\n    const imgSetValues = bgImgSetDataValue.split(\"|\");\n    let bgImageValues = imgSetValues.map((value) => `image-set(${value})`);\n    element.style.backgroundImage = bgImageValues.join();\n    // Temporary fix for Chromeium with the -webkit- prefix\n    if (element.style.backgroundImage === '') {\n        bgImageValues = imgSetValues.map((value) => `-webkit-image-set(${value})`);\n        element.style.backgroundImage = bgImageValues.join();\n    }\n    manageApplied(element, settings, instance);\n};\n\nconst setSourcesFunctions = {\n    IMG: setSourcesImg,\n    IFRAME: setSourcesIframe,\n    VIDEO: setSourcesVideo,\n    OBJECT: setSourcesObject\n};\n\nconst setSourcesNative = (element, settings) => {\n    const setSourcesFunction = setSourcesFunctions[element.tagName];\n    if (!setSourcesFunction) {\n        return;\n    }\n    setSourcesFunction(element, settings);\n};\n\nconst setSources = (element, settings, instance) => {\n    const setSourcesFunction = setSourcesFunctions[element.tagName];\n    if (!setSourcesFunction) {\n        return;\n    }\n    setSourcesFunction(element, settings);\n    manageLoading(element, settings, instance);\n};\n\nconst elementsWithLoadEvent = [\"IMG\", \"IFRAME\", \"VIDEO\", \"OBJECT\"];\nconst hasLoadEvent = (element) => elementsWithLoadEvent.indexOf(element.tagName) > -1;\n\nconst checkFinish = (settings, instance) => {\n    if (instance && !isSomethingLoading(instance) && !haveElementsToLoad(instance)) {\n        safeCallback(settings.callback_finish, instance);\n    }\n};\n\nconst addEventListener = (element, eventName, handler) => {\n    element.addEventListener(eventName, handler);\n    element.llEvLisnrs[eventName] = handler;\n};\n\nconst removeEventListener = (element, eventName, handler) => {\n    element.removeEventListener(eventName, handler);\n};\n\nconst hasEventListeners = (element) => {\n    return !!element.llEvLisnrs;\n};\n\nconst addEventListeners = (element, loadHandler, errorHandler) => {\n    if (!hasEventListeners(element)) element.llEvLisnrs = {};\n    const loadEventName = element.tagName === \"VIDEO\" ? \"loadeddata\" : \"load\";\n    addEventListener(element, loadEventName, loadHandler);\n    addEventListener(element, \"error\", errorHandler);\n};\n\nconst removeEventListeners = (element) => {\n    if (!hasEventListeners(element)) {\n        return;\n    }\n    const eventListeners = element.llEvLisnrs;\n    for (let eventName in eventListeners) {\n        const handler = eventListeners[eventName];\n        removeEventListener(element, eventName, handler);\n    }\n    delete element.llEvLisnrs;\n};\n\nconst doneHandler = (element, settings, instance) => {\n    deleteTempImage(element);\n    updateLoadingCount(instance, -1);\n    decreaseToLoadCount(instance);\n    removeClass(element, settings.class_loading);\n    if (settings.unobserve_completed) {\n        unobserve(element, instance);\n    }\n};\n\nconst loadHandler = (event, element, settings, instance) => {\n    const goingNative = hasStatusNative(element);\n    doneHandler(element, settings, instance);\n    addClass(element, settings.class_loaded);\n    setStatus(element, statusLoaded);\n    safeCallback(settings.callback_loaded, element, instance);\n    if (!goingNative) checkFinish(settings, instance);\n};\n\nconst errorHandler = (event, element, settings, instance) => {\n    const goingNative = hasStatusNative(element);\n    doneHandler(element, settings, instance);\n    addClass(element, settings.class_error);\n    setStatus(element, statusError);\n    safeCallback(settings.callback_error, element, instance);\n    if (settings.restore_on_error) restoreOriginalAttrs(element, attrsSrcSrcsetSizes);\n    if (!goingNative) checkFinish(settings, instance);\n};\n\nconst addOneShotEventListeners = (element, settings, instance) => {\n    const elementToListenTo = getTempImage(element) || element;\n    if (hasEventListeners(elementToListenTo)) {\n        // This happens when loading is retried twice\n        return;\n    }\n    const _loadHandler = (event) => {\n        loadHandler(event, element, settings, instance);\n        removeEventListeners(elementToListenTo);\n    };\n    const _errorHandler = (event) => {\n        errorHandler(event, element, settings, instance);\n        removeEventListeners(elementToListenTo);\n    };\n    addEventListeners(elementToListenTo, _loadHandler, _errorHandler);\n};\n\nconst loadBackground = (element, settings, instance) => {\n    addTempImage(element);\n    addOneShotEventListeners(element, settings, instance);\n    saveOriginalBackgroundStyle(element);\n    setBackground(element, settings, instance);\n    setMultiBackground(element, settings, instance);\n    setImgsetBackground(element, settings, instance);\n};\n\nconst loadRegular = (element, settings, instance) => {\n    addOneShotEventListeners(element, settings, instance);\n    setSources(element, settings, instance);\n};\n\nconst load = (element, settings, instance) => {\n    if (hasLoadEvent(element)) {\n        loadRegular(element, settings, instance);\n    } else {\n        loadBackground(element, settings, instance);\n    }\n};\n\nconst loadNative = (element, settings, instance) => {\n    element.setAttribute(\"loading\", \"lazy\");\n    addOneShotEventListeners(element, settings, instance);\n    setSourcesNative(element, settings);\n    setStatus(element, statusNative);\n};\n\nconst removeImageAttributes = (element) => {\n    element.removeAttribute(SRC);\n    element.removeAttribute(SRCSET);\n    element.removeAttribute(SIZES);\n};\n\nconst resetSourcesImg = (element) => {\n    forEachPictureSource(element, (sourceTag) => {\n        removeImageAttributes(sourceTag);\n    });\n    removeImageAttributes(element);\n};\n\nconst restoreImg = (imgEl) => {\n    forEachPictureSource(imgEl, (sourceEl) => {\n        restoreOriginalAttrs(sourceEl, attrsSrcSrcsetSizes);\n    });\n    restoreOriginalAttrs(imgEl, attrsSrcSrcsetSizes);\n};\n\nconst restoreVideo = (videoEl) => {\n    forEachVideoSource(videoEl, (sourceEl) => {\n        restoreOriginalAttrs(sourceEl, attrsSrc);\n    });\n    restoreOriginalAttrs(videoEl, attrsSrcPoster);\n    videoEl.load();\n};\n\nconst restoreIframe = (iframeEl) => {\n    restoreOriginalAttrs(iframeEl, attrsSrc);\n};\n\nconst restoreObject = (objectEl) => {\n    restoreOriginalAttrs(objectEl, attrsData);\n};\n\nconst restoreFunctions = {\n    IMG: restoreImg,\n    IFRAME: restoreIframe,\n    VIDEO: restoreVideo,\n    OBJECT: restoreObject\n};\n\nconst restoreAttributes = (element) => {\n    const restoreFunction = restoreFunctions[element.tagName];\n    if (!restoreFunction) {\n        restoreOriginalBgImage(element);\n        return;\n    }\n    restoreFunction(element);\n};\n\nconst resetClasses = (element, settings) => {\n    if (hasEmptyStatus(element) || hasStatusNative(element)) {\n        return;\n    }\n    removeClass(element, settings.class_entered);\n    removeClass(element, settings.class_exited);\n    removeClass(element, settings.class_applied);\n    removeClass(element, settings.class_loading);\n    removeClass(element, settings.class_loaded);\n    removeClass(element, settings.class_error);\n};\n\nconst restore = (element, settings) => {\n    restoreAttributes(element);\n    resetClasses(element, settings);\n    resetStatus(element);\n    deleteOriginalAttrs(element);\n};\n\nconst cancelLoading = (element, entry, settings, instance) => {\n    if (!settings.cancel_on_exit) return;\n    if (!hasStatusLoading(element)) return;\n    if (element.tagName !== \"IMG\") return; //Works only on images\n    removeEventListeners(element);\n    resetSourcesImg(element);\n    restoreImg(element);\n    removeClass(element, settings.class_loading);\n    updateLoadingCount(instance, -1);\n    resetStatus(element);\n    safeCallback(settings.callback_cancel, element, entry, instance);\n};\n\nconst onEnter = (element, entry, settings, instance) => {\n    const dontLoad = hadStartedLoading(element); /* Save status \n        before setting it, to prevent loading it again. Fixes #526. */\n    setStatus(element, statusEntered);\n    addClass(element, settings.class_entered);\n    removeClass(element, settings.class_exited);\n    unobserveEntered(element, settings, instance);\n    safeCallback(settings.callback_enter, element, entry, instance);\n    if (dontLoad) return;\n    load(element, settings, instance);\n};\n\nconst onExit = (element, entry, settings, instance) => {\n    if (hasEmptyStatus(element)) return; //Ignore the first pass, at landing\n    addClass(element, settings.class_exited);\n    cancelLoading(element, entry, settings, instance);\n    safeCallback(settings.callback_exit, element, entry, instance);\n};\n\nconst tagsWithNativeLazy = [\"IMG\", \"IFRAME\", \"VIDEO\"];\n\nconst shouldUseNative = (settings) =>\n    settings.use_native && \"loading\" in HTMLImageElement.prototype;\n\nconst loadAllNative = (elements, settings, instance) => {\n    elements.forEach((element) => {\n        if (tagsWithNativeLazy.indexOf(element.tagName) === -1) {\n            return;\n        }\n        loadNative(element, settings, instance);\n    });\n    setToLoadCount(instance, 0);\n};\n\nconst isIntersecting = (entry) => entry.isIntersecting || entry.intersectionRatio > 0;\n\nconst getObserverSettings = (settings) => ({\n    root: settings.container === document ? null : settings.container,\n    rootMargin: settings.thresholds || settings.threshold + \"px\"\n});\n\nconst intersectionHandler = (entries, settings, instance) => {\n    entries.forEach((entry) =>\n        isIntersecting(entry)\n            ? onEnter(entry.target, entry, settings, instance)\n            : onExit(entry.target, entry, settings, instance)\n    );\n};\n\nconst observeElements = (observer, elements) => {\n    elements.forEach((element) => {\n        observer.observe(element);\n    });\n};\n\nconst updateObserver = (observer, elementsToObserve) => {\n    resetObserver(observer);\n    observeElements(observer, elementsToObserve);\n};\n\nconst setObserver = (settings, instance) => {\n    if (!supportsIntersectionObserver || shouldUseNative(settings)) {\n        return;\n    }\n    instance._observer = new IntersectionObserver((entries) => {\n        intersectionHandler(entries, settings, instance);\n    }, getObserverSettings(settings));\n};\n\nconst toArray = (nodeSet) => Array.prototype.slice.call(nodeSet);\n\nconst queryElements = (settings) =>\n    settings.container.querySelectorAll(settings.elements_selector);\n\nconst excludeManagedElements = (elements) => toArray(elements).filter(hasEmptyStatus);\n\nconst hasError = (element) => hasStatusError(element);\nconst filterErrorElements = (elements) => toArray(elements).filter(hasError);\n\nconst getElementsToLoad = (elements, settings) =>\n    excludeManagedElements(elements || queryElements(settings));\n\nconst retryLazyLoad = (settings, instance) => {\n    const errorElements = filterErrorElements(queryElements(settings));\n    errorElements.forEach((element) => {\n        removeClass(element, settings.class_error);\n        resetStatus(element);\n    });\n    instance.update();\n};\n\nconst setOnlineCheck = (settings, instance) => {\n    if (!runningOnBrowser) {\n        return;\n    }\n    instance._onlineHandler = () => {\n        retryLazyLoad(settings, instance);\n    };\n    window.addEventListener(\"online\", instance._onlineHandler);\n};\n\nconst resetOnlineCheck = (instance) => {\n    if (!runningOnBrowser) {\n        return;\n    }\n    window.removeEventListener(\"online\", instance._onlineHandler);\n};\n\nconst LazyLoad = function (customSettings, elements) {\n    const settings = getExtendedSettings(customSettings);\n    this._settings = settings;\n    this.loadingCount = 0;\n    setObserver(settings, this);\n    setOnlineCheck(settings, this);\n    this.update(elements);\n};\n\nLazyLoad.prototype = {\n    update: function (givenNodeset) {\n        const settings = this._settings;\n        const elementsToLoad = getElementsToLoad(givenNodeset, settings);\n        setToLoadCount(this, elementsToLoad.length);\n\n        if (isBot || !supportsIntersectionObserver) {\n            this.loadAll(elementsToLoad);\n            return;\n        }\n        if (shouldUseNative(settings)) {\n            loadAllNative(elementsToLoad, settings, this);\n            return;\n        }\n\n        updateObserver(this._observer, elementsToLoad);\n    },\n\n    destroy: function () {\n        // Observer\n        if (this._observer) {\n            this._observer.disconnect();\n        }\n        // Clean handlers\n        resetOnlineCheck(this);\n        // Clean custom attributes on elements\n        queryElements(this._settings).forEach((element) => {\n            deleteOriginalAttrs(element);\n        });\n        // Delete all internal props\n        delete this._observer;\n        delete this._settings;\n        delete this._onlineHandler;\n        delete this.loadingCount;\n        delete this.toLoadCount;\n    },\n\n    loadAll: function (elements) {\n        const settings = this._settings;\n        const elementsToLoad = getElementsToLoad(elements, settings);\n        elementsToLoad.forEach((element) => {\n            unobserve(element, this);\n            load(element, settings, this);\n        });\n    },\n\n    restoreAll: function() {\n        const settings = this._settings;\n        queryElements(settings).forEach((element) => {\n            restore(element, settings);\n        });\n    }\n};\n\nLazyLoad.load = (element, customSettings) => {\n    const settings = getExtendedSettings(customSettings);\n    load(element, settings);\n};\n\nLazyLoad.resetStatus = (element) => {\n    resetStatus(element);\n};\n\n// Automatic instances creation if required (useful for async script loading)\nif (runningOnBrowser) {\n    autoInitialize(LazyLoad, window.lazyLoadOptions);\n}\n\nexport { LazyLoad as default };\n","import { arrowLeftSVG } from \"./icons/arrow-left\";\nimport { arrowRightSVG } from \"./icons/arrow-right\";\nimport { playSVG } from \"./icons/play\";\nimport { pauseSVG } from \"./icons/pause\";\n\nimport type { AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport LazyLoad from \"vanilla-lazyload\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport type {\n  AppOptions,\n  NetlessAppDynamicDocsViewerAttributes,\n  NetlessAppStaticDocsViewerAttributes,\n} from \"..\";\n\nexport interface DocsViewerPage {\n  src: string;\n  height: number;\n  width: number;\n  thumbnail?: string;\n}\n\ntype contextType = AppContext<\n  NetlessAppStaticDocsViewerAttributes | NetlessAppDynamicDocsViewerAttributes,\n  AppOptions\n>;\nexport interface DocsViewerConfig {\n  readonly: boolean;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n  onNewPageIndex: (index: number) => void;\n  onPlay?: () => void;\n  context: contextType;\n}\n\nexport class DocsViewer {\n  public constructor({ context, readonly, box, pages, onNewPageIndex, onPlay }: DocsViewerConfig) {\n    if (pages.length <= 0) {\n      throw new Error(\"[DocsViewer] Empty pages.\");\n    }\n\n    this.context = context;\n    this.readonly = readonly;\n    this.box = box;\n    this.pages = pages;\n    this.onNewPageIndex = onNewPageIndex;\n    this.onPlay = onPlay;\n    this.onPageIndexChanged = () => void 0;\n\n    this.render();\n  }\n\n  protected context: contextType;\n  protected readonly: boolean;\n  protected pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected onNewPageIndex: (index: number) => void;\n  protected onPlay?: () => void;\n\n  public $content!: HTMLElement;\n  public $preview!: HTMLElement;\n  public $previewMask!: HTMLElement;\n  public $footer!: HTMLElement;\n  public $pageNumberInput!: HTMLElement;\n  private $btnPageNext!: HTMLElement;\n  private $btnPageBack!: HTMLElement;\n\n  public pageIndex = 0;\n  public onPageIndexChanged: (index: number) => void;\n\n  public mount(): void {\n    this.box.mountContent(this.$content);\n    this.box.mountFooter(this.$footer);\n\n    // this.$footer.classList.toggle(this.wrapClassName(\"hide\"), this.box.maximized);\n    this.box.events.on(\"maximized\", max => {\n      this.$footer.classList.toggle(this.wrapClassName(\"hide\"), max);\n      // this.togglePreview(max);\n    });\n    this.$footer.classList.toggle(this.wrapClassName(\"hide\"), this.box.maximized);\n  }\n\n  public unmount(): void {\n    this.$content.remove();\n    this.$footer.remove();\n  }\n\n  public setReadonly(readonly: boolean): void {\n    if (this.readonly !== readonly) {\n      this.readonly = readonly;\n\n      this.$content.classList.toggle(this.wrapClassName(\"readonly\"), readonly);\n\n      this.$footer.classList.toggle(this.wrapClassName(\"readonly\"), readonly);\n\n      // this.$pageNumberInput.disabled = readonly;\n    }\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.unmount();\n  }\n\n  public setPageIndex(pageIndex: number): void {\n    if (!Number.isNaN(pageIndex)) {\n      this.scrollPreview(pageIndex);\n      this.pageIndex = pageIndex;\n      this.$pageNumberInput.textContent = String(pageIndex + 1);\n      this.onPageIndexChanged(pageIndex);\n      this.$btnPageBack.classList.toggle(this.wrapClassName(\"footer-btn-disable\"), pageIndex == 0);\n      this.$btnPageNext.classList.toggle(\n        this.wrapClassName(\"footer-btn-disable\"),\n        pageIndex == this.pages.length - 1\n      );\n    }\n  }\n\n  private scrollPreview(pageIndex: number) {\n    const previews = this.$preview?.querySelectorAll<HTMLElement>(\n      \".\" + this.wrapClassName(\"preview-page\")\n    );\n\n    previews?.forEach((node, i) => {\n      node\n        .querySelector(\"img\")\n        ?.classList.toggle(this.wrapClassName(\"active\"), Number(pageIndex) == i);\n    });\n\n    if (!previews) return;\n\n    const imgNode = Array.prototype.slice\n      .call(previews)\n      .find(node => node.querySelector(\"img\").className.includes(this.wrapClassName(\"active\")));\n    if (!imgNode) return;\n    const parentRect = this.$preview.getBoundingClientRect();\n    const elementRect = imgNode?.getBoundingClientRect();\n    const isInView = elementRect.top >= parentRect.top && elementRect.bottom <= parentRect.bottom;\n\n    if (!isInView) {\n      this.$preview.scrollTo({\n        top: imgNode.offsetTop - 16,\n        behavior: this.isShowPreview ? \"smooth\" : \"auto\",\n      });\n    }\n  }\n\n  public setSmallBox(isSmallBox: boolean): void {\n    if (this.isSmallBox !== isSmallBox) {\n      this.isSmallBox = isSmallBox;\n      this.$footer.classList.toggle(this.wrapClassName(\"float-footer\"), isSmallBox);\n    }\n  }\n\n  public render(): HTMLElement {\n    this.renderContent();\n    this.renderFooter();\n    return this.$content;\n  }\n\n  protected renderContent(): HTMLElement {\n    if (!this.$content) {\n      const $content = document.createElement(\"div\");\n      $content.className = this.wrapClassName(\"content\");\n      this.$content = $content;\n      if (this.readonly) {\n        $content.classList.add(this.wrapClassName(\"readonly\"));\n      }\n\n      // $content.appendChild(this.renderPreviewMask());\n      // $content.appendChild(this.renderPreview());\n    }\n    return this.$content;\n  }\n\n  protected renderPreview(): HTMLElement {\n    if (!this.$preview) {\n      const $preview = document.createElement(\"div\");\n      $preview.className = this.wrapClassName(\"preview\") + \" tele-fancy-scrollbar\";\n      this.$preview = $preview;\n\n      const title = document.createElement(\"div\");\n      title.className = this.wrapClassName(\"preview-head\");\n      const h3 = document.createElement(\"h3\");\n      h3.textContent = this.box.title;\n      title.appendChild(h3);\n      this.$preview.appendChild(title);\n\n      const pageClassName = this.wrapClassName(\"preview-page\");\n      const pageNameClassName = this.wrapClassName(\"preview-page-name\");\n      this.pages.forEach((page, i) => {\n        const previewSRC = page.thumbnail ?? (page.src.startsWith(\"ppt\") ? void 0 : page.src);\n        if (!previewSRC) {\n          return;\n        }\n\n        const pageIndex = String(i);\n\n        const $page = document.createElement(\"a\");\n        $page.className = pageClassName + \" \" + this.wrapClassName(`preview-page-${i}`);\n        $page.setAttribute(\"href\", \"#\");\n        $page.dataset.pageIndex = pageIndex;\n\n        const $name = document.createElement(\"span\");\n        $name.className = pageNameClassName;\n        $name.textContent = String(i + 1);\n        $name.dataset.pageIndex = pageIndex;\n\n        const $img = document.createElement(\"img\");\n        $img.width = page.width;\n        $img.height = page.height;\n        $img.dataset.src = previewSRC;\n        $img.dataset.pageIndex = pageIndex;\n\n        $page.appendChild($name);\n        $page.appendChild($img);\n        $preview.appendChild($page);\n        $img.classList.toggle(this.wrapClassName(\"active\"), this.pageIndex == i);\n      });\n\n      this.sideEffect.addEventListener($preview, \"click\", ev => {\n        if (this.readonly) {\n          return;\n        }\n        const pageIndex = (ev.target as HTMLElement).dataset?.pageIndex;\n        if (pageIndex) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          ev.stopImmediatePropagation();\n          this.onNewPageIndex(Number(pageIndex));\n        }\n      });\n    }\n\n    return this.$preview;\n  }\n\n  protected renderPreviewMask(): HTMLElement {\n    if (!this.$previewMask) {\n      this.$previewMask = document.createElement(\"div\");\n      this.$previewMask.className = this.wrapClassName(\"preview-mask\");\n      this.sideEffect.addEventListener(this.$previewMask, \"click\", ev => {\n        if (this.readonly) {\n          return;\n        }\n        if (ev.target === this.$previewMask) {\n          this.togglePreview(false);\n        }\n      });\n    }\n    return this.$previewMask;\n  }\n\n  protected renderFooter(): HTMLElement {\n    if (!this.$footer) {\n      const $footer = document.createElement(\"div\");\n      $footer.className = this.wrapClassName(\"footer\");\n      this.$footer = $footer;\n\n      if (this.readonly) {\n        $footer.classList.add(this.wrapClassName(\"readonly\"));\n      }\n\n      if (this.isSmallBox) {\n        $footer.classList.add(this.wrapClassName(\"float-footer\"));\n      }\n\n      if (this.pages.some(page => page.thumbnail || !page.src.startsWith(\"ppt\"))) {\n        // const $btnSidebar = this.renderFooterBtn(\"btn-sidebar\", sidebarSVG(this.namespace));\n        // this.sideEffect.addEventListener($btnSidebar, \"click\", () => {\n        //   if (this.readonly) {\n        //     return;\n        //   }\n        //   this.togglePreview();\n        // });\n        // this.$footer.appendChild($btnSidebar);\n      }\n\n      const $pageJumps = document.createElement(\"div\");\n      $pageJumps.className = this.wrapClassName(\"page-jumps\");\n\n      const $btnPageBack = this.renderFooterBtn(\"btn-page-back\", arrowLeftSVG(this.namespace));\n      this.sideEffect.addEventListener($btnPageBack, \"click\", () => {\n        if (this.readonly) {\n          return;\n        }\n        this.onNewPageIndex(this.pageIndex - 1);\n      });\n      $pageJumps.appendChild($btnPageBack);\n      this.$btnPageBack = $btnPageBack;\n\n      if (this.onPlay) {\n        const $btnPlay = this.renderFooterBtn(\n          \"btn-page-play\",\n          playSVG(this.namespace),\n          pauseSVG(this.namespace)\n        );\n        const returnPlay = (): void => {\n          this.sideEffect.setTimeout(\n            () => {\n              $btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), false);\n            },\n            500,\n            \"returnPlay\"\n          );\n        };\n        this.sideEffect.addEventListener($btnPlay, \"click\", () => {\n          if (this.readonly) {\n            return;\n          }\n          $btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), true);\n          this.onPlay?.();\n          returnPlay();\n        });\n\n        this.$footer.appendChild($btnPlay);\n      }\n      const $pageNumber = document.createElement(\"div\");\n      $pageNumber.className = this.wrapClassName(\"page-number\");\n\n      const $pageNumberInput = document.createElement(\"span\");\n      $pageNumberInput.className = this.wrapClassName(\"page-number-input\");\n      $pageNumberInput.textContent = String(this.pageIndex + 1);\n      // if (this.readonly) {\n      //   $pageNumberInput.disabled = true;\n      // }\n      this.$pageNumberInput = $pageNumberInput;\n      // this.sideEffect.addEventListener($pageNumberInput, \"focus\", () => {\n      //   $pageNumberInput.select();\n      // });\n      // this.sideEffect.addEventListener($pageNumberInput, \"change\", () => {\n      //   if (this.readonly) {\n      //     return;\n      //   }\n      //   if ($pageNumberInput.value) {\n      //     this.onNewPageIndex(Number($pageNumberInput.value) - 1);\n      //   }\n      // });\n\n      const $totalPage = document.createElement(\"span\");\n      $totalPage.textContent = \" / \" + this.pages.length;\n\n      $pageNumber.appendChild($pageNumberInput);\n      $pageNumber.appendChild($totalPage);\n\n      $pageJumps.appendChild($pageNumber);\n\n      const $btnPageNext = this.renderFooterBtn(\"btn-page-next\", arrowRightSVG(this.namespace));\n      this.sideEffect.addEventListener($btnPageNext, \"click\", () => {\n        if (this.readonly) {\n          return;\n        }\n        this.onNewPageIndex(this.pageIndex + 1);\n      });\n      $pageJumps.appendChild($btnPageNext);\n\n      this.$btnPageNext = $btnPageNext;\n      this.$footer.appendChild($pageJumps);\n    }\n    return this.$footer;\n  }\n\n  protected renderFooterBtn(\n    className: string,\n    $icon: SVGElement,\n    $iconActive?: SVGElement\n  ): HTMLButtonElement {\n    const $btn = document.createElement(\"button\");\n    $btn.className = this.wrapClassName(\"footer-btn\") + \" \" + this.wrapClassName(className);\n\n    $btn.appendChild($icon);\n\n    if ($iconActive) {\n      $btn.appendChild($iconActive);\n    }\n\n    return $btn;\n  }\n\n  public togglePreview(isShowPreview?: boolean): void {\n    this.isShowPreview = isShowPreview ?? !this.isShowPreview;\n    console.log(this.context?.extendWrapper);\n    this.$content.classList.toggle(this.wrapClassName(\"preview-active\"), this.isShowPreview);\n    if (this.isShowPreview) {\n      if (this.context?.extendWrapper) {\n        this.context?.extendWrapper?.appendChild(this.renderPreviewMask());\n        this.context?.extendWrapper?.appendChild(this.renderPreview());\n        this.context.extendWrapper.style.display = \"block\";\n      }\n      setTimeout(() => {\n        const $previewPage = this.$preview.querySelector<HTMLElement>(\n          \".\" + this.wrapClassName(`preview-page-${this.pageIndex}`)\n        );\n\n        if ($previewPage) {\n          this.sideEffect.add(() => {\n            const previewLazyLoad = new LazyLoad({\n              container: this.$preview,\n              elements_selector: `.${this.wrapClassName(\"preview-page>img\")}`,\n            });\n            return () => previewLazyLoad.destroy();\n          }, \"preview-lazyload\");\n\n          this.$preview.scrollTo({\n            top: $previewPage.offsetTop - 16,\n          });\n        }\n\n        if ($previewPage) {\n          this.$preview.scrollTo({\n            top: $previewPage.offsetTop - 16,\n          });\n        }\n      });\n    } else {\n      if (this.context?.extendWrapper) {\n        this.context.extendWrapper.style.display = \"none\";\n        this.context.extendWrapper.innerHTML = \"\";\n      }\n    }\n  }\n\n  protected wrapClassName(className: string): string {\n    return `${this.namespace}-${className}`;\n  }\n\n  protected namespace = \"netless-app-docs-viewer\";\n\n  protected isShowPreview = false;\n\n  protected isSmallBox = false;\n\n  protected sideEffect = new SideEffectManager();\n}\n","export function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function flattenEvent(ev: MouseEvent | TouchEvent): MouseEvent | Touch {\n  return (ev as TouchEvent).touches ? (ev as TouchEvent).touches[0] : (ev as MouseEvent);\n}\n\nexport function preventEvent(ev: Event): void {\n  ev.stopPropagation();\n  if (ev.cancelable) {\n    ev.preventDefault();\n  }\n}\n\nexport function isEditable(el: EventTarget | null) {\n  if (!el) return false;\n  const tagName = (el as HTMLElement).tagName;\n  return tagName === \"INPUT\" || tagName === \"TEXTAREA\" || tagName === \"SELECT\";\n}\n","export interface StepperConfig {\n  start?: number;\n  stiffness?: number;\n  damping?: number;\n  onStep: (value: number) => void;\n}\n\nexport class Stepper {\n  public stiffness: number;\n  public damping: number;\n\n  public current: number;\n  public target: number;\n  public velocity = 0;\n  public onStep: (value: number, stepper: Stepper) => void;\n  public paused = true;\n\n  protected _animationFrameID: number | null = null;\n  protected _loopTimestamp = 0;\n\n  public constructor(config: StepperConfig) {\n    this.current = config.start ?? 0;\n    this.target = this.current;\n    this.stiffness = config.stiffness ?? 170;\n    this.damping = config.damping ?? 26;\n    this.onStep = config.onStep;\n  }\n\n  public stepTo(target: number, start?: number) {\n    if (this.paused && start != null) {\n      this.current = start;\n    }\n    this.paused = false;\n    this.target = target;\n    this.onStep(this.current, this);\n    this._loopTimestamp = Date.now();\n    window.requestAnimationFrame(this.looper);\n  }\n\n  public pause() {\n    this.paused = true;\n  }\n\n  public destroy() {\n    this.pause();\n  }\n\n  protected looper = (timestamp: number) => {\n    if (this.paused) {\n      return;\n    }\n\n    let frames = Math.floor(((timestamp - this._loopTimestamp) / 1000) * 60) + 1;\n    this._loopTimestamp = timestamp;\n    while (frames-- > 0) {\n      this.stepper();\n    }\n\n    this.onStep(this.current, this);\n\n    if (!this.paused && this.current !== this.target) {\n      window.requestAnimationFrame(this.looper);\n    }\n  };\n\n  // based on https://github.com/chenglou/react-motion/blob/master/src/stepper.js\n  protected stepper() {\n    const fSpring = -this.stiffness * (this.current - this.target);\n    const fDamper = -this.damping * this.velocity;\n    const newVelocity = this.velocity + (fSpring + fDamper) / 60;\n    const newCurrent = this.current + newVelocity / 60;\n\n    if (Math.abs(newVelocity - 0) < 0.01 && Math.abs(newCurrent - this.target) < 0.01) {\n      this.current = this.target;\n      this.velocity = 0;\n    } else {\n      this.current = newCurrent;\n      this.velocity = newVelocity;\n    }\n  }\n}\n","import type { DocsViewerPage } from \"../DocsViewer\";\n\nexport class PageEl {\n  index: number;\n  page: DocsViewerPage;\n  scale = 1;\n\n  lastVisit = Date.now();\n  $page: HTMLDivElement;\n  pageOffsetY = 0;\n  pageOffsetX = 0;\n  visible = true;\n\n  constructor(index: number, page: DocsViewerPage, scale: number, pagesIntrinsicWidth: number) {\n    this.index = index;\n    this.page = page;\n    this.scale = scale;\n    this.pageOffsetX = (pagesIntrinsicWidth - page.width) / 2;\n\n    const $page = document.createElement(\"div\");\n    $page.className = \"page-renderer-page\";\n    $page.dataset.index = `${index}`;\n    $page.style.width = `${page.width * scale}px`;\n    $page.style.height = `${page.height * scale}px`;\n    if (page.thumbnail) {\n      $page.style.backgroundImage = `url(\"${page.thumbnail}\")`;\n    }\n\n    const $img = document.createElement(\"img\");\n    $img.className = \"page-renderer-page-img\";\n    $img.width = page.width;\n    $img.height = page.height;\n    $img.src = page.src;\n\n    $page.appendChild($img);\n\n    this.$page = $page;\n  }\n\n  translateY(pageOffsetY: number): void {\n    if (Math.abs(pageOffsetY - this.pageOffsetY) >= 0.001) {\n      this.pageOffsetY = pageOffsetY;\n      this.$page.style.transform = `translate(${this.pageOffsetX * this.scale}px, ${\n        this.pageOffsetY * this.scale\n      }px)`;\n    }\n  }\n\n  setScale(scale: number): void {\n    if (Math.abs(scale - this.scale) >= 0.001) {\n      this.scale = scale;\n      this.$page.style.width = `${this.page.width * this.scale}px`;\n      this.$page.style.height = `${this.page.height * this.scale}px`;\n      this.$page.style.transform = `translate(${this.pageOffsetX * this.scale}px, ${\n        this.pageOffsetY * this.scale\n      }px)`;\n    }\n  }\n\n  setVisible(visible: boolean): void {\n    if (visible !== this.visible) {\n      this.visible = visible;\n      this.$page.style.opacity = visible ? \"1\" : \"0\";\n    }\n  }\n}\n","import type { DocsViewerPage } from \"../DocsViewer\";\nimport { PageEl } from \"./PageEl\";\n\nconst schedule: (handler: () => void) => number =\n  window.requestIdleCallback || ((handler: () => void) => window.setTimeout(handler, 5000));\n\nconst cancelSchedule = window.cancelIdleCallback || window.clearTimeout;\n\nexport class PageElManager {\n  els = new Map<number, PageEl>();\n\n  private maxElCount = 200;\n  private gcTimer: number | null = null;\n\n  constructor(\n    private pages: ReadonlyArray<DocsViewerPage>,\n    private pagesIntrinsicWidth: number,\n    private scale: number\n  ) {}\n\n  getEl(index: number): PageEl {\n    let el = this.els.get(index);\n    if (!el) {\n      el = new PageEl(index, this.pages[index], this.scale, this.pagesIntrinsicWidth);\n      this.els.set(index, el);\n    }\n    el.lastVisit = Date.now();\n\n    if (this.els.size > this.maxElCount && this.gcTimer === null) {\n      this.gcTimer = schedule(this.gc);\n    }\n\n    return el;\n  }\n\n  setScale(scale: number): void {\n    if (scale !== this.scale) {\n      this.scale = scale;\n      this.els.forEach(pageEl => pageEl.setScale(scale));\n    }\n  }\n\n  destroy() {\n    this.els.clear();\n    if (this.gcTimer !== null) {\n      cancelSchedule(this.gcTimer);\n      this.gcTimer = null;\n    }\n  }\n\n  private gc = () => {\n    this.gcTimer = null;\n\n    if (this.els.size > this.maxElCount) {\n      const sortedEls = [...this.els.values()].sort((x, y) => y.lastVisit - x.lastVisit);\n      for (let i = Math.floor(this.maxElCount / 4); i < sortedEls.length; i++) {\n        this.els.delete(sortedEls[i].index);\n      }\n    }\n  };\n}\n","import type { DocsViewerPage } from \"../DocsViewer\";\nimport { PageElManager } from \"./PageElManager\";\nimport { clamp } from \"../utils/helpers\";\n\nexport interface PageRendererConfig {\n  pagesScrollTop?: number;\n  containerWidth: number;\n  containerHeight: number;\n  pages: ReadonlyArray<DocsViewerPage>;\n  onPageIndexChanged?: (index: number) => void;\n}\n\n/**\n * High-performance renderer for large number of page images\n */\nexport class PageRenderer {\n  readonly $pages: HTMLDivElement;\n\n  readonly pages: ReadonlyArray<DocsViewerPage>;\n  readonly pagesIntrinsicYs: ReadonlyArray<number>;\n  readonly pagesIntrinsicWidth: number;\n  readonly pagesIntrinsicHeight: number;\n  readonly pagesMinHeight: number;\n\n  readonly pageElManager: PageElManager;\n\n  containerWidth: number;\n  containerHeight: number;\n\n  threshold: number;\n  scale: number;\n  pagesScrollTop: number;\n  pageScrollIndex: number;\n  onPageIndexChanged?: (index: number) => void;\n\n  constructor(config: PageRendererConfig) {\n    this.pagesScrollTop = config.pagesScrollTop || 0;\n    this.containerWidth = config.containerWidth || 1;\n    this.containerHeight = config.containerHeight || 1;\n    this.pages = config.pages.map(page => {\n      if (page.thumbnail) {\n        return page;\n      }\n      try {\n        const url = new URL(page.src);\n        url.searchParams.set(\"x-oss-process\", \"image/resize,l_50\");\n        return { ...page, thumbnail: url.toString() };\n      } catch (e) {\n        console.error(e);\n        return page;\n      }\n    });\n\n    const pagesIntrinsicYs = Array(this.pages.length);\n    let pagesMinHeight = Infinity;\n    let pagesIntrinsicWidth = 0;\n    this.pagesIntrinsicHeight = this.pages.reduce((pageY, page, i) => {\n      pagesIntrinsicYs[i] = pageY;\n      if (page.width > pagesIntrinsicWidth) {\n        pagesIntrinsicWidth = page.width;\n      }\n      if (page.height <= pagesMinHeight) {\n        pagesMinHeight = page.height;\n      }\n      return pageY + page.height;\n    }, 0);\n    this.pagesIntrinsicWidth = pagesIntrinsicWidth;\n    this.pagesMinHeight = pagesMinHeight;\n    this.pagesIntrinsicYs = pagesIntrinsicYs;\n\n    this.scale = this._calcScale();\n    this.threshold = this._calcThreshold();\n\n    this.onPageIndexChanged = config.onPageIndexChanged;\n    this.pageScrollIndex = 0;\n    if (this.pagesScrollTop !== 0) {\n      this.pageScrollIndex = this.findScrollPageIndex();\n      if (this.onPageIndexChanged && this.pageScrollIndex > 0) {\n        this.onPageIndexChanged(this.pageScrollIndex);\n      }\n    }\n\n    this.pageElManager = new PageElManager(this.pages, pagesIntrinsicWidth, this.scale);\n\n    this.$pages = this.renderPages();\n  }\n\n  setContainerSize(width: number, height: number): void {\n    if (width > 0 && height > 0) {\n      if (width !== this.containerWidth || height !== this.containerHeight) {\n        this.containerWidth = width;\n        this.containerHeight = height;\n\n        this.$pages.style.width = `${this.containerWidth}px`;\n        this.$pages.style.height = `${this.containerHeight}px`;\n\n        this.scale = this._calcScale();\n        this.threshold = this._calcThreshold();\n\n        this.pageElManager.setScale(this.scale);\n\n        if (this.$pages.parentElement) {\n          this.pagesScrollTo(this.pagesScrollTop, true);\n        }\n      }\n    }\n  }\n\n  renderPages(): HTMLDivElement {\n    const $pages = document.createElement(\"div\");\n    $pages.className = \"page-renderer-pages-container\";\n    $pages.style.width = `${this.containerWidth}px`;\n    $pages.style.height = `${this.containerHeight}px`;\n    return $pages;\n  }\n\n  pagesScrollTo(pagesScrollTop: number, force?: boolean): void {\n    pagesScrollTop = clamp(\n      pagesScrollTop,\n      0,\n      this.pagesIntrinsicHeight - this.containerHeight / this.scale\n    );\n\n    if (force || Math.abs(pagesScrollTop - this.pagesScrollTop) >= 0.001) {\n      this._turnOnHWA();\n\n      this.pagesScrollTop = pagesScrollTop;\n\n      const pageScrollIndex = this.findScrollPageIndex();\n      const startIndex = Math.max(pageScrollIndex - this.threshold, 0);\n      const endIndex = Math.min(pageScrollIndex + this.threshold, this.pages.length - 1);\n\n      for (let i = 0; i < this.$pages.children.length; i++) {\n        const $page = this.$pages.children[i] as HTMLDivElement;\n        const index = Number($page.dataset.index);\n        if (!(index >= startIndex && index <= endIndex)) {\n          $page.remove();\n          i--;\n        }\n      }\n\n      for (let i = startIndex; i <= endIndex; i++) {\n        const pageEl = this.pageElManager.getEl(i);\n        if (pageEl.$page.parentElement !== this.$pages) {\n          this.$pages.appendChild(pageEl.$page);\n        }\n        pageEl.translateY(this.pagesIntrinsicYs[i] - this.pagesScrollTop);\n      }\n\n      if (pageScrollIndex !== this.pageScrollIndex) {\n        this.pageScrollIndex = pageScrollIndex;\n        if (this.onPageIndexChanged) {\n          this.onPageIndexChanged(pageScrollIndex);\n        }\n      }\n    }\n  }\n\n  findScrollPageIndex() {\n    for (let i = 0; i < this.pagesIntrinsicYs.length; i++) {\n      if (this.pagesIntrinsicYs[i] + this.pages[i].height - this.pagesScrollTop >= 0.001) {\n        return i;\n      }\n    }\n    return this.pagesIntrinsicYs.length - 1;\n  }\n\n  mount($parent: HTMLElement): void {\n    $parent.appendChild(this.$pages);\n    this.pagesScrollTo(this.pagesScrollTop, true);\n  }\n\n  unmount(): void {\n    this.$pages.remove();\n  }\n\n  destroy() {\n    this.unmount();\n    this.onPageIndexChanged = void 0;\n    this.pageElManager.destroy();\n    if (this._hwaTimeout) {\n      window.clearTimeout(this._hwaTimeout);\n      this._hwaTimeout = NaN;\n    }\n  }\n\n  private _calcScale(): number {\n    return this.containerWidth / this.pagesIntrinsicWidth || 1;\n  }\n\n  private _calcThreshold(): number {\n    return clamp(\n      Math.ceil(this.containerHeight / this.scale / this.pagesMinHeight / 2),\n      1,\n      this.pages.length\n    );\n  }\n\n  private _hwaTimeout = NaN;\n  /** Hardware Acceleration */\n  private _turnOnHWA(): void {\n    if (this._hwaTimeout) {\n      window.clearTimeout(this._hwaTimeout);\n    } else {\n      this.$pages.classList.toggle(\"is-hwa\", true);\n    }\n    this._hwaTimeout = window.setTimeout(this._turnOffHWA, 1000);\n  }\n  private _turnOffHWA = (): void => {\n    window.clearTimeout(this._hwaTimeout);\n    this._hwaTimeout = NaN;\n    this.$pages.classList.toggle(\"is-hwa\", false);\n  };\n}\n","import { SideEffectManager } from \"side-effect-manager\";\nimport { preventEvent, flattenEvent, clamp } from \"../utils/helpers\";\n\nconst SCROLLBAR_DEFAULT_MIN_HEIGHT = 30;\n\nexport interface ScrollBarConfig {\n  pagesScrollTop?: number;\n  containerWidth: number;\n  containerHeight: number;\n  pagesWidth: number;\n  pagesHeight: number;\n  readonly: boolean;\n  scrollbarMinHeight?: number;\n  wrapClassName: (className: string) => string;\n  onDragScroll?: (pageScrollTop: number) => void;\n}\n\nexport class ScrollBar {\n  private sideEffect = new SideEffectManager();\n\n  containerWidth: number;\n  containerHeight: number;\n  readonly pagesWidth: number;\n  readonly pagesHeight: number;\n  readonly scrollbarMinHeight: number;\n  readonly: boolean;\n  wrapClassName: (className: string) => string;\n  onDragScroll?: (pageScrollTop: number) => void;\n\n  scale: number;\n  pagesScrollTop: number;\n  scrollbarHeight: number;\n\n  readonly $scrollbar: HTMLButtonElement;\n\n  constructor(config: ScrollBarConfig) {\n    this.pagesScrollTop = config.pagesScrollTop || 0;\n    this.containerWidth = config.containerWidth || 1;\n    this.containerHeight = config.containerHeight || 1;\n    this.pagesWidth = config.pagesWidth || 1;\n    this.pagesHeight = config.pagesHeight || 1;\n    this.scale = this._calcScale();\n    this.scrollbarMinHeight = config.scrollbarMinHeight || SCROLLBAR_DEFAULT_MIN_HEIGHT;\n    this.scrollbarHeight = this._calcScrollbarHeight(); // after scale is set\n    this.readonly = config.readonly;\n    this.wrapClassName = config.wrapClassName;\n    this.onDragScroll = config.onDragScroll;\n\n    this.$scrollbar = this.renderScrollbar();\n  }\n\n  mount($parent: HTMLElement): void {\n    $parent.appendChild(this.$scrollbar);\n    this.pagesScrollTo(this.pagesScrollTop, true);\n  }\n\n  unmount(): void {\n    this.$scrollbar.remove();\n  }\n\n  setReadonly(readonly: boolean): void {\n    this.readonly = readonly;\n  }\n\n  setContainerSize(width: number, height: number): void {\n    if (width > 0 && height > 0) {\n      if (width !== this.containerWidth || height !== this.containerHeight) {\n        this.containerWidth = width;\n        this.containerHeight = height;\n\n        this.scale = this._calcScale();\n        this._updateScrollbarHeight();\n\n        if (this.$scrollbar.parentElement) {\n          this.pagesScrollTo(this.pagesScrollTop, true);\n        }\n      }\n    }\n  }\n\n  pagesScrollTo(pagesScrollTop: number, force?: boolean): void {\n    pagesScrollTop = clamp(pagesScrollTop, 0, this.pagesHeight - this.containerHeight / this.scale);\n\n    if (force || Math.abs(pagesScrollTop - this.pagesScrollTop) >= 0.001) {\n      this.pagesScrollTop = pagesScrollTop;\n\n      const elScrollTop = this.pagesScrollTop * this.scale;\n      const elPagesHeight = this.pagesHeight * this.scale;\n      const translateY =\n        (elScrollTop / (elPagesHeight - this.containerHeight)) *\n        (this.containerHeight - this.scrollbarHeight);\n\n      if (window.requestAnimationFrame) {\n        window.requestAnimationFrame(() => {\n          this.$scrollbar.style.transform = `translateY(${translateY}px)`;\n        });\n      } else {\n        this.$scrollbar.style.transform = `translateY(${translateY}px)`;\n      }\n    }\n  }\n\n  destroy() {\n    this.unmount();\n    this.onDragScroll = void 0;\n    this.sideEffect.flushAll();\n  }\n\n  private renderScrollbar(): HTMLButtonElement {\n    const $scrollbar = document.createElement(\"button\");\n    $scrollbar.className = this.wrapClassName(\"scrollbar\");\n    $scrollbar.style.minHeight = `${this.scrollbarMinHeight}px`;\n    $scrollbar.style.height = `${this.scrollbarHeight}px`;\n\n    const trackStart = (ev: MouseEvent | TouchEvent): void => {\n      if (this.readonly) {\n        return;\n      }\n\n      if ((ev as MouseEvent).button != null && (ev as MouseEvent).button !== 0) {\n        // Not left mouse\n        return;\n      }\n\n      preventEvent(ev);\n\n      const draggingClassName = this.wrapClassName(\"scrollbar-dragging\");\n\n      $scrollbar.classList.toggle(draggingClassName, true);\n\n      const startTop = this.pagesScrollTop;\n\n      const { clientY: startY } = flattenEvent(ev);\n\n      const tracking = (ev: MouseEvent | TouchEvent): void => {\n        if (this.readonly) {\n          return;\n        }\n\n        const { clientY } = flattenEvent(ev);\n        const offsetY = (clientY - startY) / this.scale;\n        if (Math.abs(offsetY) > 0 && this.onDragScroll) {\n          this.onDragScroll(\n            startTop + offsetY * ((this.pagesHeight * this.scale) / this.containerHeight)\n          );\n        }\n      };\n\n      const trackEnd = (): void => {\n        $scrollbar.classList.toggle(draggingClassName, false);\n        window.removeEventListener(\"mousemove\", tracking, true);\n        window.removeEventListener(\"touchmove\", tracking, true);\n        window.removeEventListener(\"mouseup\", trackEnd, true);\n        window.removeEventListener(\"touchend\", trackEnd, true);\n        window.removeEventListener(\"touchcancel\", trackEnd, true);\n      };\n\n      window.addEventListener(\"mousemove\", tracking, true);\n      window.addEventListener(\"touchmove\", tracking, true);\n      window.addEventListener(\"mouseup\", trackEnd, true);\n      window.addEventListener(\"touchend\", trackEnd, true);\n      window.addEventListener(\"touchcancel\", trackEnd, true);\n    };\n\n    this.sideEffect.addEventListener($scrollbar, \"mousedown\", trackStart);\n    this.sideEffect.addEventListener($scrollbar, \"touchstart\", trackStart);\n\n    return $scrollbar;\n  }\n\n  private _calcScale(): number {\n    return this.containerWidth / this.pagesWidth || 1;\n  }\n\n  private _calcScrollbarHeight() {\n    return clamp(\n      (this.containerHeight / (this.pagesHeight * this.scale)) * this.containerHeight,\n      this.scrollbarMinHeight,\n      this.containerHeight\n    );\n  }\n\n  private _updateScrollbarHeight(): void {\n    const newHeight = this._calcScrollbarHeight();\n    if (Math.abs(newHeight - this.scrollbarHeight) > 0.001) {\n      this.scrollbarHeight = newHeight;\n      this.$scrollbar.style.height = `${newHeight}px`;\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { AnimationMode, AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport type { View, Size, Camera } from \"white-web-sdk\";\nimport type { DebouncedFunction, Options } from \"debounce-fn\";\nimport debounceFn from \"debounce-fn\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport { ResizeObserver as Polyfill } from \"@juggle/resize-observer\";\nimport type { DocsViewerPage } from \"../DocsViewer\";\nimport { DocsViewer } from \"../DocsViewer\";\nimport { clamp, isEditable, preventEvent } from \"../utils/helpers\";\nimport { Stepper } from \"./stepper\";\nimport { PageRenderer } from \"../PageRenderer\";\nimport { ScrollBar } from \"../ScrollBar\";\nimport type { NetlessAppStaticDocsViewerAttributes } from \"..\";\n\nconst ResizeObserver = window.ResizeObserver || Polyfill;\n\nconst RATIO_BASE_CONTAINER_HEIGHT = 640;\n\nexport interface StaticDocsViewerConfig {\n  context: AppContext<NetlessAppStaticDocsViewerAttributes>;\n  whiteboardView: View;\n  readonly: boolean;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n  mountWhiteboard: (dom: HTMLDivElement) => void;\n  /** Scroll Top of the original page */\n  pageScrollTop?: number;\n  onUserScroll?: (pageScrollTop: number) => void;\n  baseScenePath: string | undefined;\n  appId: string;\n}\n\nexport interface SavePdfConfig {\n  appId: string;\n  type: \"@netless/_request_save_pdf_\";\n}\n\nexport class StaticDocsViewer {\n  public constructor({\n    context,\n    whiteboardView,\n    readonly,\n    box,\n    pages,\n    pageScrollTop = 0,\n    mountWhiteboard,\n    onUserScroll,\n    baseScenePath,\n    appId,\n  }: StaticDocsViewerConfig) {\n    this.context = context;\n    this.whiteboardView = whiteboardView;\n    this.readonly = readonly;\n    this.box = box;\n    this.pages = pages;\n    this.baseScenePath = baseScenePath;\n    this.appId = appId;\n    this.mountWhiteboard = mountWhiteboard;\n    this._onUserScroll = onUserScroll;\n\n    const debouncedOnUserScroll = this.debounce(\n      () => {\n        this.userScrolling = false;\n        if (this._onUserScroll) {\n          this._onUserScroll(this.pageRenderer.pagesScrollTop);\n        }\n      },\n      { wait: 80 },\n      \"debounce-updateUserScroll\"\n    );\n\n    this.updateUserScroll = () => {\n      this.userScrolling = true;\n      debouncedOnUserScroll();\n    };\n\n    this.viewer = new DocsViewer({\n      context,\n      readonly,\n      box,\n      pages,\n      onNewPageIndex: this.onNewPageIndex,\n    });\n\n    const { width: containerWidth, height: containerHeight } = this.whiteboardView.size;\n\n    this.pageRenderer = new PageRenderer({\n      pagesScrollTop: pageScrollTop,\n      pages: this.pages,\n      containerWidth,\n      containerHeight,\n      onPageIndexChanged: this.viewer.setPageIndex.bind(this.viewer),\n    });\n\n    this.scrollbar = new ScrollBar({\n      pagesScrollTop: this.pageRenderer.pagesScrollTop,\n      containerWidth,\n      containerHeight,\n      pagesWidth: this.pageRenderer.pagesIntrinsicWidth,\n      pagesHeight: this.pageRenderer.pagesIntrinsicHeight,\n      readonly: this.readonly,\n      wrapClassName: this.wrapClassName.bind(this),\n      onDragScroll: pageScrollTop => {\n        this.pageScrollTo(pageScrollTop);\n        this.updateUserScroll();\n      },\n    });\n\n    this.pageScrollStepper = new Stepper({\n      start: this.pageRenderer.pagesScrollTop,\n      onStep: pageScrollTop => {\n        this.pageScrollTo(pageScrollTop);\n      },\n    });\n\n    this.render();\n  }\n\n  readonly pageRenderer: PageRenderer;\n  readonly scrollbar: ScrollBar;\n  readonly context: AppContext<NetlessAppStaticDocsViewerAttributes>;\n\n  protected sideEffect = new SideEffectManager();\n\n  protected pageScrollStepper: Stepper;\n  protected userScrolling = false;\n\n  protected readonly: boolean;\n  public pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected whiteboardView: View;\n  private readonly baseScenePath: string | undefined;\n  private readonly appId: string;\n  protected mountWhiteboard: (dom: HTMLDivElement) => void;\n\n  public _onUserScroll?: (pageScrollTop: number) => void;\n\n  public viewer: DocsViewer;\n\n  public $whiteboardView!: HTMLDivElement;\n\n  public mount(): this {\n    this.viewer.mount();\n\n    this.setupScrollListener();\n\n    const debouncedRenderRatioHeight = this.debounce(this.renderRatioHeight.bind(this), {\n      wait: 80,\n    });\n\n    this.sideEffect.add(() => {\n      const observer = new ResizeObserver(debouncedRenderRatioHeight);\n      observer.observe(this.viewer.$content);\n      return () => observer.disconnect();\n    });\n\n    // guard scroll position\n    this.sideEffect.setTimeout(() => {\n      if (!this.userScrolling) {\n        this.pageScrollTo(this.pageRenderer.pagesScrollTop);\n      }\n    }, 100);\n\n    this.sideEffect.add(() => {\n      const handleDownloadPdf = (evt: MessageEvent<SavePdfConfig>) => {\n        if (evt.data.type === \"@netless/_request_save_pdf_\" && evt.data.appId === this.appId) {\n          this.toPdf().catch(() => this.reportProgress(100, null));\n        }\n      };\n      window.addEventListener(\"message\", handleDownloadPdf);\n      return () => {\n        window.removeEventListener(\"message\", handleDownloadPdf);\n      };\n    });\n\n    return this;\n  }\n\n  public unmount(): this {\n    this.viewer.unmount();\n    return this;\n  }\n\n  public setReadonly(readonly: boolean): void {\n    if (this.readonly !== readonly) {\n      this.readonly = readonly;\n      this.viewer.setReadonly(readonly);\n      this.scrollbar.setReadonly(readonly);\n    }\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.pageScrollStepper.destroy();\n    this._onUserScroll = void 0;\n    this.unmount();\n    this.viewer.destroy();\n    this.pageRenderer.destroy();\n    this.scrollbar.destroy();\n  }\n\n  /** Sync scrollTop from writable user */\n  public syncPageScrollTop(pageScrollTop: number): void {\n    if (\n      !this.userScrolling &&\n      pageScrollTop >= 0 &&\n      Math.abs(this.pageRenderer.pagesScrollTop - pageScrollTop) > 0.01\n    ) {\n      this.pageScrollStepper.stepTo(pageScrollTop, this.pageRenderer.pagesScrollTop);\n    }\n  }\n\n  public render(): void {\n    this.pageRenderer.mount(this.viewer.$content);\n    this.viewer.$content.appendChild(this.renderWhiteboardView());\n    this.scrollbar.mount(this.viewer.$content);\n    this.renderRatioHeight();\n  }\n\n  protected renderRatioHeight(): void {\n    const boxHeight = this.box.absoluteHeight;\n    const isSmallBox = boxHeight <= RATIO_BASE_CONTAINER_HEIGHT;\n\n    this.viewer.setSmallBox(isSmallBox);\n\n    if (isSmallBox) {\n      const titleBarSupposedHeight = 40 / RATIO_BASE_CONTAINER_HEIGHT;\n      const titleBarActualHeight = 40 / boxHeight;\n      const footerSupposedHeight = 40 / RATIO_BASE_CONTAINER_HEIGHT;\n      const footerActualHeight = 0;\n\n      const emptySpace = Math.max(\n        (titleBarSupposedHeight +\n          footerSupposedHeight -\n          (titleBarActualHeight + footerActualHeight)) /\n          2,\n        0\n      );\n\n      if (this.box.$titleBar) {\n        const titleBarHeight = titleBarActualHeight + emptySpace;\n        this.box.$titleBar.style.height = `${titleBarHeight * 100}%`;\n      }\n\n      if (this.box.$footer) {\n        const footerHeight = footerActualHeight + emptySpace;\n        this.box.$footer.style.height = `${footerHeight * 100}%`;\n      }\n    } else {\n      if (this.box.$titleBar) {\n        const titleBarHeight = Math.max(40 / RATIO_BASE_CONTAINER_HEIGHT, 40 / boxHeight);\n        this.box.$titleBar.style.height = `${titleBarHeight * 100}%`;\n      }\n\n      if (this.box.$footer) {\n        const footerHeight = Math.max(40 / RATIO_BASE_CONTAINER_HEIGHT, 40 / boxHeight);\n        this.box.$footer.style.height = `${footerHeight * 100}%`;\n      }\n    }\n  }\n\n  protected renderWhiteboardView(): HTMLDivElement {\n    if (!this.$whiteboardView) {\n      this.$whiteboardView = document.createElement(\"div\");\n      this.$whiteboardView.className = this.wrapClassName(\"wb-view\");\n      this.mountWhiteboard(this.$whiteboardView);\n      this.sideEffect.addEventListener(\n        this.$whiteboardView,\n        \"wheel\",\n        ev => {\n          preventEvent(ev);\n          if (!this.readonly) {\n            this.pageScrollTo(this.pageRenderer.pagesScrollTop + ev.deltaY);\n            this.updateUserScroll();\n          }\n        },\n        { passive: false, capture: true }\n      );\n      this.sideEffect.addEventListener(\n        this.$whiteboardView,\n        \"touchmove\",\n        ev => {\n          if (this.readonly || ev.touches.length <= 1) {\n            return;\n          }\n          this.updateUserScroll();\n        },\n        { passive: true, capture: true }\n      );\n    }\n    return this.$whiteboardView;\n  }\n\n  protected scrollTopPageToEl(pageScrollTop: number): number {\n    return pageScrollTop * this.pageRenderer.scale;\n  }\n\n  protected scrollTopElToPage(elScrollTop: number): number {\n    return elScrollTop / this.pageRenderer.scale;\n  }\n\n  /** Scroll base on DOM rect */\n  protected elScrollTo(elScrollTop: number): void {\n    this.pageScrollTo(this.scrollTopElToPage(elScrollTop));\n  }\n\n  /** Scroll base on docs size */\n  protected pageScrollTo(pageScrollTop: number): void {\n    const halfWbHeight = this.scrollTopElToPage(this.whiteboardView.size.height / 2);\n    this.whiteboardView.moveCamera({\n      centerY: clamp(\n        pageScrollTop + halfWbHeight,\n        halfWbHeight,\n        this.pageRenderer.pagesIntrinsicHeight - halfWbHeight\n      ),\n      animationMode: \"immediately\" as AnimationMode,\n    });\n  }\n\n  protected scrollToPage(index: number): void {\n    if (!this.readonly && !Number.isNaN(index)) {\n      const offsetY = this.pageRenderer.pagesIntrinsicYs[index];\n      if (offsetY >= 0) {\n        this.pageScrollTo(offsetY + 5 / this.pageRenderer.scale);\n        this.updateUserScroll();\n      }\n    }\n  }\n\n  protected setupScrollListener(): void {\n    this.sideEffect.add(() => {\n      const handleCameraUpdate = (camera: Camera) => {\n        const { width: wbWidth, height: wbHeight } = this.whiteboardView.size;\n        if (wbWidth <= 0 || wbHeight <= 0) {\n          return;\n        }\n\n        const pagesScrollTop =\n          camera.centerY - this.pageRenderer.containerHeight / this.pageRenderer.scale / 2;\n\n        this.pageRenderer.pagesScrollTo(pagesScrollTop);\n        this.scrollbar.pagesScrollTo(pagesScrollTop);\n      };\n      this.whiteboardView.callbacks.on(\"onCameraUpdated\", handleCameraUpdate);\n      return () => this.whiteboardView.callbacks.off(\"onCameraUpdated\", handleCameraUpdate);\n    });\n\n    // Handle drag event (hand tool).\n    this.sideEffect.add(() => {\n      const { updateUserScroll } = this;\n      this.whiteboardView.callbacks.on(\"onCameraUpdatedByDevice\", updateUserScroll);\n      return () => this.whiteboardView.callbacks.off(\"onCameraUpdatedByDevice\", updateUserScroll);\n    });\n\n    this.sideEffect.add(() => {\n      const handleSizeUpdate = ({ width: wbWidth, height: wbHeight }: Size): void => {\n        if (wbWidth <= 0 || wbHeight <= 0) {\n          return;\n        }\n\n        this.pageRenderer.setContainerSize(wbWidth, wbHeight);\n        this.scrollbar.setContainerSize(wbWidth, wbHeight);\n\n        const { pagesIntrinsicWidth, pagesIntrinsicHeight } = this.pageRenderer;\n\n        this.whiteboardView.moveCameraToContain({\n          originX: 0,\n          originY: this.pageRenderer.pagesScrollTop,\n          width: pagesIntrinsicWidth,\n          height: wbHeight / this.pageRenderer.scale,\n          animationMode: \"immediately\" as AnimationMode,\n        });\n\n        this.whiteboardView.setCameraBound({\n          damping: 1,\n          maxContentMode: () => this.pageRenderer.scale,\n          minContentMode: () => this.pageRenderer.scale,\n          centerX: pagesIntrinsicWidth / 2,\n          centerY: pagesIntrinsicHeight / 2,\n          width: pagesIntrinsicWidth,\n          height: pagesIntrinsicHeight,\n        });\n      };\n      this.whiteboardView.callbacks.on(\"onSizeUpdated\", handleSizeUpdate);\n      return () => {\n        this.whiteboardView.callbacks.off(\"onSizeUpdated\", handleSizeUpdate);\n      };\n    }, \"whiteboard-size-update\");\n\n    this.sideEffect.addEventListener(\n      window,\n      \"keyup\",\n      ev => {\n        if (this.readonly || !this.box.focus || this.box.minimized || isEditable(ev.target)) {\n          return;\n        }\n        let newPageScrollTop: number | null = null;\n        switch (ev.key) {\n          case \"PageDown\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop +\n              this.pageRenderer.containerHeight / this.pageRenderer.scale;\n            break;\n          }\n          case \"PageUp\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop -\n              this.pageRenderer.containerHeight / this.pageRenderer.scale;\n            break;\n          }\n          case \"ArrowDown\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop +\n              this.pageRenderer.containerHeight / 4 / this.pageRenderer.scale;\n            break;\n          }\n          case \"ArrowUp\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop -\n              this.pageRenderer.containerHeight / 4 / this.pageRenderer.scale;\n            break;\n          }\n          default:\n            break;\n        }\n        if (newPageScrollTop !== null) {\n          if (this._onUserScroll) {\n            // this will trigger stepper for smooth scrolling effect\n            this._onUserScroll(newPageScrollTop);\n          } else {\n            this.pageScrollTo(newPageScrollTop);\n            this.updateUserScroll();\n          }\n        }\n      },\n      { capture: true }\n    );\n  }\n\n  protected debounce<ArgumentsType extends unknown[], ReturnType>(\n    fn: (...args: ArgumentsType) => ReturnType,\n    options?: Options,\n    disposerID?: string\n  ): DebouncedFunction<ArgumentsType, ReturnType | undefined> {\n    const dFn = debounceFn(fn, options);\n    this.sideEffect.addDisposer(() => dFn.cancel(), disposerID);\n    return dFn;\n  }\n\n  protected updateUserScroll: () => void;\n\n  protected wrapClassName(className: string): string {\n    return \"netless-app-docs-viewer-static-\" + className;\n  }\n\n  protected onNewPageIndex = (index: number): void => {\n    this.scrollToPage(index);\n  };\n\n  private async getBase64FromUrl(url: string): Promise<string> {\n    const data = await fetch(this._invalidate(url));\n    const blob = await data.blob();\n    return new Promise(resolve => {\n      const reader = new FileReader();\n      reader.readAsDataURL(blob);\n      reader.onloadend = () => {\n        const base64data = reader.result as string;\n        resolve(base64data);\n      };\n    });\n  }\n\n  private _invalidate(url: string): string {\n    try {\n      const a = new URL(url);\n      a.searchParams.set(\"t\", Date.now().toString());\n      return a.toString();\n    } catch {\n      return url;\n    }\n  }\n\n  private reportProgress(progress: number, result: { pdf: ArrayBuffer; title: string } | null) {\n    window.postMessage({\n      type: \"@netless/_result_save_pdf_\",\n      appId: this.appId,\n      progress,\n      result,\n    });\n  }\n\n  public toPdf = async () => {\n    const whiteSnapshotCanvas = document.createElement(\"canvas\");\n    const whiteCtx = whiteSnapshotCanvas.getContext(\"2d\");\n    if (!whiteCtx || !this.baseScenePath) {\n      this.reportProgress(100, null);\n      return;\n    }\n    const scenePath = this.whiteboardView.focusScenePath || `${this.baseScenePath}/1`;\n    const firstPage = this.pages[0];\n    const { jsPDF } = await import(\"jspdf\");\n    const pdf = new jsPDF({\n      format: [firstPage.width, firstPage.height],\n      orientation: firstPage.width > firstPage.height ? \"l\" : \"p\",\n      compress: true,\n    });\n\n    for (const [index, page] of this.pages.entries()) {\n      const { width, height, src } = page;\n      whiteSnapshotCanvas.width = width;\n      whiteSnapshotCanvas.height = height;\n      const orientation = width > height ? \"l\" : \"p\";\n\n      if (index > 0) {\n        pdf.addPage([width, height], orientation);\n      }\n\n      const pdfPageSrc = await this.getBase64FromUrl(src);\n      const img = document.createElement(\"img\");\n      img.src = pdfPageSrc;\n      await new Promise(resolve => (img.onload = resolve));\n      whiteCtx.drawImage(img, 0, 0);\n      const pdfPageBase64 = whiteSnapshotCanvas.toDataURL(\"image/jpeg\", 0.6);\n      whiteCtx.clearRect(0, 0, width, height);\n      const camera = {\n        centerX: width / 2,\n        centerY: height / 2 + index * height,\n        scale: 1,\n      };\n      // appliancePlugin is a performance optimization for whiteboard;\n      const windowManger = (this.context as any).manager.windowManger as any;\n      if (windowManger._appliancePlugin) {\n        await windowManger._appliancePlugin.screenshotToCanvasAsync(\n          whiteCtx,\n          scenePath,\n          width,\n          height,\n          camera\n        );\n      } else {\n        this.whiteboardView.screenshotToCanvas(whiteCtx, scenePath, width, height, camera);\n      }\n      const snapshot = whiteSnapshotCanvas.toDataURL(\"image/png\");\n      pdf.addImage(pdfPageBase64, \"JPEG\", 0, 0, width, height, \"\", \"FAST\");\n      pdf.addImage(snapshot, \"PNG\", 0, 0, width, height, \"\", \"FAST\");\n\n      whiteCtx.clearRect(0, 0, width, height);\n      const progress = Math.ceil(((index + 1) / this.pages.length) * 100);\n      if (progress < 100) {\n        this.reportProgress(Math.ceil(((index + 1) / this.pages.length) * 100), null);\n      }\n    }\n    const dataUrl = pdf.output(\"arraybuffer\");\n    this.reportProgress(100, { pdf: dataUrl, title: this.box.title });\n  };\n}\n","import type {\n  ReadonlyTeleBox,\n  View,\n  Displayer,\n  AnimationMode,\n  AppContext,\n  SceneState,\n  PageState,\n} from \"@netless/window-manager\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport type { DocsViewerPage } from \"../DocsViewer\";\nimport { DocsViewer } from \"../DocsViewer\";\nimport { clamp, isEditable } from \"../utils/helpers\";\n\nexport interface DynamicDocsViewerConfig {\n  context: AppContext;\n  whiteboardView: View;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n}\n\nexport class DynamicDocsViewer {\n  public constructor({ context, whiteboardView, box, pages }: DynamicDocsViewerConfig) {\n    this.context = context;\n    this.whiteboardView = whiteboardView;\n    this.box = box;\n    this.pages = pages;\n    this.displayer = context.getDisplayer();\n\n    this.viewer = new DocsViewer({\n      context,\n      readonly: !context.getIsWritable(),\n      box,\n      pages,\n      onNewPageIndex: this.onNewPageIndex,\n      onPlay: this.onPlayPPT,\n    });\n\n    this.render();\n\n    this.sideEffect.add(() => {\n      const handler = (isWritable: boolean): void => {\n        this.viewer.setReadonly(!isWritable);\n      };\n      this.context.emitter.on(\"writableChange\", handler);\n      return () => this.context.emitter.off(\"writableChange\", handler);\n    });\n\n    this.sideEffect.add(() => {\n      const handler = (sceneState: SceneState) => {\n        this.jumpToPage(sceneState.index);\n      };\n      this.context.emitter.on(\"sceneStateChange\", handler);\n      return () => this.context.emitter.off(\"sceneStateChange\", handler);\n    });\n    this.sideEffect.add(() => {\n      const handler = (pageState: PageState) => {\n        this.jumpToPage(pageState.index);\n      };\n      this.context.emitter.on(\"pageStateChange\", handler);\n      return () => this.context.emitter.off(\"pageStateChange\", handler);\n    });\n\n    this.sideEffect.add(() => {\n      const handler = (visible?: boolean) => {\n        this.viewer.togglePreview(visible);\n      };\n      this.context.emitter.on(\"togglePreview\", handler);\n      return () => this.context.emitter.off(\"togglePreview\", handler);\n    });\n  }\n\n  protected sideEffect = new SideEffectManager();\n\n  protected context: AppContext;\n  public pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected whiteboardView: View;\n  protected displayer: Displayer;\n\n  public viewer: DocsViewer;\n\n  public $mask!: HTMLElement;\n  public $whiteboardView!: HTMLDivElement;\n\n  public mount(): this {\n    this.viewer.mount();\n\n    const pageIndex = this.getPageIndex();\n    if (pageIndex !== 0) {\n      this.jumpToPage(pageIndex);\n    }\n\n    this.scaleDocsToFit();\n    this.sideEffect.add(() => {\n      this.whiteboardView.callbacks.on(\"onSizeUpdated\", this.scaleDocsToFit);\n      return () => {\n        this.whiteboardView.callbacks.off(\"onSizeUpdated\", this.scaleDocsToFit);\n      };\n    });\n\n    return this;\n  }\n\n  public unmount(): this {\n    this.viewer.unmount();\n    return this;\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.unmount();\n    this.viewer.destroy();\n  }\n\n  public getPageIndex(): number {\n    return this.displayer.state.sceneState.index;\n  }\n\n  public jumpToPage(index: number, reset?: boolean): void {\n    index = clamp(index, 0, this.pages.length - 1);\n    if (index !== this.getPageIndex()) {\n      if (this.context.getIsWritable()) {\n        const initScenePath = this.context.getInitScenePath();\n        const scene = this.context.getScenes()?.[index]?.name;\n        if (initScenePath && scene) {\n          this.context.setScenePath(`${initScenePath}/${scene}`);\n        }\n        this.scaleDocsToFit();\n      }\n    }\n    if (index !== this.viewer.pageIndex) {\n      this.viewer.setPageIndex(index);\n    }\n    if (reset) {\n      const room = this.context.getRoom();\n      if (room) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const pptState = (room.state.globalState as any).__pptState;\n        room.setGlobalState({\n          __pptState: pptState && {\n            uuid: pptState.uuid,\n            pageIndex: index,\n            disableAutoPlay: pptState.disableAutoPlay,\n          },\n        });\n      }\n    }\n  }\n\n  public onPlayPPT = (): void => {\n    const room = this.context.getRoom();\n    if (room) {\n      room.pptNextStep();\n    }\n  };\n\n  public render(): void {\n    this.viewer.$content.appendChild(this.renderMask());\n    this.viewer.$content.appendChild(this.renderWhiteboardView());\n    this.sideEffect.addEventListener(window, \"keydown\", ev => {\n      if (this.box.focus && !isEditable(ev.target)) {\n        switch (ev.key) {\n          case \"ArrowUp\":\n          case \"ArrowLeft\": {\n            this.jumpToPage(this.getPageIndex() - 1, true);\n            break;\n          }\n          case \"ArrowRight\":\n          case \"ArrowDown\": {\n            this.context.getRoom()?.pptNextStep();\n            break;\n          }\n          default: {\n            break;\n          }\n        }\n      }\n    });\n  }\n\n  protected renderMask(): HTMLElement {\n    if (!this.$mask) {\n      const $mask = document.createElement(\"div\");\n      $mask.className = this.wrapClassName(\"mask\");\n      this.$mask = $mask;\n\n      const $back = document.createElement(\"button\");\n      $back.className = this.wrapClassName(\"back\");\n\n      const $next = document.createElement(\"button\");\n      $next.className = this.wrapClassName(\"next\");\n\n      // this.$mask.appendChild($back)\n      // this.$mask.appendChild($next)\n    }\n    return this.$mask;\n  }\n\n  protected renderWhiteboardView(): HTMLDivElement {\n    if (!this.$whiteboardView) {\n      this.$whiteboardView = document.createElement(\"div\");\n      this.$whiteboardView.className = this.wrapClassName(\"wb-view\");\n      this.sideEffect.addEventListener(this.$whiteboardView, \"click\", ev => {\n        const room = this.context.getRoom();\n        if (room && room.state.memberState.currentApplianceName === \"clicker\") {\n          for (let el = ev.target as HTMLElement | null; el; el = el.parentElement) {\n            if (el.classList?.contains(\"ppt-event-source\")) {\n              return;\n            }\n          }\n          room.pptNextStep();\n        }\n      });\n      this.context.mountView(this.$whiteboardView);\n    }\n    return this.$whiteboardView;\n  }\n\n  protected _scaleDocsToFitImpl = (): void => {\n    const page = this.pages[this.getPageIndex()];\n    if (page) {\n      this.whiteboardView.moveCameraToContain({\n        originX: -page.width / 2,\n        originY: -page.height / 2,\n        width: page.width,\n        height: page.height,\n        animationMode: \"immediately\" as AnimationMode,\n      });\n      this.whiteboardView.setCameraBound({\n        damping: 1,\n        maxContentMode: () => this.whiteboardView.camera.scale,\n        minContentMode: () => this.whiteboardView.camera.scale,\n        centerX: 0,\n        centerY: 0,\n        width: page.width,\n        height: page.height,\n      });\n    }\n  };\n\n  protected _scaleDocsToFitDebounced = (): void => {\n    this.sideEffect.setTimeout(this._scaleDocsToFitImpl, 1000, \"_scaleDocsToFitDebounced\");\n  };\n\n  protected scaleDocsToFit = (): void => {\n    this._scaleDocsToFitImpl();\n    this._scaleDocsToFitDebounced();\n  };\n\n  protected onNewPageIndex = (index: number): void => {\n    this.jumpToPage(index, true);\n  };\n\n  protected wrapClassName(className: string): string {\n    return \"netless-app-docs-viewer-dynamic-\" + className;\n  }\n}\n","export const kind = \"DocsViewer\";\n","import styles from \"./style.scss?inline\";\n\nimport type { NetlessApp, AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport type { View, Size } from \"white-web-sdk\";\nimport { StaticDocsViewer } from \"./StaticDocsViewer\";\nimport type { DocsViewerPage } from \"./DocsViewer\";\nimport { DynamicDocsViewer } from \"./DynamicDocsViewer\";\nimport { kind } from \"./constants\";\n\nexport type { DocsViewerPage } from \"./DocsViewer\";\n\nexport interface NetlessAppStaticDocsViewerAttributes {\n  /** ScrollTop base on the real page size */\n  pageScrollTop?: number;\n}\n\nexport interface AppResult {\n  viewer: () => StaticDocsViewer | DynamicDocsViewer | null;\n  position: () => [page: number, length: number] | undefined;\n  nextStep?: () => void;\n  prevStep?: () => void;\n  nextPage?: () => void;\n  prevPage?: () => void;\n  jumpToPage?: (page: number) => void;\n  togglePreview?: (visible?: boolean) => void;\n}\n\nexport interface NetlessAppDynamicDocsViewerAttributes {}\n\nexport interface AppOptions {}\n\nexport type MagixEvents = {\n  [key: string]: string;\n};\n\nconst NetlessAppDocsViewer: NetlessApp<\n  NetlessAppStaticDocsViewerAttributes | NetlessAppDynamicDocsViewerAttributes,\n  MagixEvents,\n  AppOptions,\n  AppResult\n> = {\n  kind,\n  setup(context) {\n    const box = context.getBox();\n\n    const scenes = context.getScenes();\n    if (!scenes) {\n      throw new Error(\"[Docs Viewer]: scenes not found.\");\n    }\n\n    const whiteboardView = context.getView();\n    console.log(context.storage.state);\n    if (!whiteboardView) {\n      throw new Error(\"[Docs Viewer]: no whiteboard view.\");\n    }\n\n    const pages = scenes\n      .map(({ ppt }): DocsViewerPage | null =>\n        ppt\n          ? {\n              width: ppt.width,\n              height: ppt.height,\n              src: ppt.src,\n              thumbnail: ppt.previewURL,\n            }\n          : null\n      )\n      .filter((page): page is DocsViewerPage => Boolean(page));\n\n    if (pages.length <= 0) {\n      throw new Error(\"[Docs Viewer]: empty scenes.\");\n    }\n\n    box.mountStyles(styles);\n\n    if (pages[0].src.startsWith(\"ppt\")) {\n      return setupDynamicDocsViewer(\n        context as AppContext<NetlessAppDynamicDocsViewerAttributes>,\n        whiteboardView,\n        box,\n        pages\n      );\n    } else {\n      return setupStaticDocsViewer(\n        context as AppContext<NetlessAppStaticDocsViewerAttributes>,\n        whiteboardView,\n        box,\n        pages\n      );\n    }\n  },\n};\n\nexport default NetlessAppDocsViewer;\n\nfunction setupStaticDocsViewer(\n  context: AppContext<NetlessAppStaticDocsViewerAttributes>,\n  whiteboardView: View,\n  box: ReadonlyTeleBox,\n  pages: DocsViewerPage[]\n): AppResult {\n  whiteboardView.disableCameraTransform = !context.getIsWritable();\n\n  const docsViewer = new StaticDocsViewer({\n    context,\n    whiteboardView,\n    readonly: !context.getIsWritable(),\n    box,\n    pages: pages,\n    pageScrollTop: context.getAttributes()?.pageScrollTop,\n    mountWhiteboard: context.mountView.bind(context),\n    onUserScroll: pageScrollTop => {\n      if (context.getAttributes()?.pageScrollTop !== pageScrollTop && !box.readonly) {\n        context.updateAttributes([\"pageScrollTop\"], pageScrollTop);\n      }\n    },\n    baseScenePath: context.getInitScenePath(),\n    appId: context.appId,\n  }).mount();\n\n  docsViewer.viewer.onPageIndexChanged = index => {\n    context.dispatchAppEvent(\"pageStateChange\", { index, length: pages.length });\n  };\n\n  context.dispatchAppEvent(\"pageStateChange\", {\n    index: docsViewer.viewer.pageIndex,\n    length: pages.length,\n  });\n\n  if (import.meta.env.DEV) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).docsViewer = docsViewer;\n  }\n\n  context.emitter.on(\"attributesUpdate\", attributes => {\n    if (attributes) {\n      if (attributes.pageScrollTop != null) {\n        docsViewer.syncPageScrollTop(attributes.pageScrollTop);\n      }\n    }\n  });\n\n  context.emitter.on(\"writableChange\", isWritable => {\n    docsViewer.setReadonly(!isWritable);\n    whiteboardView.disableCameraTransform = !isWritable;\n  });\n  return {\n    viewer: () => {\n      return docsViewer;\n    },\n    position: () => {\n      const controller = docsViewer?.viewer;\n      if (controller) {\n        return [controller.pageIndex, docsViewer.pages.length] as [page: number, length: number];\n      }\n    },\n  };\n}\n\nfunction setupDynamicDocsViewer(\n  context: AppContext<NetlessAppDynamicDocsViewerAttributes>,\n  whiteboardView: View,\n  box: ReadonlyTeleBox,\n  pages: DocsViewerPage[]\n): AppResult {\n  whiteboardView.disableCameraTransform = true;\n\n  const docsViewer = new DynamicDocsViewer({\n    context,\n    whiteboardView,\n    box,\n    pages,\n  }).mount();\n\n  docsViewer.viewer.onPageIndexChanged = index => {\n    context.dispatchAppEvent(\"pageStateChange\", { index, length: pages.length });\n  };\n\n  context.dispatchAppEvent(\"pageStateChange\", {\n    index: docsViewer.getPageIndex(),\n    length: pages.length,\n  });\n\n  context.mountView(docsViewer.$whiteboardView);\n\n  if (context.isAddApp) {\n    whiteboardView.callbacks.once(\n      \"onSizeUpdated\",\n      ({ width: contentWidth, height: contentHeight }: Size) => {\n        if (pages.length > 0 && box.state !== \"maximized\") {\n          const { width: pageWidth, height: pageHeight } = pages[0];\n          const preferHeight = (pageHeight / pageWidth) * contentWidth;\n          const diff = preferHeight - contentHeight;\n          if (diff !== 0 && context.getIsWritable()) {\n            context.emitter.emit(\"setBoxSize\", {\n              width: box.width,\n              height: box.height + diff / box.containerRect.height,\n            });\n          }\n        }\n      }\n    );\n  }\n\n  if (import.meta.env.DEV) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).docsViewer = docsViewer;\n  }\n\n  return {\n    viewer: () => {\n      return docsViewer;\n    },\n    position: () => {\n      const controller = docsViewer?.viewer;\n      if (controller) {\n        return [controller.pageIndex, docsViewer.pages.length] as [page: number, length: number];\n      }\n    },\n    nextStep: () => {\n      return docsViewer.onPlayPPT();\n    },\n    nextPage: () => {\n      return docsViewer.jumpToPage(docsViewer.getPageIndex() + 1, true);\n    },\n    prevPage: () => {\n      return docsViewer.jumpToPage(docsViewer.getPageIndex() + 1, true);\n    },\n    jumpToPage: (pageIndex?: number) => {\n      if (typeof pageIndex == \"number\") {\n        docsViewer.jumpToPage(pageIndex, true);\n      }\n    },\n    togglePreview: (visible?: boolean) => {\n      docsViewer.viewer.togglePreview(visible);\n    },\n  };\n}\n"],"names":["mimicFn","ResizeObserver","Polyfill"],"mappings":"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"}