{"version":3,"file":"main.cjs.js","sources":["../../../node_modules/.pnpm/mimic-fn@4.0.0/node_modules/mimic-fn/index.js","../../../node_modules/.pnpm/debounce-fn@5.1.0/node_modules/debounce-fn/index.js","../../../node_modules/.pnpm/side-effect-manager@1.2.1/node_modules/side-effect-manager/dist/side-effect-manager.es.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/freeze.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/element.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/global.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/process.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/utils/scheduler.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObservation.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.3.1/node_modules/@juggle/resize-observer/lib/ResizeObserver.js","../src/DocsViewer/icons/arrow-left.ts","../src/DocsViewer/icons/arrow-right.ts","../src/DocsViewer/icons/play.ts","../src/DocsViewer/icons/pause.ts","../../../node_modules/.pnpm/vanilla-lazyload@17.8.3/node_modules/vanilla-lazyload/dist/lazyload.esm.js","../src/utils/environment.ts","../src/DocsViewer/index.ts","../src/utils/helpers.ts","../src/StaticDocsViewer/stepper.ts","../src/PageRenderer/PageEl.ts","../src/PageRenderer/PageElManager.ts","../src/PageRenderer/index.ts","../src/ScrollBar/index.ts","../src/StaticDocsViewer/index.ts","../src/DynamicDocsViewer/index.ts","../src/constants.ts","../src/index.ts"],"sourcesContent":["const copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\t// `Function#arguments` and `Function#caller` should not be copied. They were reported to be present in `Reflect.ownKeys` for some devices in React Native (#41), so we explicitly ignore them here.\n\tif (property === 'arguments' || property === 'caller') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n// - one its descriptors is changed\n// - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable &&\n\t\ttoDescriptor.enumerable === fromDescriptor.enumerable &&\n\t\ttoDescriptor.configurable === fromDescriptor.configurable &&\n\t\t(toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tObject.defineProperty(to, 'toString', {...toStringDescriptor, value: newToString});\n};\n\nexport default function mimicFunction(to, from, {ignoreNonConfigurable = false} = {}) {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n}\n","import mimicFn from 'mimic-fn';\n\nconst debounceFn = (inputFunction, options = {}) => {\n\tif (typeof inputFunction !== 'function') {\n\t\tthrow new TypeError(`Expected the first argument to be a function, got \\`${typeof inputFunction}\\``);\n\t}\n\n\tconst {\n\t\twait = 0,\n\t\tmaxWait = Number.Infinity,\n\t\tbefore = false,\n\t\tafter = true,\n\t} = options;\n\n\tif (!before && !after) {\n\t\tthrow new Error('Both `before` and `after` are false, function wouldn\\'t be called.');\n\t}\n\n\tlet timeout;\n\tlet maxTimeout;\n\tlet result;\n\n\tconst debouncedFunction = function (...arguments_) {\n\t\tconst context = this; // eslint-disable-line unicorn/no-this-assignment\n\n\t\tconst later = () => {\n\t\t\ttimeout = undefined;\n\n\t\t\tif (maxTimeout) {\n\t\t\t\tclearTimeout(maxTimeout);\n\t\t\t\tmaxTimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst maxLater = () => {\n\t\t\tmaxTimeout = undefined;\n\n\t\t\tif (timeout) {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst shouldCallNow = before && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (maxWait > 0 && maxWait !== Number.Infinity && !maxTimeout) {\n\t\t\tmaxTimeout = setTimeout(maxLater, maxWait);\n\t\t}\n\n\t\tif (shouldCallNow) {\n\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tmimicFn(debouncedFunction, inputFunction);\n\n\tdebouncedFunction.cancel = () => {\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = undefined;\n\t\t}\n\n\t\tif (maxTimeout) {\n\t\t\tclearTimeout(maxTimeout);\n\t\t\tmaxTimeout = undefined;\n\t\t}\n\t};\n\n\treturn debouncedFunction;\n};\n\nexport default debounceFn;\n","const SOUP = \"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\nconst SOUP_LEN = 87;\nconst ID_LEN = 20;\nconst reusedIdCarrier = [];\nconst genUID = () => {\n  for (let i = 0; i < ID_LEN; i++) {\n    reusedIdCarrier[i] = SOUP.charAt(Math.random() * SOUP_LEN);\n  }\n  return reusedIdCarrier.join(\"\");\n};\nfunction invoke(fn) {\n  try {\n    return fn();\n  } catch (e) {\n    console.error(e);\n  }\n}\nclass SideEffectManager {\n  constructor() {\n    this.push = this.addDisposer;\n    this.disposers = new Map();\n  }\n  addDisposer(disposer, disposerID = this.genUID()) {\n    this.flush(disposerID);\n    this.disposers.set(disposerID, Array.isArray(disposer) ? joinDisposers(disposer) : disposer);\n    return disposerID;\n  }\n  add(executor, disposerID = this.genUID()) {\n    const disposers = executor();\n    return disposers ? this.addDisposer(disposers, disposerID) : disposerID;\n  }\n  addEventListener(el, type, listener, options, disposerID = this.genUID()) {\n    el.addEventListener(type, listener, options);\n    this.addDisposer(() => el.removeEventListener(type, listener, options), disposerID);\n    return disposerID;\n  }\n  setTimeout(handler, timeout, disposerID = this.genUID()) {\n    const ticket = window.setTimeout(() => {\n      this.remove(disposerID);\n      handler();\n    }, timeout);\n    return this.addDisposer(() => window.clearTimeout(ticket), disposerID);\n  }\n  setInterval(handler, timeout, disposerID = this.genUID()) {\n    const ticket = window.setInterval(handler, timeout);\n    return this.addDisposer(() => window.clearInterval(ticket), disposerID);\n  }\n  remove(disposerID) {\n    const disposer = this.disposers.get(disposerID);\n    this.disposers.delete(disposerID);\n    return disposer;\n  }\n  flush(disposerID) {\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      disposer();\n    }\n  }\n  flushAll() {\n    this.disposers.forEach(invoke);\n    this.disposers.clear();\n  }\n  genUID() {\n    let uid;\n    do {\n      uid = genUID();\n    } while (this.disposers.has(uid));\n    return uid;\n  }\n}\nfunction joinDisposers(disposers) {\n  return () => disposers.forEach(invoke);\n}\nclass AsyncSideEffectManager {\n  constructor() {\n    this.push = this.addDisposer;\n    this.finished = Promise.resolve();\n    this.disposers = new Map();\n    this._nextTask = new Map();\n    this._isRunning = new Set();\n  }\n  add(executor, disposerID = this.genUID()) {\n    if (this._isRunning.has(disposerID)) {\n      this._nextTask.set(disposerID, () => this._add(executor, disposerID));\n    } else {\n      this._add(executor, disposerID);\n    }\n    return disposerID;\n  }\n  async _add(executor, disposerID) {\n    this._startTask(disposerID);\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      try {\n        await disposer();\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    try {\n      const disposers = await executor();\n      if (disposers) {\n        this.disposers.set(disposerID, Array.isArray(disposers) ? joinAsyncDisposers(disposers) : disposers);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n    this._endTask(disposerID);\n    const task = this._nextTask.get(disposerID);\n    if (task) {\n      this._nextTask.delete(disposerID);\n      task();\n    }\n  }\n  addDisposer(disposer, disposerID = this.genUID()) {\n    return this.add(() => disposer, disposerID);\n  }\n  remove(disposerID) {\n    const disposer = this.disposers.get(disposerID);\n    this.disposers.delete(disposerID);\n    return disposer;\n  }\n  flush(disposerID) {\n    if (this._isRunning.has(disposerID)) {\n      this._nextTask.set(disposerID, () => this._flush(disposerID));\n    } else {\n      this._flush(disposerID);\n    }\n  }\n  async _flush(disposerID) {\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      this._startTask(disposerID);\n      try {\n        await disposer();\n      } catch (e) {\n        console.error(e);\n      }\n      this._endTask(disposerID);\n    }\n    const task = this._nextTask.get(disposerID);\n    if (task) {\n      this._nextTask.delete(disposerID);\n      task();\n    }\n  }\n  flushAll() {\n    this.disposers.forEach((_, disposerID) => this.flush(disposerID));\n  }\n  genUID() {\n    let uid;\n    do {\n      uid = genUID();\n    } while (this.disposers.has(uid));\n    return uid;\n  }\n  _startTask(disposerID) {\n    this._isRunning.add(disposerID);\n    if (!this._resolveFinished) {\n      this.finished = new Promise((resolve) => {\n        this._resolveFinished = resolve;\n      });\n    }\n  }\n  _endTask(disposerID) {\n    this._isRunning.delete(disposerID);\n    if (this._resolveFinished && this._isRunning.size <= 0 && this._nextTask.size <= 0) {\n      this._resolveFinished();\n      this._resolveFinished = void 0;\n    }\n  }\n}\nfunction joinAsyncDisposers(disposers) {\n  return () => Promise.all(disposers.map(invoke));\n}\nclass Disposable {\n  constructor() {\n    this.push = this.addDisposer;\n    this.disposers = new Set();\n  }\n  addDisposer(disposers) {\n    if (Array.isArray(disposers)) {\n      disposers.forEach((disposer) => {\n        this.disposers.add(disposer);\n      });\n    } else {\n      this.disposers.add(disposers);\n    }\n  }\n  add(executor) {\n    const disposers = executor();\n    if (disposers) {\n      this.push(disposers);\n    }\n  }\n  addEventListener(el, type, listener, options) {\n    el.addEventListener(type, listener, options);\n    const disposer = () => el.removeEventListener(type, listener, options);\n    this.push(disposer);\n    return disposer;\n  }\n  setTimeout(handler, timeout) {\n    const ticket = window.setTimeout(() => {\n      this.remove(disposer);\n      handler();\n    }, timeout);\n    const disposer = () => window.clearTimeout(ticket);\n    this.push(disposer);\n    return disposer;\n  }\n  setInterval(handler, timeout) {\n    const ticket = setInterval(handler, timeout);\n    const disposer = () => clearInterval(ticket);\n    this.push(disposer);\n    return disposer;\n  }\n  remove(disposer) {\n    this.disposers.delete(disposer);\n  }\n  flush(disposer) {\n    this.remove(disposer);\n    disposer();\n  }\n  flushAll() {\n    this.disposers.forEach(invoke);\n    this.disposers.clear();\n  }\n}\nexport { AsyncSideEffectManager, Disposable, SideEffectManager, genUID, joinAsyncDisposers, joinDisposers };\n//# sourceMappingURL=side-effect-manager.es.js.map\n","var resizeObservers = [];\nexport { resizeObservers };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a, _b;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_b = (_a = obj) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\" + (toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","export function arrowLeftSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-left`);\n  $svg.setAttribute(\"viewBox\", \"0 0 20 20\");\n\n  $svg.innerHTML = `<g clip-path=\"url(#clip0_11800_99864)\">\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.5283 4.86182L12.4711 5.80463L8.22849 10.0473L12.4711 14.2899L11.5283 15.2327L6.34287 10.0473L11.5283 4.86182Z\" class=\"arrow\" />\n</g>\n<defs>\n<clipPath id=\"clip0_11800_99864\">\n<rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(2 2)\"/>\n</clipPath>\n</defs>`;\n\n  return $svg;\n}\n","export function arrowRightSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-right`);\n  $svg.setAttribute(\"viewBox\", \"0 0 20 20\");\n\n  $svg.innerHTML = `<g clip-path=\"url(#clip0_11800_99870)\">\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.1377 4.86182L7.19489 5.80463L11.4375 10.0473L7.19489 14.2899L8.1377 15.2327L13.3231 10.0473L8.1377 4.86182Z\" class=\"arrow\" />\n</g>\n<defs>\n<clipPath id=\"clip0_11800_99870\">\n<rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(2 2)\"/>\n</clipPath>\n</defs>`;\n\n  return $svg;\n}\n","export function playSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-play`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","export function pauseSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-pause`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","const runningOnBrowser = typeof window !== \"undefined\";\n\nconst isBot =\n    (runningOnBrowser && !(\"onscroll\" in window)) ||\n    (typeof navigator !== \"undefined\" && /(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));\n\nconst supportsIntersectionObserver = runningOnBrowser && \"IntersectionObserver\" in window;\n\nconst supportsClassList = runningOnBrowser && \"classList\" in document.createElement(\"p\");\n\nconst isHiDpi = runningOnBrowser && window.devicePixelRatio > 1;\n\nconst defaultSettings = {\n    elements_selector: \".lazy\",\n    container: isBot || runningOnBrowser ? document : null,\n    threshold: 300,\n    thresholds: null,\n    data_src: \"src\",\n    data_srcset: \"srcset\",\n    data_sizes: \"sizes\",\n    data_bg: \"bg\",\n    data_bg_hidpi: \"bg-hidpi\",\n    data_bg_multi: \"bg-multi\",\n    data_bg_multi_hidpi: \"bg-multi-hidpi\",\n    data_bg_set: \"bg-set\",\n    data_poster: \"poster\",\n    class_applied: \"applied\",\n    class_loading: \"loading\",\n    class_loaded: \"loaded\",\n    class_error: \"error\",\n    class_entered: \"entered\",\n    class_exited: \"exited\",\n    unobserve_completed: true,\n    unobserve_entered: false,\n    cancel_on_exit: true,\n    callback_enter: null,\n    callback_exit: null,\n    callback_applied: null,\n    callback_loading: null,\n    callback_loaded: null,\n    callback_error: null,\n    callback_finish: null,\n    callback_cancel: null,\n    use_native: false,\n    restore_on_error: false,\n};\n\nconst getExtendedSettings = (customSettings) => {\n    return Object.assign({}, defaultSettings, customSettings);\n};\n\n/* Creates instance and notifies it through the window element */\nconst createInstance = function(classObj, options) {\n    let event;\n    const eventString = \"LazyLoad::Initialized\";\n    const instance = new classObj(options);\n    try {\n        // Works in modern browsers\n        event = new CustomEvent(eventString, { detail: { instance } });\n    } catch (err) {\n        // Works in Internet Explorer (all versions)\n        event = document.createEvent(\"CustomEvent\");\n        event.initCustomEvent(eventString, false, false, { instance });\n    }\n    window.dispatchEvent(event);\n};\n\n/* Auto initialization of one or more instances of lazyload, depending on the \n    options passed in (plain object or an array) */\nconst autoInitialize = (classObj, options) => {\n    if (!options) {\n        return;\n    }\n    if (!options.length) {\n        // Plain object\n        createInstance(classObj, options);\n    } else {\n        // Array of objects\n        for (let i = 0, optionsItem; (optionsItem = options[i]); i += 1) {\n            createInstance(classObj, optionsItem);\n        }\n    }\n};\n\nconst SRC = \"src\";\nconst SRCSET = \"srcset\";\nconst SIZES = \"sizes\";\nconst POSTER = \"poster\";\nconst ORIGINALS = \"llOriginalAttrs\";\nconst DATA = \"data\";\n\nconst statusLoading = \"loading\";\nconst statusLoaded = \"loaded\";\nconst statusApplied = \"applied\";\nconst statusEntered = \"entered\";\nconst statusError = \"error\";\nconst statusNative = \"native\";\n\nconst dataPrefix = \"data-\";\nconst statusDataName = \"ll-status\";\n\nconst getData = (element, attribute) => {\n    return element.getAttribute(dataPrefix + attribute);\n};\n\nconst setData = (element, attribute, value) => {\n    var attrName = dataPrefix + attribute;\n    if (value === null) {\n        element.removeAttribute(attrName);\n        return;\n    }\n    element.setAttribute(attrName, value);\n};\n\nconst getStatus = (element) => getData(element, statusDataName);\nconst setStatus = (element, status) => setData(element, statusDataName, status);\nconst resetStatus = (element) => setStatus(element, null);\n\nconst hasEmptyStatus = (element) => getStatus(element) === null;\nconst hasStatusLoading = (element) => getStatus(element) === statusLoading;\nconst hasStatusError = (element) => getStatus(element) === statusError;\nconst hasStatusNative = (element) => getStatus(element) === statusNative;\n\nconst statusesAfterLoading = [statusLoading, statusLoaded, statusApplied, statusError];\nconst hadStartedLoading = (element) => statusesAfterLoading.indexOf(getStatus(element)) >= 0;\n\nconst safeCallback = (callback, arg1, arg2, arg3) => {\n\tif (!callback) {\n\t\treturn;\n\t}\n\n\tif (arg3 !== undefined) {\n\t\tcallback(arg1, arg2, arg3);\n\t\treturn;\n\t}\n\tif (arg2 !== undefined) {\n\t\tcallback(arg1, arg2);\n\t\treturn;\n\t}\n\tcallback(arg1);\n};\n\nconst addClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.add(className);\n\t\treturn;\n\t}\n\telement.className += (element.className ? \" \" : \"\") + className;\n};\n\nconst removeClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.remove(className);\n\t\treturn;\n\t}\n\telement.className = element.className.\n\t\treplace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \").\n\t\treplace(/^\\s+/, \"\").\n\t\treplace(/\\s+$/, \"\");\n};\n\nconst addTempImage = (element) => {\n    element.llTempImage = document.createElement(\"IMG\");\n};\n\nconst deleteTempImage = (element) => {\n    delete element.llTempImage;\n};\n\nconst getTempImage = (element) => element.llTempImage;\n\nconst unobserve = (element, instance) => {\n    if (!instance) return;\n    const observer = instance._observer;\n    if (!observer) return;\n    observer.unobserve(element);\n};\n\nconst resetObserver = (observer) => {\n    observer.disconnect();\n};\n\nconst unobserveEntered = (element, settings, instance) => {\n    if (settings.unobserve_entered) unobserve(element, instance);\n};\n\nconst updateLoadingCount = (instance, delta) => {\n    if (!instance) return;\n    instance.loadingCount += delta;\n};\n\nconst decreaseToLoadCount = (instance) => {\n    if (!instance) return;\n    instance.toLoadCount -= 1;\n};\n\nconst setToLoadCount = (instance, value) => {\n    if (!instance) return;\n    instance.toLoadCount = value;\n};\n\nconst isSomethingLoading = (instance) => instance.loadingCount > 0;\n\nconst haveElementsToLoad = (instance) => instance.toLoadCount > 0;\n\nconst getSourceTags = (parentTag) => {\n  let sourceTags = [];\n  for (let i = 0, childTag; (childTag = parentTag.children[i]); i += 1) {\n      if (childTag.tagName === \"SOURCE\") {\n          sourceTags.push(childTag);\n      }\n  }\n  return sourceTags;\n};\n\nconst forEachPictureSource = (element, fn) => {\n  const parent = element.parentNode;\n  if (!parent || parent.tagName !== \"PICTURE\") {\n      return;\n  }\n  let sourceTags = getSourceTags(parent);\n  sourceTags.forEach(fn);\n};\n\nconst forEachVideoSource = (element, fn) => {\n  let sourceTags = getSourceTags(element);\n  sourceTags.forEach(fn);\n};\n\nconst attrsSrc = [SRC];\nconst attrsSrcPoster = [SRC, POSTER];\nconst attrsSrcSrcsetSizes = [SRC, SRCSET, SIZES];\nconst attrsData = [DATA];\n\nconst hasOriginalAttrs = (element) => !!element[ORIGINALS];\nconst getOriginalAttrs = (element) => element[ORIGINALS];\nconst deleteOriginalAttrs = (element) => delete element[ORIGINALS];\n\n// ## SAVE ##\n\nconst setOriginalsObject = (element, attributes) => {\n    if (hasOriginalAttrs(element)) {\n        return;\n    }\n    const originals = {};\n    attributes.forEach((attribute) => {\n        originals[attribute] = element.getAttribute(attribute);\n    });\n    element[ORIGINALS] = originals;\n};\n\nconst saveOriginalBackgroundStyle = (element) => {\n    if (hasOriginalAttrs(element)) {\n        return;\n    }\n    element[ORIGINALS] = { backgroundImage: element.style.backgroundImage };\n};\n\n// ## RESTORE ##\n\nconst setOrResetAttribute = (element, attrName, value) => {\n    if (!value) {\n        element.removeAttribute(attrName);\n        return;\n    }\n    element.setAttribute(attrName, value);\n};\n\nconst restoreOriginalAttrs = (element, attributes) => {\n    if (!hasOriginalAttrs(element)) {\n        return;\n    }\n    const originals = getOriginalAttrs(element);\n    attributes.forEach((attribute) => {\n        setOrResetAttribute(element, attribute, originals[attribute]);\n    });\n};\n\nconst restoreOriginalBgImage = (element) => {\n    if (!hasOriginalAttrs(element)) {\n        return;\n    }\n    const originals = getOriginalAttrs(element);\n    element.style.backgroundImage = originals.backgroundImage;\n};\n\nconst manageApplied = (element, settings, instance) => {\n    addClass(element, settings.class_applied);\n    setStatus(element, statusApplied);\n    // Instance is not provided when loading is called from static class\n    if (!instance) return;\n    if (settings.unobserve_completed) {\n        // Unobserve now because we can't do it on load\n        unobserve(element, settings);\n    }\n    safeCallback(settings.callback_applied, element, instance);\n};\n\nconst manageLoading = (element, settings, instance) => {\n    addClass(element, settings.class_loading);\n    setStatus(element, statusLoading);\n    // Instance is not provided when loading is called from static class\n    if (!instance) return;\n    updateLoadingCount(instance, +1);\n    safeCallback(settings.callback_loading, element, instance);\n};\n\nconst setAttributeIfValue = (element, attrName, value) => {\n    if (!value) {\n        return;\n    }\n    element.setAttribute(attrName, value);\n};\n\nconst setImageAttributes = (element, settings) => {\n    setAttributeIfValue(element, SIZES, getData(element, settings.data_sizes));\n    setAttributeIfValue(element, SRCSET, getData(element, settings.data_srcset));\n    setAttributeIfValue(element, SRC, getData(element, settings.data_src));\n};\n\nconst setSourcesImg = (imgEl, settings) => {\n    forEachPictureSource(imgEl, (sourceTag) => {\n        setOriginalsObject(sourceTag, attrsSrcSrcsetSizes);\n        setImageAttributes(sourceTag, settings);\n    });\n    setOriginalsObject(imgEl, attrsSrcSrcsetSizes);\n    setImageAttributes(imgEl, settings);\n};\n\nconst setSourcesIframe = (iframe, settings) => {\n    setOriginalsObject(iframe, attrsSrc);\n    setAttributeIfValue(iframe, SRC, getData(iframe, settings.data_src));\n};\n\nconst setSourcesVideo = (videoEl, settings) => {\n    forEachVideoSource(videoEl, (sourceEl) => {\n        setOriginalsObject(sourceEl, attrsSrc);\n        setAttributeIfValue(sourceEl, SRC, getData(sourceEl, settings.data_src));\n    });\n    setOriginalsObject(videoEl, attrsSrcPoster);\n\n    setAttributeIfValue(videoEl, POSTER, getData(videoEl, settings.data_poster));\n    setAttributeIfValue(videoEl, SRC, getData(videoEl, settings.data_src));\n    videoEl.load();\n};\n\nconst setSourcesObject = (object, settings) => {\n    setOriginalsObject(object, attrsData);\n    setAttributeIfValue(object, DATA, getData(object, settings.data_src));\n};\n\nconst setBackground = (element, settings, instance) => {\n    const bg1xValue = getData(element, settings.data_bg);\n    const bgHiDpiValue = getData(element, settings.data_bg_hidpi);\n    const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\n    if (!bgDataValue) return;\n    element.style.backgroundImage = `url(\"${bgDataValue}\")`;\n    getTempImage(element).setAttribute(SRC, bgDataValue);\n    manageLoading(element, settings, instance);\n};\n\n// NOTE: THE TEMP IMAGE TRICK CANNOT BE DONE WITH data-multi-bg\n// BECAUSE INSIDE ITS VALUES MUST BE WRAPPED WITH URL() AND ONE OF THEM\n// COULD BE A GRADIENT BACKGROUND IMAGE\nconst setMultiBackground = (element, settings, instance) => {\n    const bg1xValue = getData(element, settings.data_bg_multi);\n    const bgHiDpiValue = getData(element, settings.data_bg_multi_hidpi);\n    const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\n    if (!bgDataValue) {\n        return;\n    }\n    element.style.backgroundImage = bgDataValue;\n    manageApplied(element, settings, instance);\n};\n\nconst setImgsetBackground = (element, settings, instance) => {\n    const bgImgSetDataValue = getData(element, settings.data_bg_set);\n    if (!bgImgSetDataValue) {\n        return;\n    }\n    const imgSetValues = bgImgSetDataValue.split(\"|\");\n    let bgImageValues = imgSetValues.map((value) => `image-set(${value})`);\n    element.style.backgroundImage = bgImageValues.join();\n    // Temporary fix for Chromeium with the -webkit- prefix\n    if (element.style.backgroundImage === '') {\n        bgImageValues = imgSetValues.map((value) => `-webkit-image-set(${value})`);\n        element.style.backgroundImage = bgImageValues.join();\n    }\n    manageApplied(element, settings, instance);\n};\n\nconst setSourcesFunctions = {\n    IMG: setSourcesImg,\n    IFRAME: setSourcesIframe,\n    VIDEO: setSourcesVideo,\n    OBJECT: setSourcesObject\n};\n\nconst setSourcesNative = (element, settings) => {\n    const setSourcesFunction = setSourcesFunctions[element.tagName];\n    if (!setSourcesFunction) {\n        return;\n    }\n    setSourcesFunction(element, settings);\n};\n\nconst setSources = (element, settings, instance) => {\n    const setSourcesFunction = setSourcesFunctions[element.tagName];\n    if (!setSourcesFunction) {\n        return;\n    }\n    setSourcesFunction(element, settings);\n    manageLoading(element, settings, instance);\n};\n\nconst elementsWithLoadEvent = [\"IMG\", \"IFRAME\", \"VIDEO\", \"OBJECT\"];\nconst hasLoadEvent = (element) => elementsWithLoadEvent.indexOf(element.tagName) > -1;\n\nconst checkFinish = (settings, instance) => {\n    if (instance && !isSomethingLoading(instance) && !haveElementsToLoad(instance)) {\n        safeCallback(settings.callback_finish, instance);\n    }\n};\n\nconst addEventListener = (element, eventName, handler) => {\n    element.addEventListener(eventName, handler);\n    element.llEvLisnrs[eventName] = handler;\n};\n\nconst removeEventListener = (element, eventName, handler) => {\n    element.removeEventListener(eventName, handler);\n};\n\nconst hasEventListeners = (element) => {\n    return !!element.llEvLisnrs;\n};\n\nconst addEventListeners = (element, loadHandler, errorHandler) => {\n    if (!hasEventListeners(element)) element.llEvLisnrs = {};\n    const loadEventName = element.tagName === \"VIDEO\" ? \"loadeddata\" : \"load\";\n    addEventListener(element, loadEventName, loadHandler);\n    addEventListener(element, \"error\", errorHandler);\n};\n\nconst removeEventListeners = (element) => {\n    if (!hasEventListeners(element)) {\n        return;\n    }\n    const eventListeners = element.llEvLisnrs;\n    for (let eventName in eventListeners) {\n        const handler = eventListeners[eventName];\n        removeEventListener(element, eventName, handler);\n    }\n    delete element.llEvLisnrs;\n};\n\nconst doneHandler = (element, settings, instance) => {\n    deleteTempImage(element);\n    updateLoadingCount(instance, -1);\n    decreaseToLoadCount(instance);\n    removeClass(element, settings.class_loading);\n    if (settings.unobserve_completed) {\n        unobserve(element, instance);\n    }\n};\n\nconst loadHandler = (event, element, settings, instance) => {\n    const goingNative = hasStatusNative(element);\n    doneHandler(element, settings, instance);\n    addClass(element, settings.class_loaded);\n    setStatus(element, statusLoaded);\n    safeCallback(settings.callback_loaded, element, instance);\n    if (!goingNative) checkFinish(settings, instance);\n};\n\nconst errorHandler = (event, element, settings, instance) => {\n    const goingNative = hasStatusNative(element);\n    doneHandler(element, settings, instance);\n    addClass(element, settings.class_error);\n    setStatus(element, statusError);\n    safeCallback(settings.callback_error, element, instance);\n    if (settings.restore_on_error) restoreOriginalAttrs(element, attrsSrcSrcsetSizes);\n    if (!goingNative) checkFinish(settings, instance);\n};\n\nconst addOneShotEventListeners = (element, settings, instance) => {\n    const elementToListenTo = getTempImage(element) || element;\n    if (hasEventListeners(elementToListenTo)) {\n        // This happens when loading is retried twice\n        return;\n    }\n    const _loadHandler = (event) => {\n        loadHandler(event, element, settings, instance);\n        removeEventListeners(elementToListenTo);\n    };\n    const _errorHandler = (event) => {\n        errorHandler(event, element, settings, instance);\n        removeEventListeners(elementToListenTo);\n    };\n    addEventListeners(elementToListenTo, _loadHandler, _errorHandler);\n};\n\nconst loadBackground = (element, settings, instance) => {\n    addTempImage(element);\n    addOneShotEventListeners(element, settings, instance);\n    saveOriginalBackgroundStyle(element);\n    setBackground(element, settings, instance);\n    setMultiBackground(element, settings, instance);\n    setImgsetBackground(element, settings, instance);\n};\n\nconst loadRegular = (element, settings, instance) => {\n    addOneShotEventListeners(element, settings, instance);\n    setSources(element, settings, instance);\n};\n\nconst load = (element, settings, instance) => {\n    if (hasLoadEvent(element)) {\n        loadRegular(element, settings, instance);\n    } else {\n        loadBackground(element, settings, instance);\n    }\n};\n\nconst loadNative = (element, settings, instance) => {\n    element.setAttribute(\"loading\", \"lazy\");\n    addOneShotEventListeners(element, settings, instance);\n    setSourcesNative(element, settings);\n    setStatus(element, statusNative);\n};\n\nconst removeImageAttributes = (element) => {\n    element.removeAttribute(SRC);\n    element.removeAttribute(SRCSET);\n    element.removeAttribute(SIZES);\n};\n\nconst resetSourcesImg = (element) => {\n    forEachPictureSource(element, (sourceTag) => {\n        removeImageAttributes(sourceTag);\n    });\n    removeImageAttributes(element);\n};\n\nconst restoreImg = (imgEl) => {\n    forEachPictureSource(imgEl, (sourceEl) => {\n        restoreOriginalAttrs(sourceEl, attrsSrcSrcsetSizes);\n    });\n    restoreOriginalAttrs(imgEl, attrsSrcSrcsetSizes);\n};\n\nconst restoreVideo = (videoEl) => {\n    forEachVideoSource(videoEl, (sourceEl) => {\n        restoreOriginalAttrs(sourceEl, attrsSrc);\n    });\n    restoreOriginalAttrs(videoEl, attrsSrcPoster);\n    videoEl.load();\n};\n\nconst restoreIframe = (iframeEl) => {\n    restoreOriginalAttrs(iframeEl, attrsSrc);\n};\n\nconst restoreObject = (objectEl) => {\n    restoreOriginalAttrs(objectEl, attrsData);\n};\n\nconst restoreFunctions = {\n    IMG: restoreImg,\n    IFRAME: restoreIframe,\n    VIDEO: restoreVideo,\n    OBJECT: restoreObject\n};\n\nconst restoreAttributes = (element) => {\n    const restoreFunction = restoreFunctions[element.tagName];\n    if (!restoreFunction) {\n        restoreOriginalBgImage(element);\n        return;\n    }\n    restoreFunction(element);\n};\n\nconst resetClasses = (element, settings) => {\n    if (hasEmptyStatus(element) || hasStatusNative(element)) {\n        return;\n    }\n    removeClass(element, settings.class_entered);\n    removeClass(element, settings.class_exited);\n    removeClass(element, settings.class_applied);\n    removeClass(element, settings.class_loading);\n    removeClass(element, settings.class_loaded);\n    removeClass(element, settings.class_error);\n};\n\nconst restore = (element, settings) => {\n    restoreAttributes(element);\n    resetClasses(element, settings);\n    resetStatus(element);\n    deleteOriginalAttrs(element);\n};\n\nconst cancelLoading = (element, entry, settings, instance) => {\n    if (!settings.cancel_on_exit) return;\n    if (!hasStatusLoading(element)) return;\n    if (element.tagName !== \"IMG\") return; //Works only on images\n    removeEventListeners(element);\n    resetSourcesImg(element);\n    restoreImg(element);\n    removeClass(element, settings.class_loading);\n    updateLoadingCount(instance, -1);\n    resetStatus(element);\n    safeCallback(settings.callback_cancel, element, entry, instance);\n};\n\nconst onEnter = (element, entry, settings, instance) => {\n    const dontLoad = hadStartedLoading(element); /* Save status \n        before setting it, to prevent loading it again. Fixes #526. */\n    setStatus(element, statusEntered);\n    addClass(element, settings.class_entered);\n    removeClass(element, settings.class_exited);\n    unobserveEntered(element, settings, instance);\n    safeCallback(settings.callback_enter, element, entry, instance);\n    if (dontLoad) return;\n    load(element, settings, instance);\n};\n\nconst onExit = (element, entry, settings, instance) => {\n    if (hasEmptyStatus(element)) return; //Ignore the first pass, at landing\n    addClass(element, settings.class_exited);\n    cancelLoading(element, entry, settings, instance);\n    safeCallback(settings.callback_exit, element, entry, instance);\n};\n\nconst tagsWithNativeLazy = [\"IMG\", \"IFRAME\", \"VIDEO\"];\n\nconst shouldUseNative = (settings) =>\n    settings.use_native && \"loading\" in HTMLImageElement.prototype;\n\nconst loadAllNative = (elements, settings, instance) => {\n    elements.forEach((element) => {\n        if (tagsWithNativeLazy.indexOf(element.tagName) === -1) {\n            return;\n        }\n        loadNative(element, settings, instance);\n    });\n    setToLoadCount(instance, 0);\n};\n\nconst isIntersecting = (entry) => entry.isIntersecting || entry.intersectionRatio > 0;\n\nconst getObserverSettings = (settings) => ({\n    root: settings.container === document ? null : settings.container,\n    rootMargin: settings.thresholds || settings.threshold + \"px\"\n});\n\nconst intersectionHandler = (entries, settings, instance) => {\n    entries.forEach((entry) =>\n        isIntersecting(entry)\n            ? onEnter(entry.target, entry, settings, instance)\n            : onExit(entry.target, entry, settings, instance)\n    );\n};\n\nconst observeElements = (observer, elements) => {\n    elements.forEach((element) => {\n        observer.observe(element);\n    });\n};\n\nconst updateObserver = (observer, elementsToObserve) => {\n    resetObserver(observer);\n    observeElements(observer, elementsToObserve);\n};\n\nconst setObserver = (settings, instance) => {\n    if (!supportsIntersectionObserver || shouldUseNative(settings)) {\n        return;\n    }\n    instance._observer = new IntersectionObserver((entries) => {\n        intersectionHandler(entries, settings, instance);\n    }, getObserverSettings(settings));\n};\n\nconst toArray = (nodeSet) => Array.prototype.slice.call(nodeSet);\n\nconst queryElements = (settings) =>\n    settings.container.querySelectorAll(settings.elements_selector);\n\nconst excludeManagedElements = (elements) => toArray(elements).filter(hasEmptyStatus);\n\nconst hasError = (element) => hasStatusError(element);\nconst filterErrorElements = (elements) => toArray(elements).filter(hasError);\n\nconst getElementsToLoad = (elements, settings) =>\n    excludeManagedElements(elements || queryElements(settings));\n\nconst retryLazyLoad = (settings, instance) => {\n    const errorElements = filterErrorElements(queryElements(settings));\n    errorElements.forEach((element) => {\n        removeClass(element, settings.class_error);\n        resetStatus(element);\n    });\n    instance.update();\n};\n\nconst setOnlineCheck = (settings, instance) => {\n    if (!runningOnBrowser) {\n        return;\n    }\n    instance._onlineHandler = () => {\n        retryLazyLoad(settings, instance);\n    };\n    window.addEventListener(\"online\", instance._onlineHandler);\n};\n\nconst resetOnlineCheck = (instance) => {\n    if (!runningOnBrowser) {\n        return;\n    }\n    window.removeEventListener(\"online\", instance._onlineHandler);\n};\n\nconst LazyLoad = function (customSettings, elements) {\n    const settings = getExtendedSettings(customSettings);\n    this._settings = settings;\n    this.loadingCount = 0;\n    setObserver(settings, this);\n    setOnlineCheck(settings, this);\n    this.update(elements);\n};\n\nLazyLoad.prototype = {\n    update: function (givenNodeset) {\n        const settings = this._settings;\n        const elementsToLoad = getElementsToLoad(givenNodeset, settings);\n        setToLoadCount(this, elementsToLoad.length);\n\n        if (isBot || !supportsIntersectionObserver) {\n            this.loadAll(elementsToLoad);\n            return;\n        }\n        if (shouldUseNative(settings)) {\n            loadAllNative(elementsToLoad, settings, this);\n            return;\n        }\n\n        updateObserver(this._observer, elementsToLoad);\n    },\n\n    destroy: function () {\n        // Observer\n        if (this._observer) {\n            this._observer.disconnect();\n        }\n        // Clean handlers\n        resetOnlineCheck(this);\n        // Clean custom attributes on elements\n        queryElements(this._settings).forEach((element) => {\n            deleteOriginalAttrs(element);\n        });\n        // Delete all internal props\n        delete this._observer;\n        delete this._settings;\n        delete this._onlineHandler;\n        delete this.loadingCount;\n        delete this.toLoadCount;\n    },\n\n    loadAll: function (elements) {\n        const settings = this._settings;\n        const elementsToLoad = getElementsToLoad(elements, settings);\n        elementsToLoad.forEach((element) => {\n            unobserve(element, this);\n            load(element, settings, this);\n        });\n    },\n\n    restoreAll: function() {\n        const settings = this._settings;\n        queryElements(settings).forEach((element) => {\n            restore(element, settings);\n        });\n    }\n};\n\nLazyLoad.load = (element, customSettings) => {\n    const settings = getExtendedSettings(customSettings);\n    load(element, settings);\n};\n\nLazyLoad.resetStatus = (element) => {\n    resetStatus(element);\n};\n\n// Automatic instances creation if required (useful for async script loading)\nif (runningOnBrowser) {\n    autoInitialize(LazyLoad, window.lazyLoadOptions);\n}\n\nexport { LazyLoad as default };\n","const _ua = window.navigator?.userAgent;\n\nconst math = _ua?.match(/(Edge?)\\/(\\d+)/);\n\nexport const isOldEdge = () => {\n  return math && math[1] == \"Edge\" && parseInt(math[2]) < 19 ? true : false;\n};\n//  IE\nexport const isIE = () => {\n  return \"ActiveXObject\" in window;\n};\n//  webkit\nexport const isWebkit = () => {\n  return /webkit/i.test(_ua);\n};\nexport const isApple = () => {\n  return /apple/i.test(_ua.toLocaleLowerCase());\n};\nexport const isElectron = () => {\n  return /electron/i.test(_ua.toLocaleLowerCase()) && window.self === window.top;\n};\nexport const isMacOS = () => {\n  return /mac/i.test(_ua.toLocaleLowerCase());\n};\nexport const isWin = () => {\n  return /win/i.test(_ua.toLocaleLowerCase());\n};\nexport const isIOS = () => {\n  return (\n    typeof navigator !== \"undefined\" &&\n    typeof window !== \"undefined\" &&\n    /iPad|iPhone|iPod/.test(_ua)\n  );\n};\nexport const isAndroid = () => {\n  return typeof navigator !== \"undefined\" && /Android/.test(_ua);\n};\nexport const isFirefox = () => {\n  return typeof navigator !== \"undefined\" && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(_ua);\n};\nexport const isSafari = () => {\n  return typeof navigator !== \"undefined\" && /Version\\/[\\d/.]+.*Safari/.test(_ua);\n};\n\n// \"modern\" Edge was released at 79.x\nexport const isEdgeLegacy = () => {\n  return typeof navigator !== \"undefined\" && /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])/i.test(_ua);\n};\nexport const isChrome = () => {\n  return typeof navigator !== \"undefined\" && /Chrome/i.test(_ua);\n};\n// Native events don't work well with react on Chrome 75\n// and older, Chrome 76+ is ok.\nexport const isChromeLegacy = () => {\n  return typeof navigator !== \"undefined\" && /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])/i.test(_ua);\n};\nexport const isFirefoxLegacy = () => {\n  return (\n    typeof navigator !== \"undefined\" &&\n    /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(_ua)\n  );\n};\n// qq browser\nexport const is_QQBrowser = () => {\n  return typeof navigator !== \"undefined\" && /.*QQBrowser/.test(_ua);\n};\n","import { arrowLeftSVG } from \"./icons/arrow-left\";\nimport { arrowRightSVG } from \"./icons/arrow-right\";\nimport { playSVG } from \"./icons/play\";\nimport { pauseSVG } from \"./icons/pause\";\n\nimport type { AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport LazyLoad from \"vanilla-lazyload\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport type {\n  AppOptions,\n  NetlessAppDynamicDocsViewerAttributes,\n  NetlessAppStaticDocsViewerAttributes,\n} from \"..\";\nimport { isAndroid, isIOS } from \"../utils/environment\";\n\nexport interface DocsViewerPage {\n  src: string;\n  height: number;\n  width: number;\n  thumbnail?: string;\n}\n\ntype contextType = AppContext<\n  NetlessAppStaticDocsViewerAttributes | NetlessAppDynamicDocsViewerAttributes,\n  AppOptions\n>;\nexport interface DocsViewerConfig {\n  readonly: boolean;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n  onNewPageIndex: (index: number) => void;\n  onPlay?: () => void;\n  context: contextType;\n}\n\nexport class DocsViewer {\n  public constructor({ context, readonly, box, pages, onNewPageIndex, onPlay }: DocsViewerConfig) {\n    if (pages.length <= 0) {\n      throw new Error(\"[DocsViewer] Empty pages.\");\n    }\n\n    this.context = context;\n    this.readonly = readonly;\n    this.box = box;\n    this.pages = pages;\n    this.onNewPageIndex = onNewPageIndex;\n    this.onPlay = onPlay;\n    this.onPageIndexChanged = () => void 0;\n\n    this.render();\n  }\n\n  protected context: contextType;\n  protected readonly: boolean;\n  protected pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected onNewPageIndex: (index: number) => void;\n  protected onPlay?: () => void;\n\n  public $content!: HTMLElement;\n  public $preview!: HTMLElement;\n  public $previewMask!: HTMLElement;\n  public $footer!: HTMLElement;\n  public $pageNumberInput!: HTMLElement;\n  private $btnPageNext!: HTMLElement;\n  private $btnPageBack!: HTMLElement;\n\n  public pageIndex = 0;\n  public onPageIndexChanged: (index: number) => void;\n\n  public mount(): void {\n    this.box.mountContent(this.$content);\n    this.box.mountFooter(this.$footer);\n\n    // this.$footer.classList.toggle(this.wrapClassName(\"hide\"), this.box.maximized);\n    this.box.events.on(\"maximized\", max => {\n      this.$footer.classList.toggle(this.wrapClassName(\"hide\"), max);\n      // this.togglePreview(max);\n    });\n    this.$footer.classList.toggle(this.wrapClassName(\"hide\"), this.box.maximized);\n  }\n\n  public unmount(): void {\n    this.$content.remove();\n    this.$footer.remove();\n  }\n\n  public setReadonly(readonly: boolean): void {\n    if (this.readonly !== readonly) {\n      this.readonly = readonly;\n\n      this.$content.classList.toggle(this.wrapClassName(\"readonly\"), readonly);\n\n      this.$footer.classList.toggle(this.wrapClassName(\"readonly\"), readonly);\n\n      // this.$pageNumberInput.disabled = readonly;\n    }\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.unmount();\n  }\n\n  public setPageIndex(pageIndex: number): void {\n    if (!Number.isNaN(pageIndex)) {\n      this.scrollPreview(pageIndex);\n      this.pageIndex = pageIndex;\n      this.$pageNumberInput.textContent = String(pageIndex + 1);\n      this.onPageIndexChanged(pageIndex);\n      this.$btnPageBack.classList.toggle(this.wrapClassName(\"footer-btn-disable\"), pageIndex == 0);\n      this.$btnPageNext.classList.toggle(\n        this.wrapClassName(\"footer-btn-disable\"),\n        pageIndex == this.pages.length - 1\n      );\n    }\n  }\n\n  private scrollPreview(pageIndex: number) {\n    const previews = this.$preview?.querySelectorAll<HTMLElement>(\n      \".\" + this.wrapClassName(\"preview-page\")\n    );\n\n    previews?.forEach((node, i) => {\n      node\n        .querySelector(\"img\")\n        ?.classList.toggle(this.wrapClassName(\"active\"), Number(pageIndex) == i);\n    });\n\n    if (!previews) return;\n\n    const imgNode = Array.prototype.slice\n      .call(previews)\n      .find(node => node.querySelector(\"img\").className.includes(this.wrapClassName(\"active\")));\n    if (!imgNode) return;\n    const parentRect = this.$preview.getBoundingClientRect();\n    const elementRect = imgNode?.getBoundingClientRect();\n    const isInView = elementRect.top >= parentRect.top && elementRect.bottom <= parentRect.bottom;\n\n    if (!isInView) {\n      this.$preview.scrollTo({\n        top: imgNode.offsetTop - 16,\n        behavior: this.isShowPreview ? \"smooth\" : \"auto\",\n      });\n    }\n  }\n\n  public setSmallBox(isSmallBox: boolean): void {\n    if (this.isSmallBox !== isSmallBox) {\n      this.isSmallBox = isSmallBox;\n      this.$footer.classList.toggle(this.wrapClassName(\"float-footer\"), isSmallBox);\n    }\n  }\n\n  public render(): HTMLElement {\n    this.renderContent();\n    this.renderFooter();\n    return this.$content;\n  }\n\n  protected renderContent(): HTMLElement {\n    if (!this.$content) {\n      const $content = document.createElement(\"div\");\n      $content.className = this.wrapClassName(\"content\");\n      this.$content = $content;\n      if (this.readonly) {\n        $content.classList.add(this.wrapClassName(\"readonly\"));\n      }\n\n      // $content.appendChild(this.renderPreviewMask());\n      // $content.appendChild(this.renderPreview());\n    }\n    return this.$content;\n  }\n\n  protected renderPreview(): HTMLElement {\n    if (!this.$preview) {\n      const $preview = document.createElement(\"div\");\n      $preview.className = this.wrapClassName(\"preview\") + \" tele-fancy-scrollbar\";\n      this.$preview = $preview;\n\n      const title = document.createElement(\"div\");\n      title.className = this.wrapClassName(\"preview-head\");\n      const h3 = document.createElement(\"h3\");\n      h3.textContent = this.box.title;\n      title.appendChild(h3);\n      this.$preview.appendChild(title);\n\n      const pageClassName = this.wrapClassName(\"preview-page\");\n      const pageNameClassName = this.wrapClassName(\"preview-page-name\");\n      this.pages.forEach((page, i) => {\n        const previewSRC = page.thumbnail ?? (page.src.startsWith(\"ppt\") ? void 0 : page.src);\n        if (!previewSRC) {\n          return;\n        }\n\n        const pageIndex = String(i);\n\n        const $page = document.createElement(\"a\");\n        $page.className = pageClassName + \" \" + this.wrapClassName(`preview-page-${i}`);\n        $page.setAttribute(\"href\", \"#\");\n        $page.dataset.pageIndex = pageIndex;\n\n        const $name = document.createElement(\"span\");\n        $name.className = pageNameClassName;\n        $name.textContent = String(i + 1);\n        $name.dataset.pageIndex = pageIndex;\n\n        const $img = document.createElement(\"img\");\n        $img.width = page.width;\n        $img.height = page.height;\n        $img.dataset.src = previewSRC;\n        $img.dataset.pageIndex = pageIndex;\n\n        $page.appendChild($name);\n        $page.appendChild($img);\n        $preview.appendChild($page);\n        $img.classList.toggle(this.wrapClassName(\"active\"), this.pageIndex == i);\n      });\n\n      this.sideEffect.addEventListener($preview, \"click\", ev => {\n        if (this.readonly) {\n          return;\n        }\n        const pageIndex = (ev.target as HTMLElement).dataset?.pageIndex;\n        if (pageIndex) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          ev.stopImmediatePropagation();\n          this.onNewPageIndex(Number(pageIndex));\n        }\n      });\n    }\n\n    return this.$preview;\n  }\n\n  protected renderPreviewMask(): HTMLElement {\n    if (!this.$previewMask) {\n      this.$previewMask = document.createElement(\"div\");\n      this.$previewMask.className = this.wrapClassName(\"preview-mask\");\n      this.sideEffect.addEventListener(this.$previewMask, \"click\", ev => {\n        if (this.readonly) {\n          return;\n        }\n        if (ev.target === this.$previewMask) {\n          this.togglePreview(false);\n        }\n      });\n    }\n    return this.$previewMask;\n  }\n\n  protected renderFooter(): HTMLElement {\n    if (!this.$footer) {\n      const $footer = document.createElement(\"div\");\n      $footer.className = this.wrapClassName(\"footer\");\n      this.$footer = $footer;\n\n      if (this.readonly) {\n        $footer.classList.add(this.wrapClassName(\"readonly\"));\n      }\n\n      if (this.isSmallBox) {\n        $footer.classList.add(this.wrapClassName(\"float-footer\"));\n      }\n\n      const $pageJumps = document.createElement(\"div\");\n      $pageJumps.className = this.wrapClassName(\"page-jumps\");\n\n      const $btnPageBack = this.renderFooterBtn(\"btn-page-back\", arrowLeftSVG(this.namespace));\n      this.sideEffect.addEventListener($btnPageBack, \"click\", () => {\n        if (this.readonly) {\n          return;\n        }\n        this.onNewPageIndex(this.pageIndex - 1);\n      });\n      $pageJumps.appendChild($btnPageBack);\n      this.$btnPageBack = $btnPageBack;\n\n      if (this.onPlay) {\n        const $btnPlay = this.renderFooterBtn(\n          \"btn-page-play\",\n          playSVG(this.namespace),\n          pauseSVG(this.namespace)\n        );\n        const returnPlay = (): void => {\n          this.sideEffect.setTimeout(\n            () => {\n              $btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), false);\n            },\n            500,\n            \"returnPlay\"\n          );\n        };\n        this.sideEffect.addEventListener($btnPlay, \"click\", () => {\n          if (this.readonly) {\n            return;\n          }\n          $btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), true);\n          this.onPlay?.();\n          returnPlay();\n        });\n\n        if (!this.context.getIsAppReadonly() && !isIOS() && !isAndroid()) {\n          this.$footer.appendChild($btnPlay);\n        }\n      }\n      const $pageNumber = document.createElement(\"div\");\n      $pageNumber.className = this.wrapClassName(\"page-number\");\n\n      const $pageNumberInput = document.createElement(\"span\");\n      $pageNumberInput.className = this.wrapClassName(\"page-number-input\");\n      $pageNumberInput.textContent = String(this.pageIndex + 1);\n      this.$pageNumberInput = $pageNumberInput;\n\n      const $totalPage = document.createElement(\"span\");\n      $totalPage.textContent = \" / \" + this.pages.length;\n\n      $pageNumber.appendChild($pageNumberInput);\n      $pageNumber.appendChild($totalPage);\n\n      $pageJumps.appendChild($pageNumber);\n\n      const $btnPageNext = this.renderFooterBtn(\"btn-page-next\", arrowRightSVG(this.namespace));\n      this.sideEffect.addEventListener($btnPageNext, \"click\", () => {\n        if (this.readonly) {\n          return;\n        }\n        this.onNewPageIndex(this.pageIndex + 1);\n      });\n      $pageJumps.appendChild($btnPageNext);\n\n      this.$btnPageNext = $btnPageNext;\n\n      if (!this.context.getIsAppReadonly() && !isIOS() && !isAndroid()) {\n        this.$footer.appendChild($pageJumps);\n      }\n    }\n    return this.$footer;\n  }\n\n  protected renderFooterBtn(\n    className: string,\n    $icon: SVGElement,\n    $iconActive?: SVGElement\n  ): HTMLButtonElement {\n    const $btn = document.createElement(\"button\");\n    $btn.className = this.wrapClassName(\"footer-btn\") + \" \" + this.wrapClassName(className);\n\n    $btn.appendChild($icon);\n\n    if ($iconActive) {\n      $btn.appendChild($iconActive);\n    }\n\n    return $btn;\n  }\n\n  public togglePreview(isShowPreview?: boolean): void {\n    this.isShowPreview = isShowPreview ?? !this.isShowPreview;\n    console.log(this.context?.extendWrapper);\n    this.$content.classList.toggle(this.wrapClassName(\"preview-active\"), this.isShowPreview);\n    if (this.isShowPreview) {\n      if (this.context?.extendWrapper) {\n        this.context?.extendWrapper?.appendChild(this.renderPreviewMask());\n        this.context?.extendWrapper?.appendChild(this.renderPreview());\n        this.context.extendWrapper.style.display = \"block\";\n      }\n      setTimeout(() => {\n        const $previewPage = this.$preview.querySelector<HTMLElement>(\n          \".\" + this.wrapClassName(`preview-page-${this.pageIndex}`)\n        );\n\n        if ($previewPage) {\n          this.sideEffect.add(() => {\n            const previewLazyLoad = new LazyLoad({\n              container: this.$preview,\n              elements_selector: `.${this.wrapClassName(\"preview-page>img\")}`,\n            });\n            return () => previewLazyLoad.destroy();\n          }, \"preview-lazyload\");\n\n          this.$preview.scrollTo({\n            top: $previewPage.offsetTop - 16,\n          });\n        }\n\n        if ($previewPage) {\n          this.$preview.scrollTo({\n            top: $previewPage.offsetTop - 16,\n          });\n        }\n      });\n    } else {\n      if (this.context?.extendWrapper) {\n        this.context.extendWrapper.style.display = \"none\";\n        this.context.extendWrapper.innerHTML = \"\";\n      }\n    }\n  }\n\n  protected wrapClassName(className: string): string {\n    return `${this.namespace}-${className}`;\n  }\n\n  protected namespace = \"netless-app-docs-viewer\";\n\n  protected isShowPreview = false;\n\n  protected isSmallBox = false;\n\n  protected sideEffect = new SideEffectManager();\n}\n","export function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function flattenEvent(ev: MouseEvent | TouchEvent): MouseEvent | Touch {\n  return (ev as TouchEvent).touches ? (ev as TouchEvent).touches[0] : (ev as MouseEvent);\n}\n\nexport function preventEvent(ev: Event): void {\n  ev.stopPropagation();\n  if (ev.cancelable) {\n    ev.preventDefault();\n  }\n}\n\nexport function isEditable(el: EventTarget | null) {\n  if (!el) return false;\n  const tagName = (el as HTMLElement).tagName;\n  return tagName === \"INPUT\" || tagName === \"TEXTAREA\" || tagName === \"SELECT\";\n}\n","export interface StepperConfig {\n  start?: number;\n  stiffness?: number;\n  damping?: number;\n  onStep: (value: number) => void;\n}\n\nexport class Stepper {\n  public stiffness: number;\n  public damping: number;\n\n  public current: number;\n  public target: number;\n  public velocity = 0;\n  public onStep: (value: number, stepper: Stepper) => void;\n  public paused = true;\n\n  protected _animationFrameID: number | null = null;\n  protected _loopTimestamp = 0;\n\n  public constructor(config: StepperConfig) {\n    this.current = config.start ?? 0;\n    this.target = this.current;\n    this.stiffness = config.stiffness ?? 170;\n    this.damping = config.damping ?? 26;\n    this.onStep = config.onStep;\n  }\n\n  public stepTo(target: number, start?: number) {\n    if (this.paused && start != null) {\n      this.current = start;\n    }\n    this.paused = false;\n    this.target = target;\n    this.onStep(this.current, this);\n    this._loopTimestamp = Date.now();\n    window.requestAnimationFrame(this.looper);\n  }\n\n  public pause() {\n    this.paused = true;\n  }\n\n  public destroy() {\n    this.pause();\n  }\n\n  protected looper = (timestamp: number) => {\n    if (this.paused) {\n      return;\n    }\n\n    let frames = Math.floor(((timestamp - this._loopTimestamp) / 1000) * 60) + 1;\n    this._loopTimestamp = timestamp;\n    while (frames-- > 0) {\n      this.stepper();\n    }\n\n    this.onStep(this.current, this);\n\n    if (!this.paused && this.current !== this.target) {\n      window.requestAnimationFrame(this.looper);\n    }\n  };\n\n  // based on https://github.com/chenglou/react-motion/blob/master/src/stepper.js\n  protected stepper() {\n    const fSpring = -this.stiffness * (this.current - this.target);\n    const fDamper = -this.damping * this.velocity;\n    const newVelocity = this.velocity + (fSpring + fDamper) / 60;\n    const newCurrent = this.current + newVelocity / 60;\n\n    if (Math.abs(newVelocity - 0) < 0.01 && Math.abs(newCurrent - this.target) < 0.01) {\n      this.current = this.target;\n      this.velocity = 0;\n    } else {\n      this.current = newCurrent;\n      this.velocity = newVelocity;\n    }\n  }\n}\n","import type { DocsViewerPage } from \"../DocsViewer\";\n\nexport class PageEl {\n  index: number;\n  page: DocsViewerPage;\n  scale = 1;\n\n  lastVisit = Date.now();\n  $page: HTMLDivElement;\n  pageOffsetY = 0;\n  pageOffsetX = 0;\n  visible = true;\n\n  constructor(index: number, page: DocsViewerPage, scale: number, pagesIntrinsicWidth: number) {\n    this.index = index;\n    this.page = page;\n    this.scale = scale;\n    this.pageOffsetX = (pagesIntrinsicWidth - page.width) / 2;\n\n    const $page = document.createElement(\"div\");\n    $page.className = \"page-renderer-page\";\n    $page.dataset.index = `${index}`;\n    $page.style.width = `${page.width * scale}px`;\n    $page.style.height = `${page.height * scale}px`;\n    if (page.thumbnail) {\n      $page.style.backgroundImage = `url(\"${page.thumbnail}\")`;\n    }\n\n    const $img = document.createElement(\"img\");\n    $img.className = \"page-renderer-page-img\";\n    $img.width = page.width;\n    $img.height = page.height;\n    $img.src = page.src;\n\n    $page.appendChild($img);\n\n    this.$page = $page;\n  }\n\n  translateY(pageOffsetY: number): void {\n    if (Math.abs(pageOffsetY - this.pageOffsetY) >= 0.001) {\n      this.pageOffsetY = pageOffsetY;\n      this.$page.style.transform = `translate(${this.pageOffsetX * this.scale}px, ${\n        this.pageOffsetY * this.scale\n      }px)`;\n    }\n  }\n\n  setScale(scale: number): void {\n    if (Math.abs(scale - this.scale) >= 0.001) {\n      this.scale = scale;\n      this.$page.style.width = `${this.page.width * this.scale}px`;\n      this.$page.style.height = `${this.page.height * this.scale}px`;\n      this.$page.style.transform = `translate(${this.pageOffsetX * this.scale}px, ${\n        this.pageOffsetY * this.scale\n      }px)`;\n    }\n  }\n\n  setVisible(visible: boolean): void {\n    if (visible !== this.visible) {\n      this.visible = visible;\n      this.$page.style.opacity = visible ? \"1\" : \"0\";\n    }\n  }\n}\n","import type { DocsViewerPage } from \"../DocsViewer\";\nimport { PageEl } from \"./PageEl\";\n\nconst schedule: (handler: () => void) => number =\n  window.requestIdleCallback || ((handler: () => void) => window.setTimeout(handler, 5000));\n\nconst cancelSchedule = window.cancelIdleCallback || window.clearTimeout;\n\nexport class PageElManager {\n  els = new Map<number, PageEl>();\n\n  private maxElCount = 200;\n  private gcTimer: number | null = null;\n\n  constructor(\n    private pages: ReadonlyArray<DocsViewerPage>,\n    private pagesIntrinsicWidth: number,\n    private scale: number\n  ) {}\n\n  getEl(index: number): PageEl {\n    let el = this.els.get(index);\n    if (!el) {\n      el = new PageEl(index, this.pages[index], this.scale, this.pagesIntrinsicWidth);\n      this.els.set(index, el);\n    }\n    el.lastVisit = Date.now();\n\n    if (this.els.size > this.maxElCount && this.gcTimer === null) {\n      this.gcTimer = schedule(this.gc);\n    }\n\n    return el;\n  }\n\n  setScale(scale: number): void {\n    if (scale !== this.scale) {\n      this.scale = scale;\n      this.els.forEach(pageEl => pageEl.setScale(scale));\n    }\n  }\n\n  destroy() {\n    this.els.clear();\n    if (this.gcTimer !== null) {\n      cancelSchedule(this.gcTimer);\n      this.gcTimer = null;\n    }\n  }\n\n  private gc = () => {\n    this.gcTimer = null;\n\n    if (this.els.size > this.maxElCount) {\n      const sortedEls = [...this.els.values()].sort((x, y) => y.lastVisit - x.lastVisit);\n      for (let i = Math.floor(this.maxElCount / 4); i < sortedEls.length; i++) {\n        this.els.delete(sortedEls[i].index);\n      }\n    }\n  };\n}\n","import type { DocsViewerPage } from \"../DocsViewer\";\nimport { PageElManager } from \"./PageElManager\";\nimport { clamp } from \"../utils/helpers\";\n\nexport interface PageRendererConfig {\n  pagesScrollTop?: number;\n  containerWidth: number;\n  containerHeight: number;\n  pages: ReadonlyArray<DocsViewerPage>;\n  onPageIndexChanged?: (index: number) => void;\n}\n\n/**\n * High-performance renderer for large number of page images\n */\nexport class PageRenderer {\n  readonly $pages: HTMLDivElement;\n\n  readonly pages: ReadonlyArray<DocsViewerPage>;\n  readonly pagesIntrinsicYs: ReadonlyArray<number>;\n  readonly pagesIntrinsicWidth: number;\n  readonly pagesIntrinsicHeight: number;\n  readonly pagesMinHeight: number;\n\n  readonly pageElManager: PageElManager;\n\n  containerWidth: number;\n  containerHeight: number;\n\n  threshold: number;\n  scale: number;\n  pagesScrollTop: number;\n  pageScrollIndex: number;\n  onPageIndexChanged?: (index: number) => void;\n\n  constructor(config: PageRendererConfig) {\n    this.pagesScrollTop = config.pagesScrollTop || 0;\n    this.containerWidth = config.containerWidth || 1;\n    this.containerHeight = config.containerHeight || 1;\n    this.pages = config.pages.map(page => {\n      if (page.thumbnail) {\n        return page;\n      }\n      try {\n        const url = new URL(page.src);\n        url.searchParams.set(\"x-oss-process\", \"image/resize,l_50\");\n        return { ...page, thumbnail: url.toString() };\n      } catch (e) {\n        console.error(e);\n        return page;\n      }\n    });\n\n    const pagesIntrinsicYs = Array(this.pages.length);\n    let pagesMinHeight = Infinity;\n    let pagesIntrinsicWidth = 0;\n    this.pagesIntrinsicHeight = this.pages.reduce((pageY, page, i) => {\n      pagesIntrinsicYs[i] = pageY;\n      if (page.width > pagesIntrinsicWidth) {\n        pagesIntrinsicWidth = page.width;\n      }\n      if (page.height <= pagesMinHeight) {\n        pagesMinHeight = page.height;\n      }\n      return pageY + page.height;\n    }, 0);\n    this.pagesIntrinsicWidth = pagesIntrinsicWidth;\n    this.pagesMinHeight = pagesMinHeight;\n    this.pagesIntrinsicYs = pagesIntrinsicYs;\n\n    this.scale = this._calcScale();\n    this.threshold = this._calcThreshold();\n\n    this.onPageIndexChanged = config.onPageIndexChanged;\n    this.pageScrollIndex = 0;\n    if (this.pagesScrollTop !== 0) {\n      this.pageScrollIndex = this.findScrollPageIndex();\n      if (this.onPageIndexChanged && this.pageScrollIndex > 0) {\n        this.onPageIndexChanged(this.pageScrollIndex);\n      }\n    }\n\n    this.pageElManager = new PageElManager(this.pages, pagesIntrinsicWidth, this.scale);\n\n    this.$pages = this.renderPages();\n  }\n\n  setContainerSize(width: number, height: number): void {\n    if (width > 0 && height > 0) {\n      if (width !== this.containerWidth || height !== this.containerHeight) {\n        this.containerWidth = width;\n        this.containerHeight = height;\n\n        this.$pages.style.width = `${this.containerWidth}px`;\n        this.$pages.style.height = `${this.containerHeight}px`;\n\n        this.scale = this._calcScale();\n        this.threshold = this._calcThreshold();\n\n        this.pageElManager.setScale(this.scale);\n\n        if (this.$pages.parentElement) {\n          this.pagesScrollTo(this.pagesScrollTop, true);\n        }\n      }\n    }\n  }\n\n  renderPages(): HTMLDivElement {\n    const $pages = document.createElement(\"div\");\n    $pages.className = \"page-renderer-pages-container\";\n    $pages.style.width = `${this.containerWidth}px`;\n    $pages.style.height = `${this.containerHeight}px`;\n    return $pages;\n  }\n\n  pagesScrollTo(pagesScrollTop: number, force?: boolean): void {\n    pagesScrollTop = clamp(\n      pagesScrollTop,\n      0,\n      this.pagesIntrinsicHeight - this.containerHeight / this.scale\n    );\n\n    if (force || Math.abs(pagesScrollTop - this.pagesScrollTop) >= 0.001) {\n      this._turnOnHWA();\n\n      this.pagesScrollTop = pagesScrollTop;\n\n      const pageScrollIndex = this.findScrollPageIndex();\n      const startIndex = Math.max(pageScrollIndex - this.threshold, 0);\n      const endIndex = Math.min(pageScrollIndex + this.threshold, this.pages.length - 1);\n\n      for (let i = 0; i < this.$pages.children.length; i++) {\n        const $page = this.$pages.children[i] as HTMLDivElement;\n        const index = Number($page.dataset.index);\n        if (!(index >= startIndex && index <= endIndex)) {\n          $page.remove();\n          i--;\n        }\n      }\n\n      for (let i = startIndex; i <= endIndex; i++) {\n        const pageEl = this.pageElManager.getEl(i);\n        if (pageEl.$page.parentElement !== this.$pages) {\n          this.$pages.appendChild(pageEl.$page);\n        }\n        pageEl.translateY(this.pagesIntrinsicYs[i] - this.pagesScrollTop);\n      }\n\n      if (pageScrollIndex !== this.pageScrollIndex) {\n        this.pageScrollIndex = pageScrollIndex;\n        if (this.onPageIndexChanged) {\n          this.onPageIndexChanged(pageScrollIndex);\n        }\n      }\n    }\n  }\n\n  findScrollPageIndex() {\n    for (let i = 0; i < this.pagesIntrinsicYs.length; i++) {\n      if (this.pagesIntrinsicYs[i] + this.pages[i].height - this.pagesScrollTop >= 0.001) {\n        return i;\n      }\n    }\n    return this.pagesIntrinsicYs.length - 1;\n  }\n\n  mount($parent: HTMLElement): void {\n    $parent.appendChild(this.$pages);\n    this.pagesScrollTo(this.pagesScrollTop, true);\n  }\n\n  unmount(): void {\n    this.$pages.remove();\n  }\n\n  destroy() {\n    this.unmount();\n    this.onPageIndexChanged = void 0;\n    this.pageElManager.destroy();\n    if (this._hwaTimeout) {\n      window.clearTimeout(this._hwaTimeout);\n      this._hwaTimeout = NaN;\n    }\n  }\n\n  private _calcScale(): number {\n    return this.containerWidth / this.pagesIntrinsicWidth || 1;\n  }\n\n  private _calcThreshold(): number {\n    return clamp(\n      Math.ceil(this.containerHeight / this.scale / this.pagesMinHeight / 2),\n      1,\n      this.pages.length\n    );\n  }\n\n  private _hwaTimeout = NaN;\n  /** Hardware Acceleration */\n  private _turnOnHWA(): void {\n    if (this._hwaTimeout) {\n      window.clearTimeout(this._hwaTimeout);\n    } else {\n      this.$pages.classList.toggle(\"is-hwa\", true);\n    }\n    this._hwaTimeout = window.setTimeout(this._turnOffHWA, 1000);\n  }\n  private _turnOffHWA = (): void => {\n    window.clearTimeout(this._hwaTimeout);\n    this._hwaTimeout = NaN;\n    this.$pages.classList.toggle(\"is-hwa\", false);\n  };\n}\n","import { SideEffectManager } from \"side-effect-manager\";\nimport { preventEvent, flattenEvent, clamp } from \"../utils/helpers\";\n\nconst SCROLLBAR_DEFAULT_MIN_HEIGHT = 30;\n\nexport interface ScrollBarConfig {\n  pagesScrollTop?: number;\n  containerWidth: number;\n  containerHeight: number;\n  pagesWidth: number;\n  pagesHeight: number;\n  readonly: boolean;\n  scrollbarMinHeight?: number;\n  wrapClassName: (className: string) => string;\n  onDragScroll?: (pageScrollTop: number) => void;\n}\n\nexport class ScrollBar {\n  private sideEffect = new SideEffectManager();\n\n  containerWidth: number;\n  containerHeight: number;\n  readonly pagesWidth: number;\n  readonly pagesHeight: number;\n  readonly scrollbarMinHeight: number;\n  readonly: boolean;\n  wrapClassName: (className: string) => string;\n  onDragScroll?: (pageScrollTop: number) => void;\n\n  scale: number;\n  pagesScrollTop: number;\n  scrollbarHeight: number;\n\n  readonly $scrollbar: HTMLButtonElement;\n\n  constructor(config: ScrollBarConfig) {\n    this.pagesScrollTop = config.pagesScrollTop || 0;\n    this.containerWidth = config.containerWidth || 1;\n    this.containerHeight = config.containerHeight || 1;\n    this.pagesWidth = config.pagesWidth || 1;\n    this.pagesHeight = config.pagesHeight || 1;\n    this.scale = this._calcScale();\n    this.scrollbarMinHeight = config.scrollbarMinHeight || SCROLLBAR_DEFAULT_MIN_HEIGHT;\n    this.scrollbarHeight = this._calcScrollbarHeight(); // after scale is set\n    this.readonly = config.readonly;\n    this.wrapClassName = config.wrapClassName;\n    this.onDragScroll = config.onDragScroll;\n\n    this.$scrollbar = this.renderScrollbar();\n  }\n\n  mount($parent: HTMLElement): void {\n    $parent.appendChild(this.$scrollbar);\n    this.pagesScrollTo(this.pagesScrollTop, true);\n  }\n\n  unmount(): void {\n    this.$scrollbar.remove();\n  }\n\n  setReadonly(readonly: boolean): void {\n    this.readonly = readonly;\n  }\n\n  setContainerSize(width: number, height: number): void {\n    if (width > 0 && height > 0) {\n      if (width !== this.containerWidth || height !== this.containerHeight) {\n        this.containerWidth = width;\n        this.containerHeight = height;\n\n        this.scale = this._calcScale();\n        this._updateScrollbarHeight();\n\n        if (this.$scrollbar.parentElement) {\n          this.pagesScrollTo(this.pagesScrollTop, true);\n        }\n      }\n    }\n  }\n\n  pagesScrollTo(pagesScrollTop: number, force?: boolean): void {\n    pagesScrollTop = clamp(pagesScrollTop, 0, this.pagesHeight - this.containerHeight / this.scale);\n\n    if (force || Math.abs(pagesScrollTop - this.pagesScrollTop) >= 0.001) {\n      this.pagesScrollTop = pagesScrollTop;\n\n      const elScrollTop = this.pagesScrollTop * this.scale;\n      const elPagesHeight = this.pagesHeight * this.scale;\n      const translateY =\n        (elScrollTop / (elPagesHeight - this.containerHeight)) *\n        (this.containerHeight - this.scrollbarHeight);\n\n      if (window.requestAnimationFrame) {\n        window.requestAnimationFrame(() => {\n          this.$scrollbar.style.transform = `translateY(${translateY}px)`;\n        });\n      } else {\n        this.$scrollbar.style.transform = `translateY(${translateY}px)`;\n      }\n    }\n  }\n\n  destroy() {\n    this.unmount();\n    this.onDragScroll = void 0;\n    this.sideEffect.flushAll();\n  }\n\n  private renderScrollbar(): HTMLButtonElement {\n    const $scrollbar = document.createElement(\"button\");\n    $scrollbar.className = this.wrapClassName(\"scrollbar\");\n    $scrollbar.style.minHeight = `${this.scrollbarMinHeight}px`;\n    $scrollbar.style.height = `${this.scrollbarHeight}px`;\n\n    const trackStart = (ev: MouseEvent | TouchEvent): void => {\n      if (this.readonly) {\n        return;\n      }\n\n      if ((ev as MouseEvent).button != null && (ev as MouseEvent).button !== 0) {\n        // Not left mouse\n        return;\n      }\n\n      preventEvent(ev);\n\n      const draggingClassName = this.wrapClassName(\"scrollbar-dragging\");\n\n      $scrollbar.classList.toggle(draggingClassName, true);\n\n      const startTop = this.pagesScrollTop;\n\n      const { clientY: startY } = flattenEvent(ev);\n\n      const tracking = (ev: MouseEvent | TouchEvent): void => {\n        if (this.readonly) {\n          return;\n        }\n\n        const { clientY } = flattenEvent(ev);\n        const offsetY = (clientY - startY) / this.scale;\n        if (Math.abs(offsetY) > 0 && this.onDragScroll) {\n          this.onDragScroll(\n            startTop + offsetY * ((this.pagesHeight * this.scale) / this.containerHeight)\n          );\n        }\n      };\n\n      const trackEnd = (): void => {\n        $scrollbar.classList.toggle(draggingClassName, false);\n        window.removeEventListener(\"mousemove\", tracking, true);\n        window.removeEventListener(\"touchmove\", tracking, true);\n        window.removeEventListener(\"mouseup\", trackEnd, true);\n        window.removeEventListener(\"touchend\", trackEnd, true);\n        window.removeEventListener(\"touchcancel\", trackEnd, true);\n      };\n\n      window.addEventListener(\"mousemove\", tracking, true);\n      window.addEventListener(\"touchmove\", tracking, true);\n      window.addEventListener(\"mouseup\", trackEnd, true);\n      window.addEventListener(\"touchend\", trackEnd, true);\n      window.addEventListener(\"touchcancel\", trackEnd, true);\n    };\n\n    this.sideEffect.addEventListener($scrollbar, \"mousedown\", trackStart);\n    this.sideEffect.addEventListener($scrollbar, \"touchstart\", trackStart);\n\n    return $scrollbar;\n  }\n\n  private _calcScale(): number {\n    return this.containerWidth / this.pagesWidth || 1;\n  }\n\n  private _calcScrollbarHeight() {\n    return clamp(\n      (this.containerHeight / (this.pagesHeight * this.scale)) * this.containerHeight,\n      this.scrollbarMinHeight,\n      this.containerHeight\n    );\n  }\n\n  private _updateScrollbarHeight(): void {\n    const newHeight = this._calcScrollbarHeight();\n    if (Math.abs(newHeight - this.scrollbarHeight) > 0.001) {\n      this.scrollbarHeight = newHeight;\n      this.$scrollbar.style.height = `${newHeight}px`;\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { AnimationMode, AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport type { View, Size, Camera } from \"white-web-sdk\";\nimport type { DebouncedFunction, Options } from \"debounce-fn\";\nimport debounceFn from \"debounce-fn\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport { ResizeObserver as Polyfill } from \"@juggle/resize-observer\";\nimport type { DocsViewerPage } from \"../DocsViewer\";\nimport { DocsViewer } from \"../DocsViewer\";\nimport { clamp, isEditable, preventEvent } from \"../utils/helpers\";\nimport { Stepper } from \"./stepper\";\nimport { PageRenderer } from \"../PageRenderer\";\nimport { ScrollBar } from \"../ScrollBar\";\nimport type { NetlessAppStaticDocsViewerAttributes } from \"..\";\n\nconst ResizeObserver = window.ResizeObserver || Polyfill;\n\nconst RATIO_BASE_CONTAINER_HEIGHT = 640;\n\nexport interface StaticDocsViewerConfig {\n  context: AppContext<NetlessAppStaticDocsViewerAttributes>;\n  whiteboardView: View;\n  readonly: boolean;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n  mountWhiteboard: (dom: HTMLDivElement) => void;\n  /** Scroll Top of the original page */\n  pageScrollTop?: number;\n  onUserScroll?: (pageScrollTop: number) => void;\n  baseScenePath: string | undefined;\n  appId: string;\n}\n\nexport interface SavePdfConfig {\n  appId: string;\n  type: \"@netless/_request_save_pdf_\";\n}\n\nexport class StaticDocsViewer {\n  public constructor({\n    context,\n    whiteboardView,\n    readonly,\n    box,\n    pages,\n    pageScrollTop = 0,\n    mountWhiteboard,\n    onUserScroll,\n    baseScenePath,\n    appId,\n  }: StaticDocsViewerConfig) {\n    this.context = context;\n    this.whiteboardView = whiteboardView;\n    this.readonly = readonly;\n    this.box = box;\n    this.pages = pages;\n    this.baseScenePath = baseScenePath;\n    this.appId = appId;\n    this.mountWhiteboard = mountWhiteboard;\n    this._onUserScroll = onUserScroll;\n\n    const debouncedOnUserScroll = this.debounce(\n      () => {\n        this.userScrolling = false;\n        if (this._onUserScroll) {\n          this._onUserScroll(this.pageRenderer.pagesScrollTop);\n        }\n      },\n      { wait: 80 },\n      \"debounce-updateUserScroll\"\n    );\n\n    this.updateUserScroll = () => {\n      this.userScrolling = true;\n      debouncedOnUserScroll();\n    };\n\n    this.viewer = new DocsViewer({\n      context,\n      readonly,\n      box,\n      pages,\n      onNewPageIndex: this.onNewPageIndex,\n    });\n\n    const { width: containerWidth, height: containerHeight } = this.whiteboardView.size;\n\n    this.pageRenderer = new PageRenderer({\n      pagesScrollTop: pageScrollTop,\n      pages: this.pages,\n      containerWidth,\n      containerHeight,\n      onPageIndexChanged: this.viewer.setPageIndex.bind(this.viewer),\n    });\n\n    this.scrollbar = new ScrollBar({\n      pagesScrollTop: this.pageRenderer.pagesScrollTop,\n      containerWidth,\n      containerHeight,\n      pagesWidth: this.pageRenderer.pagesIntrinsicWidth,\n      pagesHeight: this.pageRenderer.pagesIntrinsicHeight,\n      readonly: this.readonly,\n      wrapClassName: this.wrapClassName.bind(this),\n      onDragScroll: pageScrollTop => {\n        this.pageScrollTo(pageScrollTop);\n        this.updateUserScroll();\n      },\n    });\n\n    this.pageScrollStepper = new Stepper({\n      start: this.pageRenderer.pagesScrollTop,\n      onStep: pageScrollTop => {\n        this.pageScrollTo(pageScrollTop);\n      },\n    });\n\n    this.render();\n  }\n\n  readonly pageRenderer: PageRenderer;\n  readonly scrollbar: ScrollBar;\n  readonly context: AppContext<NetlessAppStaticDocsViewerAttributes>;\n\n  protected sideEffect = new SideEffectManager();\n\n  protected pageScrollStepper: Stepper;\n  protected userScrolling = false;\n\n  protected readonly: boolean;\n  public pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected whiteboardView: View;\n  private readonly baseScenePath: string | undefined;\n  private readonly appId: string;\n  protected mountWhiteboard: (dom: HTMLDivElement) => void;\n\n  public _onUserScroll?: (pageScrollTop: number) => void;\n\n  public viewer: DocsViewer;\n\n  public $whiteboardView!: HTMLDivElement;\n\n  public mount(): this {\n    this.viewer.mount();\n\n    this.setupScrollListener();\n\n    const debouncedRenderRatioHeight = this.debounce(this.renderRatioHeight.bind(this), {\n      wait: 80,\n    });\n\n    this.sideEffect.add(() => {\n      const observer = new ResizeObserver(debouncedRenderRatioHeight);\n      observer.observe(this.viewer.$content);\n      return () => observer.disconnect();\n    });\n\n    // guard scroll position\n    this.sideEffect.setTimeout(() => {\n      if (!this.userScrolling) {\n        this.pageScrollTo(this.pageRenderer.pagesScrollTop);\n      }\n    }, 100);\n\n    this.sideEffect.add(() => {\n      const handleDownloadPdf = (evt: MessageEvent<SavePdfConfig>) => {\n        if (evt.data.type === \"@netless/_request_save_pdf_\" && evt.data.appId === this.appId) {\n          this.toPdf().catch(() => this.reportProgress(100, null));\n        }\n      };\n      window.addEventListener(\"message\", handleDownloadPdf);\n      return () => {\n        window.removeEventListener(\"message\", handleDownloadPdf);\n      };\n    });\n\n    return this;\n  }\n\n  public unmount(): this {\n    this.viewer.unmount();\n    return this;\n  }\n\n  public setReadonly(readonly: boolean): void {\n    if (this.readonly !== readonly) {\n      this.readonly = readonly;\n      this.viewer.setReadonly(readonly);\n      this.scrollbar.setReadonly(readonly);\n    }\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.pageScrollStepper.destroy();\n    this._onUserScroll = void 0;\n    this.unmount();\n    this.viewer.destroy();\n    this.pageRenderer.destroy();\n    this.scrollbar.destroy();\n  }\n\n  /** Sync scrollTop from writable user */\n  public syncPageScrollTop(pageScrollTop: number): void {\n    if (\n      !this.userScrolling &&\n      pageScrollTop >= 0 &&\n      Math.abs(this.pageRenderer.pagesScrollTop - pageScrollTop) > 0.01\n    ) {\n      this.pageScrollStepper.stepTo(pageScrollTop, this.pageRenderer.pagesScrollTop);\n    }\n  }\n\n  public render(): void {\n    this.pageRenderer.mount(this.viewer.$content);\n    this.viewer.$content.appendChild(this.renderWhiteboardView());\n    this.scrollbar.mount(this.viewer.$content);\n    this.renderRatioHeight();\n  }\n\n  protected renderRatioHeight(): void {\n    const boxHeight = Math.round(this.box.absoluteHeight);\n    const isSmallBox = boxHeight <= RATIO_BASE_CONTAINER_HEIGHT;\n\n    this.viewer.setSmallBox(isSmallBox);\n\n    if (isSmallBox) {\n      const titleBarSupposedHeight = 40 / RATIO_BASE_CONTAINER_HEIGHT;\n      const titleBarActualHeight = 40 / boxHeight;\n      const footerSupposedHeight = 40 / RATIO_BASE_CONTAINER_HEIGHT;\n      const footerActualHeight = 40 / boxHeight;\n\n      const emptySpace = Math.max(\n        (titleBarSupposedHeight +\n          footerSupposedHeight -\n          (titleBarActualHeight + footerActualHeight)) /\n          2,\n        0\n      );\n\n      if (this.box.$titleBar) {\n        const titleBarHeight = titleBarActualHeight + emptySpace;\n        this.box.$titleBar.style.height = `${titleBarHeight * 100}%`;\n      }\n\n      if (this.box.$footer) {\n        const footerHeight = footerActualHeight + emptySpace;\n        this.box.$footer.style.height = `${footerHeight * 100}%`;\n      }\n    } else {\n      if (this.box.$titleBar) {\n        const titleBarHeight = Math.max(40 / RATIO_BASE_CONTAINER_HEIGHT, 40 / boxHeight);\n        this.box.$titleBar.style.height = `${titleBarHeight * 100}%`;\n      }\n\n      if (this.box.$footer) {\n        const footerHeight = Math.max(40 / RATIO_BASE_CONTAINER_HEIGHT, 40 / boxHeight);\n        this.box.$footer.style.height = `${footerHeight * 100}%`;\n      }\n    }\n  }\n\n  protected renderWhiteboardView(): HTMLDivElement {\n    if (!this.$whiteboardView) {\n      this.$whiteboardView = document.createElement(\"div\");\n      this.$whiteboardView.className = this.wrapClassName(\"wb-view\");\n      this.mountWhiteboard(this.$whiteboardView);\n      this.sideEffect.addEventListener(\n        this.$whiteboardView,\n        \"wheel\",\n        ev => {\n          preventEvent(ev);\n          if (!this.readonly) {\n            this.pageScrollTo(this.pageRenderer.pagesScrollTop + ev.deltaY);\n            this.updateUserScroll();\n          }\n        },\n        { passive: false, capture: true }\n      );\n      this.sideEffect.addEventListener(\n        this.$whiteboardView,\n        \"touchmove\",\n        ev => {\n          if (this.readonly || ev.touches.length <= 1) {\n            return;\n          }\n          this.updateUserScroll();\n        },\n        { passive: true, capture: true }\n      );\n    }\n    return this.$whiteboardView;\n  }\n\n  protected scrollTopPageToEl(pageScrollTop: number): number {\n    return pageScrollTop * this.pageRenderer.scale;\n  }\n\n  protected scrollTopElToPage(elScrollTop: number): number {\n    return elScrollTop / this.pageRenderer.scale;\n  }\n\n  /** Scroll base on DOM rect */\n  protected elScrollTo(elScrollTop: number): void {\n    this.pageScrollTo(this.scrollTopElToPage(elScrollTop));\n  }\n\n  /** Scroll base on docs size */\n  protected pageScrollTo(pageScrollTop: number): void {\n    const halfWbHeight = this.scrollTopElToPage(this.whiteboardView.size.height / 2);\n    this.whiteboardView.moveCamera({\n      centerY: clamp(\n        pageScrollTop + halfWbHeight,\n        halfWbHeight,\n        this.pageRenderer.pagesIntrinsicHeight - halfWbHeight\n      ),\n      animationMode: \"immediately\" as AnimationMode,\n    });\n  }\n\n  protected scrollToPage(index: number): void {\n    if (!this.readonly && !Number.isNaN(index)) {\n      const offsetY = this.pageRenderer.pagesIntrinsicYs[index];\n      if (offsetY >= 0) {\n        this.pageScrollTo(offsetY + 5 / this.pageRenderer.scale);\n        this.updateUserScroll();\n      }\n    }\n  }\n\n  protected setupScrollListener(): void {\n    this.sideEffect.add(() => {\n      const handleCameraUpdate = (camera: Camera) => {\n        const { width: wbWidth, height: wbHeight } = this.whiteboardView.size;\n        if (wbWidth <= 0 || wbHeight <= 0) {\n          return;\n        }\n\n        const pagesScrollTop =\n          camera.centerY - this.pageRenderer.containerHeight / this.pageRenderer.scale / 2;\n\n        this.pageRenderer.pagesScrollTo(pagesScrollTop);\n        this.scrollbar.pagesScrollTo(pagesScrollTop);\n      };\n      this.whiteboardView.callbacks.on(\"onCameraUpdated\", handleCameraUpdate);\n      return () => this.whiteboardView.callbacks.off(\"onCameraUpdated\", handleCameraUpdate);\n    });\n\n    // Handle drag event (hand tool).\n    this.sideEffect.add(() => {\n      const { updateUserScroll } = this;\n      this.whiteboardView.callbacks.on(\"onCameraUpdatedByDevice\", updateUserScroll);\n      return () => this.whiteboardView.callbacks.off(\"onCameraUpdatedByDevice\", updateUserScroll);\n    });\n\n    this.sideEffect.add(() => {\n      const handleSizeUpdate = ({ width: wbWidth, height: wbHeight }: Size): void => {\n        if (wbWidth <= 0 || wbHeight <= 0) {\n          return;\n        }\n\n        this.pageRenderer.setContainerSize(wbWidth, wbHeight);\n        this.scrollbar.setContainerSize(wbWidth, wbHeight);\n\n        const { pagesIntrinsicWidth, pagesIntrinsicHeight } = this.pageRenderer;\n\n        this.whiteboardView.moveCameraToContain({\n          originX: 0,\n          originY: this.pageRenderer.pagesScrollTop,\n          width: pagesIntrinsicWidth,\n          height: wbHeight / this.pageRenderer.scale,\n          animationMode: \"immediately\" as AnimationMode,\n        });\n\n        this.whiteboardView.setCameraBound({\n          damping: 1,\n          maxContentMode: () => this.pageRenderer.scale,\n          minContentMode: () => this.pageRenderer.scale,\n          centerX: pagesIntrinsicWidth / 2,\n          centerY: pagesIntrinsicHeight / 2,\n          width: pagesIntrinsicWidth,\n          height: pagesIntrinsicHeight,\n        });\n      };\n      this.whiteboardView.callbacks.on(\"onSizeUpdated\", handleSizeUpdate);\n      return () => {\n        this.whiteboardView.callbacks.off(\"onSizeUpdated\", handleSizeUpdate);\n      };\n    }, \"whiteboard-size-update\");\n\n    this.sideEffect.addEventListener(\n      window,\n      \"keyup\",\n      ev => {\n        if (this.readonly || !this.box.focus || this.box.minimized || isEditable(ev.target)) {\n          return;\n        }\n        let newPageScrollTop: number | null = null;\n        switch (ev.key) {\n          case \"PageDown\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop +\n              this.pageRenderer.containerHeight / this.pageRenderer.scale;\n            break;\n          }\n          case \"PageUp\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop -\n              this.pageRenderer.containerHeight / this.pageRenderer.scale;\n            break;\n          }\n          case \"ArrowDown\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop +\n              this.pageRenderer.containerHeight / 4 / this.pageRenderer.scale;\n            break;\n          }\n          case \"ArrowUp\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop -\n              this.pageRenderer.containerHeight / 4 / this.pageRenderer.scale;\n            break;\n          }\n          default:\n            break;\n        }\n        if (newPageScrollTop !== null) {\n          if (this._onUserScroll) {\n            // this will trigger stepper for smooth scrolling effect\n            this._onUserScroll(newPageScrollTop);\n          } else {\n            this.pageScrollTo(newPageScrollTop);\n            this.updateUserScroll();\n          }\n        }\n      },\n      { capture: true }\n    );\n  }\n\n  protected debounce<ArgumentsType extends unknown[], ReturnType>(\n    fn: (...args: ArgumentsType) => ReturnType,\n    options?: Options,\n    disposerID?: string\n  ): DebouncedFunction<ArgumentsType, ReturnType | undefined> {\n    const dFn = debounceFn(fn, options);\n    this.sideEffect.addDisposer(() => dFn.cancel(), disposerID);\n    return dFn;\n  }\n\n  protected updateUserScroll: () => void;\n\n  protected wrapClassName(className: string): string {\n    return \"netless-app-docs-viewer-static-\" + className;\n  }\n\n  protected onNewPageIndex = (index: number): void => {\n    this.scrollToPage(index);\n  };\n\n  private async getBase64FromUrl(url: string): Promise<string> {\n    const data = await fetch(this._invalidate(url));\n    const blob = await data.blob();\n    return new Promise(resolve => {\n      const reader = new FileReader();\n      reader.readAsDataURL(blob);\n      reader.onloadend = () => {\n        const base64data = reader.result as string;\n        resolve(base64data);\n      };\n    });\n  }\n\n  private _invalidate(url: string): string {\n    try {\n      const a = new URL(url);\n      a.searchParams.set(\"t\", Date.now().toString());\n      return a.toString();\n    } catch {\n      return url;\n    }\n  }\n\n  private reportProgress(progress: number, result: { pdf: ArrayBuffer; title: string } | null) {\n    window.postMessage({\n      type: \"@netless/_result_save_pdf_\",\n      appId: this.appId,\n      progress,\n      result,\n    });\n  }\n\n  public toPdf = async () => {\n    const whiteSnapshotCanvas = document.createElement(\"canvas\");\n    const whiteCtx = whiteSnapshotCanvas.getContext(\"2d\");\n    if (!whiteCtx || !this.baseScenePath) {\n      this.reportProgress(100, null);\n      return;\n    }\n    const scenePath = this.whiteboardView.focusScenePath || `${this.baseScenePath}/1`;\n    const firstPage = this.pages[0];\n    const { jsPDF } = await import(\"jspdf\");\n    const pdf = new jsPDF({\n      format: [firstPage.width, firstPage.height],\n      orientation: firstPage.width > firstPage.height ? \"l\" : \"p\",\n      compress: true,\n    });\n\n    for (const [index, page] of this.pages.entries()) {\n      const { width, height, src } = page;\n      whiteSnapshotCanvas.width = width;\n      whiteSnapshotCanvas.height = height;\n      const orientation = width > height ? \"l\" : \"p\";\n\n      if (index > 0) {\n        pdf.addPage([width, height], orientation);\n      }\n\n      const pdfPageSrc = await this.getBase64FromUrl(src);\n      const img = document.createElement(\"img\");\n      img.src = pdfPageSrc;\n      await new Promise(resolve => (img.onload = resolve));\n      whiteCtx.drawImage(img, 0, 0);\n      const pdfPageBase64 = whiteSnapshotCanvas.toDataURL(\"image/jpeg\", 0.6);\n      whiteCtx.clearRect(0, 0, width, height);\n      const camera = {\n        centerX: width / 2,\n        centerY: height / 2 + index * height,\n        scale: 1,\n      };\n      // appliancePlugin is a performance optimization for whiteboard;\n      const windowManger = (this.context as any).manager.windowManger as any;\n      if (windowManger._appliancePlugin) {\n        await windowManger._appliancePlugin.screenshotToCanvasAsync(\n          whiteCtx,\n          scenePath,\n          width,\n          height,\n          camera\n        );\n      } else {\n        this.whiteboardView.screenshotToCanvas(whiteCtx, scenePath, width, height, camera);\n      }\n      const snapshot = whiteSnapshotCanvas.toDataURL(\"image/png\");\n      pdf.addImage(pdfPageBase64, \"JPEG\", 0, 0, width, height, \"\", \"FAST\");\n      pdf.addImage(snapshot, \"PNG\", 0, 0, width, height, \"\", \"FAST\");\n\n      whiteCtx.clearRect(0, 0, width, height);\n      const progress = Math.ceil(((index + 1) / this.pages.length) * 100);\n      if (progress < 100) {\n        this.reportProgress(Math.ceil(((index + 1) / this.pages.length) * 100), null);\n      }\n    }\n    const dataUrl = pdf.output(\"arraybuffer\");\n    this.reportProgress(100, { pdf: dataUrl, title: this.box.title });\n  };\n}\n","import type {\n  ReadonlyTeleBox,\n  View,\n  Displayer,\n  AnimationMode,\n  AppContext,\n  SceneState,\n  PageState,\n} from \"@netless/window-manager\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport type { DocsViewerPage } from \"../DocsViewer\";\nimport { DocsViewer } from \"../DocsViewer\";\nimport { clamp, isEditable } from \"../utils/helpers\";\n\nexport interface DynamicDocsViewerConfig {\n  context: AppContext;\n  whiteboardView: View;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n}\n\nexport class DynamicDocsViewer {\n  public constructor({ context, whiteboardView, box, pages }: DynamicDocsViewerConfig) {\n    this.context = context;\n    this.whiteboardView = whiteboardView;\n    this.box = box;\n    this.pages = pages;\n    this.displayer = context.getDisplayer();\n\n    this.viewer = new DocsViewer({\n      context,\n      readonly: !context.getIsWritable(),\n      box,\n      pages,\n      onNewPageIndex: this.onNewPageIndex,\n      onPlay: this.onPlayPPT,\n    });\n\n    this.render();\n\n    this.sideEffect.add(() => {\n      const handler = (isWritable: boolean): void => {\n        this.viewer.setReadonly(!isWritable);\n      };\n      this.context.emitter.on(\"writableChange\", handler);\n      return () => this.context.emitter.off(\"writableChange\", handler);\n    });\n\n    this.sideEffect.add(() => {\n      const handler = (sceneState: SceneState) => {\n        this.jumpToPage(sceneState.index);\n      };\n      this.context.emitter.on(\"sceneStateChange\", handler);\n      return () => this.context.emitter.off(\"sceneStateChange\", handler);\n    });\n    this.sideEffect.add(() => {\n      const handler = (pageState: PageState) => {\n        this.jumpToPage(pageState.index);\n      };\n      this.context.emitter.on(\"pageStateChange\", handler);\n      return () => this.context.emitter.off(\"pageStateChange\", handler);\n    });\n\n    this.sideEffect.add(() => {\n      const handler = (visible?: boolean) => {\n        this.viewer.togglePreview(visible);\n      };\n      this.context.emitter.on(\"togglePreview\", handler);\n      return () => this.context.emitter.off(\"togglePreview\", handler);\n    });\n  }\n\n  protected sideEffect = new SideEffectManager();\n\n  protected context: AppContext;\n  public pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected whiteboardView: View;\n  protected displayer: Displayer;\n\n  public viewer: DocsViewer;\n\n  public $mask!: HTMLElement;\n  public $whiteboardView!: HTMLDivElement;\n\n  public mount(): this {\n    this.viewer.mount();\n\n    const pageIndex = this.getPageIndex();\n    if (pageIndex !== 0) {\n      this.jumpToPage(pageIndex);\n    }\n\n    this.scaleDocsToFit();\n    this.sideEffect.add(() => {\n      this.whiteboardView.callbacks.on(\"onSizeUpdated\", this.scaleDocsToFit);\n      return () => {\n        this.whiteboardView.callbacks.off(\"onSizeUpdated\", this.scaleDocsToFit);\n      };\n    });\n\n    return this;\n  }\n\n  public unmount(): this {\n    this.viewer.unmount();\n    return this;\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.unmount();\n    this.viewer.destroy();\n  }\n\n  public getPageIndex(): number {\n    return this.displayer.state.sceneState.index;\n  }\n\n  public jumpToPage(index: number, reset?: boolean): void {\n    index = clamp(index, 0, this.pages.length - 1);\n    if (index !== this.getPageIndex()) {\n      if (this.context.getIsWritable()) {\n        const initScenePath = this.context.getInitScenePath();\n        const scene = this.context.getScenes()?.[index]?.name;\n        if (initScenePath && scene) {\n          this.context.setScenePath(`${initScenePath}/${scene}`);\n        }\n        this.scaleDocsToFit();\n      }\n    }\n    if (index !== this.viewer.pageIndex) {\n      this.viewer.setPageIndex(index);\n    }\n    if (reset) {\n      const room = this.context.getRoom();\n      if (room) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const pptState = (room.state.globalState as any).__pptState;\n        room.setGlobalState({\n          __pptState: pptState && {\n            uuid: pptState.uuid,\n            pageIndex: index,\n            disableAutoPlay: pptState.disableAutoPlay,\n          },\n        });\n      }\n    }\n  }\n\n  public onPlayPPT = (): void => {\n    const room = this.context.getRoom();\n    if (room) {\n      room.pptNextStep();\n    }\n  };\n\n  public render(): void {\n    this.viewer.$content.appendChild(this.renderMask());\n    this.viewer.$content.appendChild(this.renderWhiteboardView());\n    this.sideEffect.addEventListener(window, \"keydown\", ev => {\n      if (this.box.focus && !isEditable(ev.target)) {\n        switch (ev.key) {\n          case \"ArrowUp\":\n          case \"ArrowLeft\": {\n            this.jumpToPage(this.getPageIndex() - 1, true);\n            break;\n          }\n          case \"ArrowRight\":\n          case \"ArrowDown\": {\n            this.context.getRoom()?.pptNextStep();\n            break;\n          }\n          default: {\n            break;\n          }\n        }\n      }\n    });\n  }\n\n  protected renderMask(): HTMLElement {\n    if (!this.$mask) {\n      const $mask = document.createElement(\"div\");\n      $mask.className = this.wrapClassName(\"mask\");\n      this.$mask = $mask;\n\n      const $back = document.createElement(\"button\");\n      $back.className = this.wrapClassName(\"back\");\n\n      const $next = document.createElement(\"button\");\n      $next.className = this.wrapClassName(\"next\");\n\n      // this.$mask.appendChild($back)\n      // this.$mask.appendChild($next)\n    }\n    return this.$mask;\n  }\n\n  protected renderWhiteboardView(): HTMLDivElement {\n    if (!this.$whiteboardView) {\n      this.$whiteboardView = document.createElement(\"div\");\n      this.$whiteboardView.className = this.wrapClassName(\"wb-view\");\n      this.sideEffect.addEventListener(this.$whiteboardView, \"click\", ev => {\n        const room = this.context.getRoom();\n        if (room && room.state.memberState.currentApplianceName === \"clicker\") {\n          for (let el = ev.target as HTMLElement | null; el; el = el.parentElement) {\n            if (el.classList?.contains(\"ppt-event-source\")) {\n              return;\n            }\n          }\n          room.pptNextStep();\n        }\n      });\n      this.context.mountView(this.$whiteboardView);\n    }\n    return this.$whiteboardView;\n  }\n\n  protected _scaleDocsToFitImpl = (): void => {\n    const page = this.pages[this.getPageIndex()];\n    if (page) {\n      this.whiteboardView.moveCameraToContain({\n        originX: -page.width / 2,\n        originY: -page.height / 2,\n        width: page.width,\n        height: page.height,\n        animationMode: \"immediately\" as AnimationMode,\n      });\n      this.whiteboardView.setCameraBound({\n        damping: 1,\n        maxContentMode: () => this.whiteboardView.camera.scale,\n        minContentMode: () => this.whiteboardView.camera.scale,\n        centerX: 0,\n        centerY: 0,\n        width: page.width,\n        height: page.height,\n      });\n    }\n  };\n\n  protected _scaleDocsToFitDebounced = (): void => {\n    this.sideEffect.setTimeout(this._scaleDocsToFitImpl, 1000, \"_scaleDocsToFitDebounced\");\n  };\n\n  protected scaleDocsToFit = (): void => {\n    this._scaleDocsToFitImpl();\n    this._scaleDocsToFitDebounced();\n  };\n\n  protected onNewPageIndex = (index: number): void => {\n    this.jumpToPage(index, true);\n  };\n\n  protected wrapClassName(className: string): string {\n    return \"netless-app-docs-viewer-dynamic-\" + className;\n  }\n}\n","export const kind = \"DocsViewer\";\n","import styles from \"./style.scss?inline\";\n\nimport type { NetlessApp, AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport type { View, Size } from \"white-web-sdk\";\nimport { StaticDocsViewer } from \"./StaticDocsViewer\";\nimport type { DocsViewerPage } from \"./DocsViewer\";\nimport { DynamicDocsViewer } from \"./DynamicDocsViewer\";\nimport { kind } from \"./constants\";\n\nexport type { DocsViewerPage } from \"./DocsViewer\";\n\nexport interface NetlessAppStaticDocsViewerAttributes {\n  /** ScrollTop base on the real page size */\n  pageScrollTop?: number;\n}\n\nexport interface AppResult {\n  viewer: () => StaticDocsViewer | DynamicDocsViewer | null;\n  position: () => [page: number, length: number] | undefined;\n  nextStep?: () => void;\n  prevStep?: () => void;\n  nextPage?: () => void;\n  prevPage?: () => void;\n  jumpToPage?: (page: number) => void;\n  togglePreview?: (visible?: boolean) => void;\n}\n\nexport interface NetlessAppDynamicDocsViewerAttributes {}\n\nexport interface AppOptions {}\n\nexport type MagixEvents = {\n  [key: string]: string;\n};\n\nconst NetlessAppDocsViewer: NetlessApp<\n  NetlessAppStaticDocsViewerAttributes | NetlessAppDynamicDocsViewerAttributes,\n  MagixEvents,\n  AppOptions,\n  AppResult\n> = {\n  kind,\n  setup(context) {\n    const box = context.getBox();\n\n    const scenes = context.getScenes();\n    if (!scenes) {\n      throw new Error(\"[Docs Viewer]: scenes not found.\");\n    }\n\n    const whiteboardView = context.getView();\n\n    if (!whiteboardView) {\n      throw new Error(\"[Docs Viewer]: no whiteboard view.\");\n    }\n\n    const pages = scenes\n      .map(({ ppt }): DocsViewerPage | null =>\n        ppt\n          ? {\n              width: ppt.width,\n              height: ppt.height,\n              src: ppt.src,\n              thumbnail: ppt.previewURL,\n            }\n          : null\n      )\n      .filter((page): page is DocsViewerPage => Boolean(page));\n\n    if (pages.length <= 0) {\n      throw new Error(\"[Docs Viewer]: empty scenes.\");\n    }\n\n    box.mountStyles(styles);\n\n    if (pages[0].src.startsWith(\"ppt\")) {\n      return setupDynamicDocsViewer(\n        context as AppContext<NetlessAppDynamicDocsViewerAttributes>,\n        whiteboardView,\n        box,\n        pages\n      );\n    } else {\n      return setupStaticDocsViewer(\n        context as AppContext<NetlessAppStaticDocsViewerAttributes>,\n        whiteboardView,\n        box,\n        pages\n      );\n    }\n  },\n};\n\nexport default NetlessAppDocsViewer;\n\nfunction setupStaticDocsViewer(\n  context: AppContext<NetlessAppStaticDocsViewerAttributes>,\n  whiteboardView: View,\n  box: ReadonlyTeleBox,\n  pages: DocsViewerPage[]\n): AppResult {\n  whiteboardView.disableCameraTransform = !context.getIsWritable();\n\n  const docsViewer = new StaticDocsViewer({\n    context,\n    whiteboardView,\n    readonly: !context.getIsWritable(),\n    box,\n    pages: pages,\n    pageScrollTop: context.getAttributes()?.pageScrollTop,\n    mountWhiteboard: context.mountView.bind(context),\n    onUserScroll: pageScrollTop => {\n      if (context.getAttributes()?.pageScrollTop !== pageScrollTop && !box.readonly) {\n        context.updateAttributes([\"pageScrollTop\"], pageScrollTop);\n      }\n    },\n    baseScenePath: context.getInitScenePath(),\n    appId: context.appId,\n  }).mount();\n\n  docsViewer.viewer.onPageIndexChanged = index => {\n    context.dispatchAppEvent(\"pageStateChange\", { index, length: pages.length });\n  };\n\n  context.dispatchAppEvent(\"pageStateChange\", {\n    index: docsViewer.viewer.pageIndex,\n    length: pages.length,\n  });\n\n  if (import.meta.env.DEV) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).docsViewer = docsViewer;\n  }\n\n  context.emitter.on(\"attributesUpdate\", attributes => {\n    if (attributes) {\n      if (attributes.pageScrollTop != null) {\n        docsViewer.syncPageScrollTop(attributes.pageScrollTop);\n      }\n    }\n  });\n\n  context.emitter.on(\"writableChange\", isWritable => {\n    docsViewer.setReadonly(!isWritable);\n    whiteboardView.disableCameraTransform = !isWritable;\n  });\n  return {\n    viewer: () => {\n      return docsViewer;\n    },\n    position: () => {\n      const controller = docsViewer?.viewer;\n      if (controller) {\n        return [controller.pageIndex, docsViewer.pages.length] as [page: number, length: number];\n      }\n    },\n  };\n}\n\nfunction setupDynamicDocsViewer(\n  context: AppContext<NetlessAppDynamicDocsViewerAttributes>,\n  whiteboardView: View,\n  box: ReadonlyTeleBox,\n  pages: DocsViewerPage[]\n): AppResult {\n  whiteboardView.disableCameraTransform = true;\n\n  const docsViewer = new DynamicDocsViewer({\n    context,\n    whiteboardView,\n    box,\n    pages,\n  }).mount();\n\n  docsViewer.viewer.onPageIndexChanged = index => {\n    context.dispatchAppEvent(\"pageStateChange\", { index, length: pages.length });\n  };\n\n  context.dispatchAppEvent(\"pageStateChange\", {\n    index: docsViewer.getPageIndex(),\n    length: pages.length,\n  });\n\n  context.mountView(docsViewer.$whiteboardView);\n\n  if (context.isAddApp) {\n    whiteboardView.callbacks.once(\n      \"onSizeUpdated\",\n      ({ width: contentWidth, height: contentHeight }: Size) => {\n        if (pages.length > 0 && box.state !== \"maximized\") {\n          const { width: pageWidth, height: pageHeight } = pages[0];\n          const preferHeight = (pageHeight / pageWidth) * contentWidth;\n          const diff = preferHeight - contentHeight;\n          if (diff !== 0 && context.getIsWritable()) {\n            context.emitter.emit(\"setBoxSize\", {\n              width: box.width,\n              height: box.height + diff / box.containerRect.height,\n            });\n          }\n        }\n      }\n    );\n  }\n\n  if (import.meta.env.DEV) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).docsViewer = docsViewer;\n  }\n\n  return {\n    viewer: () => {\n      return docsViewer;\n    },\n    position: () => {\n      const controller = docsViewer?.viewer;\n      if (controller) {\n        return [controller.pageIndex, docsViewer.pages.length] as [page: number, length: number];\n      }\n    },\n    nextStep: () => {\n      return docsViewer.onPlayPPT();\n    },\n    nextPage: () => {\n      return docsViewer.jumpToPage(docsViewer.getPageIndex() + 1, true);\n    },\n    prevPage: () => {\n      return docsViewer.jumpToPage(docsViewer.getPageIndex() + 1, true);\n    },\n    jumpToPage: (pageIndex?: number) => {\n      if (typeof pageIndex == \"number\") {\n        docsViewer.jumpToPage(pageIndex, true);\n      }\n    },\n    togglePreview: (visible?: boolean) => {\n      docsViewer.viewer.togglePreview(visible);\n    },\n  };\n}\n"],"names":["mimicFn","ResizeObserver","Polyfill"],"mappings":"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"}