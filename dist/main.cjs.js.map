{"version":3,"file":"main.cjs.js","sources":["../../../node_modules/.pnpm/mimic-fn@4.0.0/node_modules/mimic-fn/index.js","../../../node_modules/.pnpm/debounce-fn@5.1.2/node_modules/debounce-fn/index.js","../../../node_modules/.pnpm/side-effect-manager@1.2.2/node_modules/side-effect-manager/dist/index.mjs","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/freeze.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/element.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/global.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/process.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/scheduler.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObservation.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserver.js","../src/DocsViewer/icons/arrow-left.ts","../src/DocsViewer/icons/arrow-right.ts","../src/DocsViewer/icons/play.ts","../src/DocsViewer/icons/pause.ts","../../../node_modules/.pnpm/vanilla-lazyload@17.9.0/node_modules/vanilla-lazyload/dist/lazyload.esm.js","../src/utils/environment.ts","../src/DocsViewer/index.ts","../src/utils/helpers.ts","../src/StaticDocsViewer/stepper.ts","../src/PageRenderer/PageEl.ts","../src/PageRenderer/PageElManager.ts","../src/PageRenderer/index.ts","../src/ScrollBar/index.ts","../src/StaticDocsViewer/index.ts","../src/DynamicDocsViewer/index.ts","../src/constants.ts","../src/index.ts"],"sourcesContent":["const copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\t// `Function#arguments` and `Function#caller` should not be copied. They were reported to be present in `Reflect.ownKeys` for some devices in React Native (#41), so we explicitly ignore them here.\n\tif (property === 'arguments' || property === 'caller') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n// - one its descriptors is changed\n// - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable &&\n\t\ttoDescriptor.enumerable === fromDescriptor.enumerable &&\n\t\ttoDescriptor.configurable === fromDescriptor.configurable &&\n\t\t(toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tObject.defineProperty(to, 'toString', {...toStringDescriptor, value: newToString});\n};\n\nexport default function mimicFunction(to, from, {ignoreNonConfigurable = false} = {}) {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n}\n","import mimicFn from 'mimic-fn';\n\nconst debounceFn = (inputFunction, options = {}) => {\n\tif (typeof inputFunction !== 'function') {\n\t\tthrow new TypeError(`Expected the first argument to be a function, got \\`${typeof inputFunction}\\``);\n\t}\n\n\tconst {\n\t\twait = 0,\n\t\tmaxWait = Number.POSITIVE_INFINITY,\n\t\tbefore = false,\n\t\tafter = true,\n\t} = options;\n\n\tif (!before && !after) {\n\t\tthrow new Error('Both `before` and `after` are false, function wouldn\\'t be called.');\n\t}\n\n\tlet timeout;\n\tlet maxTimeout;\n\tlet result;\n\n\tconst debouncedFunction = function (...arguments_) {\n\t\tconst context = this; // eslint-disable-line unicorn/no-this-assignment\n\n\t\tconst later = () => {\n\t\t\ttimeout = undefined;\n\n\t\t\tif (maxTimeout) {\n\t\t\t\tclearTimeout(maxTimeout);\n\t\t\t\tmaxTimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst maxLater = () => {\n\t\t\tmaxTimeout = undefined;\n\n\t\t\tif (timeout) {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst shouldCallNow = before && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (maxWait > 0 && maxWait !== Number.POSITIVE_INFINITY && !maxTimeout) {\n\t\t\tmaxTimeout = setTimeout(maxLater, maxWait);\n\t\t}\n\n\t\tif (shouldCallNow) {\n\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tmimicFn(debouncedFunction, inputFunction);\n\n\tdebouncedFunction.cancel = () => {\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = undefined;\n\t\t}\n\n\t\tif (maxTimeout) {\n\t\t\tclearTimeout(maxTimeout);\n\t\t\tmaxTimeout = undefined;\n\t\t}\n\t};\n\n\treturn debouncedFunction;\n};\n\nexport default debounceFn;\n","// src/gen-uid.ts\nvar SOUP = \"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\nvar SOUP_LEN = 87;\nvar ID_LEN = 20;\nvar reusedIdCarrier = [];\nvar genUID = () => {\n  for (let i = 0; i < ID_LEN; i++) {\n    reusedIdCarrier[i] = SOUP.charAt(Math.random() * SOUP_LEN);\n  }\n  return reusedIdCarrier.join(\"\");\n};\n\n// src/utils.ts\nfunction invoke(fn) {\n  try {\n    return fn();\n  } catch (e) {\n    console.error(e);\n  }\n}\n\n// src/side-effect-manager.ts\nvar SideEffectManager = class {\n  constructor() {\n    /**\n     * @alias addDisposer\n     * Add a disposer directly.\n     * @param disposer a disposer or a list of disposers\n     * @param disposerID Optional id for the disposer\n     * @returns disposerID\n     */\n    this.push = this.addDisposer;\n    /**\n     * All disposers. Use this only when you know what you are doing.\n     */\n    this.disposers = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Add a disposer directly.\n   * @param disposer a disposer or a list of disposers\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  addDisposer(disposer, disposerID = this.genUID()) {\n    this.flush(disposerID);\n    this.disposers.set(\n      disposerID,\n      Array.isArray(disposer) ? joinDisposers(disposer) : disposer\n    );\n    return disposerID;\n  }\n  /**\n   * Add a side effect.\n   * @param executor Executes side effect. Return a disposer or a list of disposers. Returns null or false to ignore.\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  add(executor, disposerID = this.genUID()) {\n    const disposers = executor();\n    return disposers ? this.addDisposer(disposers, disposerID) : disposerID;\n  }\n  addEventListener(el, type, listener, options, disposerID = this.genUID()) {\n    el.addEventListener(type, listener, options);\n    this.addDisposer(\n      () => el.removeEventListener(type, listener, options),\n      disposerID\n    );\n    return disposerID;\n  }\n  /**\n   * Sugar for setTimeout.\n   * @param handler\n   * @param timeout\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  setTimeout(handler, timeout, disposerID = this.genUID()) {\n    const ticket = window.setTimeout(() => {\n      this.remove(disposerID);\n      handler();\n    }, timeout);\n    return this.addDisposer(() => window.clearTimeout(ticket), disposerID);\n  }\n  /**\n   * Sugar for setInterval.\n   * @param handler\n   * @param timeout\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  setInterval(handler, timeout, disposerID = this.genUID()) {\n    const ticket = window.setInterval(handler, timeout);\n    return this.addDisposer(() => window.clearInterval(ticket), disposerID);\n  }\n  /**\n   * Remove but not run the disposer. Do nothing if not found.\n   * @param disposerID\n   */\n  remove(disposerID) {\n    const disposer = this.disposers.get(disposerID);\n    this.disposers.delete(disposerID);\n    return disposer;\n  }\n  /**\n   * Remove and run the disposer. Do nothing if not found.\n   * @param disposerID\n   */\n  flush(disposerID) {\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      disposer();\n    }\n  }\n  /**\n   * Remove and run all of the disposers.\n   */\n  flushAll() {\n    this.disposers.forEach(invoke);\n    this.disposers.clear();\n  }\n  genUID() {\n    let uid;\n    do {\n      uid = genUID();\n    } while (this.disposers.has(uid));\n    return uid;\n  }\n};\nfunction joinDisposers(disposers) {\n  return () => disposers.forEach(invoke);\n}\n\n// src/async-side-effect-manager.ts\nvar AsyncSideEffectManager = class {\n  constructor() {\n    /**\n     * @alias addDisposer\n     * Add a disposer directly.\n     * @param disposer a disposer\n     * @param disposerID Optional id for the disposer\n     * @returns disposerID\n     */\n    this.push = this.addDisposer;\n    /**\n     * @returns a Promise resolved when current tasks are finished.\n     */\n    this.finished = Promise.resolve();\n    /**\n     * All disposers. Use this only when you know what you are doing.\n     */\n    this.disposers = /* @__PURE__ */ new Map();\n    this._n = /* @__PURE__ */ new Map();\n    this._i = /* @__PURE__ */ new Set();\n  }\n  /**\n   * Add a side effect.\n   * @param executor Execute side effect. Return a disposer or a disposer array. Return null or false to ignore.\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  add(executor, disposerID = this.genUID()) {\n    if (this._i.has(disposerID)) {\n      this._n.set(disposerID, () => this._a(executor, disposerID));\n    } else {\n      this._a(executor, disposerID);\n    }\n    return disposerID;\n  }\n  async _a(executor, disposerID) {\n    this._s(disposerID);\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      try {\n        await disposer();\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    try {\n      const disposers = await executor();\n      if (disposers) {\n        this.disposers.set(\n          disposerID,\n          Array.isArray(disposers) ? joinAsyncDisposers(disposers) : disposers\n        );\n      }\n    } catch (e) {\n      console.error(e);\n    }\n    this._e(disposerID);\n    const task = this._n.get(disposerID);\n    if (task) {\n      this._n.delete(disposerID);\n      task();\n    }\n  }\n  /**\n   * Add a disposer directly.\n   * @param disposer a disposer\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  addDisposer(disposer, disposerID = this.genUID()) {\n    return this.add(() => disposer, disposerID);\n  }\n  /**\n   * Remove but not run the disposer. Do nothing if not found.\n   * @param disposerID\n   */\n  remove(disposerID) {\n    const disposer = this.disposers.get(disposerID);\n    this.disposers.delete(disposerID);\n    return disposer;\n  }\n  /**\n   * Remove and run the disposer. Do nothing if not found.\n   * @param disposerID\n   */\n  flush(disposerID) {\n    if (this._i.has(disposerID)) {\n      this._n.set(disposerID, () => this._f(disposerID));\n    } else {\n      this._f(disposerID);\n    }\n  }\n  async _f(disposerID) {\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      this._s(disposerID);\n      try {\n        await disposer();\n      } catch (e) {\n        console.error(e);\n      }\n      this._e(disposerID);\n    }\n    const task = this._n.get(disposerID);\n    if (task) {\n      this._n.delete(disposerID);\n      task();\n    }\n  }\n  /**\n   * Remove and run all of the disposers.\n   */\n  flushAll() {\n    this.disposers.forEach((_, disposerID) => this.flush(disposerID));\n  }\n  genUID() {\n    let uid;\n    do {\n      uid = genUID();\n    } while (this.disposers.has(uid));\n    return uid;\n  }\n  _s(disposerID) {\n    this._i.add(disposerID);\n    if (!this._r) {\n      this.finished = new Promise((resolve) => {\n        this._r = resolve;\n      });\n    }\n  }\n  _e(disposerID) {\n    this._i.delete(disposerID);\n    if (this._r && this._i.size <= 0 && this._n.size <= 0) {\n      this._r();\n      this._r = void 0;\n    }\n  }\n};\nfunction joinAsyncDisposers(disposers) {\n  return () => Promise.all(disposers.map(invoke));\n}\n\n// src/disposable.ts\nvar Disposable = class {\n  constructor() {\n    /**\n     * @alias addDisposer\n     * Add a disposer directly.\n     * @param disposer a disposer or a list of disposers\n     */\n    this.push = this.addDisposer;\n    /**\n     * All disposers. Use this only when you know what you are doing.\n     */\n    this.disposers = /* @__PURE__ */ new Set();\n  }\n  /**\n   * Add a disposer directly.\n   * @param disposers a disposer or a list of disposers\n   */\n  addDisposer(disposers) {\n    if (Array.isArray(disposers)) {\n      disposers.forEach((disposer) => {\n        this.disposers.add(disposer);\n      });\n    } else {\n      this.disposers.add(disposers);\n    }\n  }\n  /**\n   * Add a side effect.\n   * @param executor Executes side effect. Return a disposer or a list of disposers. Returns null or false to ignore.\n   */\n  add(executor) {\n    const disposers = executor();\n    if (disposers) {\n      this.push(disposers);\n    }\n  }\n  addEventListener(el, type, listener, options) {\n    el.addEventListener(type, listener, options);\n    const disposer = () => el.removeEventListener(type, listener, options);\n    this.push(disposer);\n    return disposer;\n  }\n  /**\n   * Sugar for setTimeout.\n   * @param handler\n   * @param timeout\n   * @returns ticket\n   */\n  setTimeout(handler, timeout) {\n    const ticket = window.setTimeout(() => {\n      this.remove(disposer);\n      handler();\n    }, timeout);\n    const disposer = () => window.clearTimeout(ticket);\n    this.push(disposer);\n    return disposer;\n  }\n  /**\n   * Sugar for setInterval.\n   * @param handler\n   * @param timeout\n   * @returns ticket\n   */\n  setInterval(handler, timeout) {\n    const ticket = setInterval(handler, timeout);\n    const disposer = () => clearInterval(ticket);\n    this.push(disposer);\n    return disposer;\n  }\n  /**\n   * Remove but not run the disposer. Do nothing if not found.\n   * @param disposer\n   */\n  remove(disposer) {\n    this.disposers.delete(disposer);\n  }\n  /**\n   * Remove and run the disposer. Do nothing if not found.\n   * @param disposer\n   */\n  flush(disposer) {\n    this.remove(disposer);\n    disposer();\n  }\n  /**\n   * Remove and run all of the disposers.\n   */\n  flushAll() {\n    this.disposers.forEach(invoke);\n    this.disposers.clear();\n  }\n};\n\nexport { AsyncSideEffectManager, Disposable, SideEffectManager, genUID, joinAsyncDisposers, joinDisposers };\n","var resizeObservers = [];\nexport { resizeObservers };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\".concat(toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","export function arrowLeftSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-left`);\n  $svg.setAttribute(\"viewBox\", \"0 0 20 20\");\n\n  $svg.innerHTML = `<g clip-path=\"url(#clip0_11800_99864)\">\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.5283 4.86182L12.4711 5.80463L8.22849 10.0473L12.4711 14.2899L11.5283 15.2327L6.34287 10.0473L11.5283 4.86182Z\" class=\"arrow\" />\n</g>\n<defs>\n<clipPath id=\"clip0_11800_99864\">\n<rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(2 2)\"/>\n</clipPath>\n</defs>`;\n\n  return $svg;\n}\n","export function arrowRightSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-right`);\n  $svg.setAttribute(\"viewBox\", \"0 0 20 20\");\n\n  $svg.innerHTML = `<g clip-path=\"url(#clip0_11800_99870)\">\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.1377 4.86182L7.19489 5.80463L11.4375 10.0473L7.19489 14.2899L8.1377 15.2327L13.3231 10.0473L8.1377 4.86182Z\" class=\"arrow\" />\n</g>\n<defs>\n<clipPath id=\"clip0_11800_99870\">\n<rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(2 2)\"/>\n</clipPath>\n</defs>`;\n\n  return $svg;\n}\n","export function playSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-play`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","export function pauseSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-pause`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","const runningOnBrowser = typeof window !== \"undefined\";\n\nconst isBot =\n  (runningOnBrowser && !(\"onscroll\" in window)) ||\n  (typeof navigator !== \"undefined\" && /(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));\n\nconst supportsIntersectionObserver = runningOnBrowser && \"IntersectionObserver\" in window;\n\nconst supportsClassList = runningOnBrowser && \"classList\" in document.createElement(\"p\");\n\nconst isHiDpi = runningOnBrowser && window.devicePixelRatio > 1;\n\nconst defaultSettings = {\n  elements_selector: \".lazy\",\n  container: isBot || runningOnBrowser ? document : null,\n  threshold: 300,\n  thresholds: null,\n  data_src: \"src\",\n  data_srcset: \"srcset\",\n  data_sizes: \"sizes\",\n  data_bg: \"bg\",\n  data_bg_hidpi: \"bg-hidpi\",\n  data_bg_multi: \"bg-multi\",\n  data_bg_multi_hidpi: \"bg-multi-hidpi\",\n  data_bg_set: \"bg-set\",\n  data_poster: \"poster\",\n  class_applied: \"applied\",\n  class_loading: \"loading\",\n  class_loaded: \"loaded\",\n  class_error: \"error\",\n  class_entered: \"entered\",\n  class_exited: \"exited\",\n  unobserve_completed: true,\n  unobserve_entered: false,\n  cancel_on_exit: true,\n  callback_enter: null,\n  callback_exit: null,\n  callback_applied: null,\n  callback_loading: null,\n  callback_loaded: null,\n  callback_error: null,\n  callback_finish: null,\n  callback_cancel: null,\n  use_native: false,\n  restore_on_error: false\n};\n\nconst getExtendedSettings = (customSettings) => {\n  return Object.assign({}, defaultSettings, customSettings);\n};\n\n/* Creates instance and notifies it through the window element */\nconst createInstance = function(classObj, options) {\n  let event;\n  const eventString = \"LazyLoad::Initialized\";\n  const instance = new classObj(options);\n  try {\n    // Works in modern browsers\n    event = new CustomEvent(eventString, { detail: { instance } });\n  } catch (err) {\n    // Works in Internet Explorer (all versions)\n    event = document.createEvent(\"CustomEvent\");\n    event.initCustomEvent(eventString, false, false, { instance });\n  }\n  window.dispatchEvent(event);\n};\n\n/* Auto initialization of one or more instances of LazyLoad, depending on the\n    options passed in (plain object or an array) */\nconst autoInitialize = (classObj, options) => {\n  if (!options) {\n    return;\n  }\n  if (!options.length) {\n    // Plain object\n    createInstance(classObj, options);\n  } else {\n    // Array of objects\n    for (let i = 0, optionsItem; (optionsItem = options[i]); i += 1) {\n      createInstance(classObj, optionsItem);\n    }\n  }\n};\n\nconst SRC = \"src\";\nconst SRCSET = \"srcset\";\nconst SIZES = \"sizes\";\nconst POSTER = \"poster\";\nconst ORIGINALS = \"llOriginalAttrs\";\nconst DATA = \"data\";\n\nconst statusLoading = \"loading\";\nconst statusLoaded = \"loaded\";\nconst statusApplied = \"applied\";\nconst statusEntered = \"entered\";\nconst statusError = \"error\";\nconst statusNative = \"native\";\n\nconst dataPrefix = \"data-\";\nconst statusDataName = \"ll-status\";\n\nconst getData = (element, attribute) => {\n  return element.getAttribute(dataPrefix + attribute);\n};\n\nconst setData = (element, attribute, value) => {\n  const attrName = dataPrefix + attribute;\n  if (value === null) {\n    element.removeAttribute(attrName);\n    return;\n  }\n  element.setAttribute(attrName, value);\n};\n\nconst getStatus = (element) => getData(element, statusDataName);\nconst setStatus = (element, status) => setData(element, statusDataName, status);\nconst resetStatus = (element) => setStatus(element, null);\n\nconst hasEmptyStatus = (element) => getStatus(element) === null;\nconst hasStatusLoading = (element) => getStatus(element) === statusLoading;\nconst hasStatusError = (element) => getStatus(element) === statusError;\nconst hasStatusNative = (element) => getStatus(element) === statusNative;\n\nconst statusesAfterLoading = [statusLoading, statusLoaded, statusApplied, statusError];\nconst hadStartedLoading = (element) => statusesAfterLoading.indexOf(getStatus(element)) >= 0;\n\nconst safeCallback = (callback, arg1, arg2, arg3) => {\n  if (!callback || typeof callback !== 'function') {\n    return;\n  }  \n  if (arg3 !== undefined) {\n    callback(arg1, arg2, arg3);\n    return;\n  }\n  if (arg2 !== undefined) {\n    callback(arg1, arg2);\n    return;\n  }\n  callback(arg1);\n};\n\nconst addClass = (element, className) => {\n  if (className === \"\") {\n    return;\n  }\n  if (supportsClassList) {\n    element.classList.add(className);\n    return;\n  }\n  element.className += (element.className ? \" \" : \"\") + className;\n};\n\nconst removeClass = (element, className) => {\n  if (className === \"\") {\n    return;\n  }\n  if (supportsClassList) {\n    element.classList.remove(className);\n    return;\n  }\n  element.className = element.className.replace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \").replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\n};\n\nconst addTempImage = (element) => {\n  element.llTempImage = document.createElement(\"IMG\");\n};\n\nconst deleteTempImage = (element) => {\n  delete element.llTempImage;\n};\n\nconst getTempImage = (element) => element.llTempImage;\n\nconst unobserve = (element, instance) => {\n  if (!instance) return;\n  const observer = instance._observer;\n  if (!observer) return;\n  observer.unobserve(element);\n};\n\nconst resetObserver = (observer) => {\n  observer.disconnect();\n};\n\nconst unobserveEntered = (element, settings, instance) => {\n  if (settings.unobserve_entered) unobserve(element, instance);\n};\n\nconst updateLoadingCount = (instance, delta) => {\n  if (!instance) return;\n  instance.loadingCount += delta;\n};\n\nconst decreaseToLoadCount = (instance) => {\n  if (!instance) return;\n  instance.toLoadCount -= 1;\n};\n\nconst setToLoadCount = (instance, value) => {\n  if (!instance) return;\n  instance.toLoadCount = value;\n};\n\nconst isSomethingLoading = (instance) => instance.loadingCount > 0;\n\nconst haveElementsToLoad = (instance) => instance.toLoadCount > 0;\n\nconst getSourceTags = (parentTag) => {\n  let sourceTags = [];\n  for (let i = 0, childTag; (childTag = parentTag.children[i]); i += 1) {\n    if (childTag.tagName === \"SOURCE\") {\n      sourceTags.push(childTag);\n    }\n  }\n  return sourceTags;\n};\n\nconst forEachPictureSource = (element, fn) => {\n  const parent = element.parentNode;\n  if (!parent || parent.tagName !== \"PICTURE\") {\n    return;\n  }\n  let sourceTags = getSourceTags(parent);\n  sourceTags.forEach(fn);\n};\n\nconst forEachVideoSource = (element, fn) => {\n  let sourceTags = getSourceTags(element);\n  sourceTags.forEach(fn);\n};\n\nconst attrsSrc = [SRC];\nconst attrsSrcPoster = [SRC, POSTER];\nconst attrsSrcSrcsetSizes = [SRC, SRCSET, SIZES];\nconst attrsData = [DATA];\n\nconst hasOriginalAttrs = (element) => !!element[ORIGINALS];\nconst getOriginalAttrs = (element) => element[ORIGINALS];\nconst deleteOriginalAttrs = (element) => delete element[ORIGINALS];\n\n// ## SAVE ##\n\nconst setOriginalsObject = (element, attributes) => {\n  if (hasOriginalAttrs(element)) {\n    return;\n  }\n  const originals = {};\n  attributes.forEach((attribute) => {\n    originals[attribute] = element.getAttribute(attribute);\n  });\n  element[ORIGINALS] = originals;\n};\n\nconst saveOriginalBackgroundStyle = (element) => {\n  if (hasOriginalAttrs(element)) {\n    return;\n  }\n  element[ORIGINALS] = { backgroundImage: element.style.backgroundImage };\n};\n\n// ## RESTORE ##\n\nconst setOrResetAttribute = (element, attrName, value) => {\n  if (!value) {\n    element.removeAttribute(attrName);\n    return;\n  }\n  element.setAttribute(attrName, value);\n};\n\nconst restoreOriginalAttrs = (element, attributes) => {\n  if (!hasOriginalAttrs(element)) {\n    return;\n  }\n  const originals = getOriginalAttrs(element);\n  attributes.forEach((attribute) => {\n    setOrResetAttribute(element, attribute, originals[attribute]);\n  });\n};\n\nconst restoreOriginalBgImage = (element) => {\n  if (!hasOriginalAttrs(element)) {\n    return;\n  }\n  const originals = getOriginalAttrs(element);\n  element.style.backgroundImage = originals.backgroundImage;\n};\n\nconst manageApplied = (element, settings, instance) => {\n  addClass(element, settings.class_applied);\n  setStatus(element, statusApplied);\n  // Instance is not provided when loading is called from static class\n  if (!instance) return;\n  if (settings.unobserve_completed) {\n    // Unobserve now because we can't do it on load\n    unobserve(element, settings);\n  }\n  safeCallback(settings.callback_applied, element, instance);\n};\n\nconst manageLoading = (element, settings, instance) => {\n  addClass(element, settings.class_loading);\n  setStatus(element, statusLoading);\n  // Instance is not provided when loading is called from static class\n  if (!instance) return;\n  updateLoadingCount(instance, +1);\n  safeCallback(settings.callback_loading, element, instance);\n};\n\nconst setAttributeIfValue = (element, attrName, value) => {\n  if (!value) {\n    return;\n  }\n  element.setAttribute(attrName, value);\n};\n\nconst setImageAttributes = (element, settings) => {\n  setAttributeIfValue(element, SIZES, getData(element, settings.data_sizes));\n  setAttributeIfValue(element, SRCSET, getData(element, settings.data_srcset));\n  setAttributeIfValue(element, SRC, getData(element, settings.data_src));\n};\n\nconst setSourcesImg = (imgEl, settings) => {\n  forEachPictureSource(imgEl, (sourceTag) => {\n    setOriginalsObject(sourceTag, attrsSrcSrcsetSizes);\n    setImageAttributes(sourceTag, settings);\n  });\n  setOriginalsObject(imgEl, attrsSrcSrcsetSizes);\n  setImageAttributes(imgEl, settings);\n};\n\nconst setSourcesIframe = (iframe, settings) => {\n  setOriginalsObject(iframe, attrsSrc);\n  setAttributeIfValue(iframe, SRC, getData(iframe, settings.data_src));\n};\n\nconst setSourcesVideo = (videoEl, settings) => {\n  forEachVideoSource(videoEl, (sourceEl) => {\n    setOriginalsObject(sourceEl, attrsSrc);\n    setAttributeIfValue(sourceEl, SRC, getData(sourceEl, settings.data_src));\n  });\n  setOriginalsObject(videoEl, attrsSrcPoster);\n\n  setAttributeIfValue(videoEl, POSTER, getData(videoEl, settings.data_poster));\n  setAttributeIfValue(videoEl, SRC, getData(videoEl, settings.data_src));\n  videoEl.load();\n};\n\nconst setSourcesObject = (object, settings) => {\n  setOriginalsObject(object, attrsData);\n  setAttributeIfValue(object, DATA, getData(object, settings.data_src));\n};\n\nconst setBackground = (element, settings, instance) => {\n  const bg1xValue = getData(element, settings.data_bg);\n  const bgHiDpiValue = getData(element, settings.data_bg_hidpi);\n  const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\n  if (!bgDataValue) return;\n  element.style.backgroundImage = `url(\"${bgDataValue}\")`;\n  getTempImage(element).setAttribute(SRC, bgDataValue);\n  manageLoading(element, settings, instance);\n};\n\n// NOTE: THE TEMP IMAGE TRICK CANNOT BE DONE WITH data-multi-bg\n// BECAUSE INSIDE ITS VALUES MUST BE WRAPPED WITH URL() AND ONE OF THEM\n// COULD BE A GRADIENT BACKGROUND IMAGE\nconst setMultiBackground = (element, settings, instance) => {\n  const bg1xValue = getData(element, settings.data_bg_multi);\n  const bgHiDpiValue = getData(element, settings.data_bg_multi_hidpi);\n  const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\n  if (!bgDataValue) {\n    return;\n  }\n  element.style.backgroundImage = bgDataValue;\n  manageApplied(element, settings, instance);\n};\n\nconst setImgsetBackground = (element, settings, instance) => {\n  const bgImgSetDataValue = getData(element, settings.data_bg_set);\n  if (!bgImgSetDataValue) {\n    return;\n  }\n  const imgSetValues = bgImgSetDataValue.split(\"|\");\n  let bgImageValues = imgSetValues.map((value) => `image-set(${value})`);\n  element.style.backgroundImage = bgImageValues.join();\n  // Temporary fix for Chromeium with the -webkit- prefix\n  if (element.style.backgroundImage === \"\") {\n    bgImageValues = imgSetValues.map((value) => `-webkit-image-set(${value})`);\n    element.style.backgroundImage = bgImageValues.join();\n  }\n  manageApplied(element, settings, instance);\n};\n\nconst setSourcesFunctions = {\n  IMG: setSourcesImg,\n  IFRAME: setSourcesIframe,\n  VIDEO: setSourcesVideo,\n  OBJECT: setSourcesObject\n};\n\nconst setSourcesNative = (element, settings) => {\n  const setSourcesFunction = setSourcesFunctions[element.tagName];\n  if (!setSourcesFunction) {\n    return;\n  }\n  setSourcesFunction(element, settings);\n};\n\nconst setSources = (element, settings, instance) => {\n  const setSourcesFunction = setSourcesFunctions[element.tagName];\n  if (!setSourcesFunction) {\n    return;\n  }\n  setSourcesFunction(element, settings);\n  manageLoading(element, settings, instance);\n};\n\nconst elementsWithLoadEvent = [\"IMG\", \"IFRAME\", \"VIDEO\", \"OBJECT\"];\nconst hasLoadEvent = (element) => elementsWithLoadEvent.indexOf(element.tagName) > -1;\n\nconst checkFinish = (settings, instance) => {\n  if (instance && !isSomethingLoading(instance) && !haveElementsToLoad(instance)) {\n    safeCallback(settings.callback_finish, instance);\n  }\n};\n\nconst addEventListener = (element, eventName, handler) => {\n  element.addEventListener(eventName, handler);\n  element.llEvLisnrs[eventName] = handler;\n};\n\nconst removeEventListener = (element, eventName, handler) => {\n  element.removeEventListener(eventName, handler);\n};\n\nconst hasEventListeners = (element) => {\n  return !!element.llEvLisnrs;\n};\n\nconst addEventListeners = (element, loadHandler, errorHandler) => {\n  if (!hasEventListeners(element)) element.llEvLisnrs = {};\n  const loadEventName = element.tagName === \"VIDEO\" ? \"loadeddata\" : \"load\";\n  addEventListener(element, loadEventName, loadHandler);\n  addEventListener(element, \"error\", errorHandler);\n};\n\nconst removeEventListeners = (element) => {\n  if (!hasEventListeners(element)) {\n    return;\n  }\n  const eventListeners = element.llEvLisnrs;\n  for (let eventName in eventListeners) {\n    const handler = eventListeners[eventName];\n    removeEventListener(element, eventName, handler);\n  }\n  delete element.llEvLisnrs;\n};\n\nconst doneHandler = (element, settings, instance) => {\n  deleteTempImage(element);\n  updateLoadingCount(instance, -1);\n  decreaseToLoadCount(instance);\n  removeClass(element, settings.class_loading);\n  if (settings.unobserve_completed) {\n    unobserve(element, instance);\n  }\n};\n\nconst loadHandler = (event, element, settings, instance) => {\n  const goingNative = hasStatusNative(element);\n  doneHandler(element, settings, instance);\n  addClass(element, settings.class_loaded);\n  setStatus(element, statusLoaded);\n  safeCallback(settings.callback_loaded, element, instance);\n  if (!goingNative) checkFinish(settings, instance);\n};\n\nconst errorHandler = (event, element, settings, instance) => {\n  const goingNative = hasStatusNative(element);\n  doneHandler(element, settings, instance);\n  addClass(element, settings.class_error);\n  setStatus(element, statusError);\n  safeCallback(settings.callback_error, element, instance);\n  if (settings.restore_on_error) restoreOriginalAttrs(element, attrsSrcSrcsetSizes);\n  if (!goingNative) checkFinish(settings, instance);\n};\n\nconst addOneShotEventListeners = (element, settings, instance) => {\n  const elementToListenTo = getTempImage(element) || element;\n  if (hasEventListeners(elementToListenTo)) {\n    // This happens when loading is retried twice\n    return;\n  }\n  const _loadHandler = (event) => {\n    loadHandler(event, element, settings, instance);\n    removeEventListeners(elementToListenTo);\n  };\n  const _errorHandler = (event) => {\n    errorHandler(event, element, settings, instance);\n    removeEventListeners(elementToListenTo);\n  };\n  addEventListeners(elementToListenTo, _loadHandler, _errorHandler);\n};\n\nconst loadBackground = (element, settings, instance) => {\n  addTempImage(element);\n  addOneShotEventListeners(element, settings, instance);\n  saveOriginalBackgroundStyle(element);\n  setBackground(element, settings, instance);\n  setMultiBackground(element, settings, instance);\n  setImgsetBackground(element, settings, instance);\n};\n\nconst loadRegular = (element, settings, instance) => {\n  addOneShotEventListeners(element, settings, instance);\n  setSources(element, settings, instance);\n};\n\nconst load = (element, settings, instance) => {\n  if (hasLoadEvent(element)) {\n    loadRegular(element, settings, instance);\n  } else {\n    loadBackground(element, settings, instance);\n  }\n};\n\nconst loadNative = (element, settings, instance) => {\n  element.setAttribute(\"loading\", \"lazy\");\n  addOneShotEventListeners(element, settings, instance);\n  setSourcesNative(element, settings);\n  setStatus(element, statusNative);\n};\n\nconst removeImageAttributes = (element) => {\n  element.removeAttribute(SRC);\n  element.removeAttribute(SRCSET);\n  element.removeAttribute(SIZES);\n};\n\nconst resetSourcesImg = (element) => {\n  forEachPictureSource(element, (sourceTag) => {\n    removeImageAttributes(sourceTag);\n  });\n  removeImageAttributes(element);\n};\n\nconst restoreImg = (imgEl) => {\n  forEachPictureSource(imgEl, (sourceEl) => {\n    restoreOriginalAttrs(sourceEl, attrsSrcSrcsetSizes);\n  });\n  restoreOriginalAttrs(imgEl, attrsSrcSrcsetSizes);\n};\n\nconst restoreVideo = (videoEl) => {\n  forEachVideoSource(videoEl, (sourceEl) => {\n    restoreOriginalAttrs(sourceEl, attrsSrc);\n  });\n  restoreOriginalAttrs(videoEl, attrsSrcPoster);\n  videoEl.load();\n};\n\nconst restoreIframe = (iframeEl) => {\n  restoreOriginalAttrs(iframeEl, attrsSrc);\n};\n\nconst restoreObject = (objectEl) => {\n  restoreOriginalAttrs(objectEl, attrsData);\n};\n\nconst restoreFunctions = {\n  IMG: restoreImg,\n  IFRAME: restoreIframe,\n  VIDEO: restoreVideo,\n  OBJECT: restoreObject\n};\n\nconst restoreAttributes = (element) => {\n  const restoreFunction = restoreFunctions[element.tagName];\n  if (!restoreFunction) {\n    restoreOriginalBgImage(element);\n    return;\n  }\n  restoreFunction(element);\n};\n\nconst resetClasses = (element, settings) => {\n  if (hasEmptyStatus(element) || hasStatusNative(element)) {\n    return;\n  }\n  removeClass(element, settings.class_entered);\n  removeClass(element, settings.class_exited);\n  removeClass(element, settings.class_applied);\n  removeClass(element, settings.class_loading);\n  removeClass(element, settings.class_loaded);\n  removeClass(element, settings.class_error);\n};\n\nconst restore = (element, settings) => {\n  restoreAttributes(element);\n  resetClasses(element, settings);\n  resetStatus(element);\n  deleteOriginalAttrs(element);\n};\n\nconst cancelLoading = (element, entry, settings, instance) => {\n  if (!settings.cancel_on_exit) return;\n  if (!hasStatusLoading(element)) return;\n  if (element.tagName !== \"IMG\") return; //Works only on images\n  removeEventListeners(element);\n  resetSourcesImg(element);\n  restoreImg(element);\n  removeClass(element, settings.class_loading);\n  updateLoadingCount(instance, -1);\n  resetStatus(element);\n  safeCallback(settings.callback_cancel, element, entry, instance);\n};\n\nconst onEnter = (element, entry, settings, instance) => {\n  const dontLoad = hadStartedLoading(element); /* Save status\n        before setting it, to prevent loading it again. Fixes #526. */\n  setStatus(element, statusEntered);\n  addClass(element, settings.class_entered);\n  removeClass(element, settings.class_exited);\n  unobserveEntered(element, settings, instance);\n  safeCallback(settings.callback_enter, element, entry, instance);\n  if (dontLoad) return;\n  load(element, settings, instance);\n};\n\nconst onExit = (element, entry, settings, instance) => {\n  if (hasEmptyStatus(element)) return; //Ignore the first pass, at landing\n  addClass(element, settings.class_exited);\n  cancelLoading(element, entry, settings, instance);\n  safeCallback(settings.callback_exit, element, entry, instance);\n};\n\nconst tagsWithNativeLazy = [\"IMG\", \"IFRAME\", \"VIDEO\"];\n\nconst shouldUseNative = (settings) =>\n  settings.use_native && \"loading\" in HTMLImageElement.prototype;\n\nconst loadAllNative = (elements, settings, instance) => {\n  elements.forEach((element) => {\n    if (tagsWithNativeLazy.indexOf(element.tagName) === -1) {\n      return;\n    }\n    loadNative(element, settings, instance);\n  });\n  setToLoadCount(instance, 0);\n};\n\nconst isIntersecting = (entry) => entry.isIntersecting || entry.intersectionRatio > 0;\n\nconst getObserverSettings = (settings) => ({\n  root: settings.container === document ? null : settings.container,\n  rootMargin: settings.thresholds || settings.threshold + \"px\"\n});\n\nconst intersectionHandler = (entries, settings, instance) => {\n  entries.forEach((entry) =>\n    isIntersecting(entry)\n      ? onEnter(entry.target, entry, settings, instance)\n      : onExit(entry.target, entry, settings, instance)\n  );\n};\n\nconst observeElements = (observer, elements) => {\n  elements.forEach((element) => {\n    observer.observe(element);\n  });\n};\n\nconst updateObserver = (observer, elementsToObserve) => {\n  resetObserver(observer);\n  observeElements(observer, elementsToObserve);\n};\n\nconst setObserver = (settings, instance) => {\n  if (!supportsIntersectionObserver || shouldUseNative(settings)) {\n    return;\n  }\n  instance._observer = new IntersectionObserver((entries) => {\n    intersectionHandler(entries, settings, instance);\n  }, getObserverSettings(settings));\n};\n\nconst toArray = (nodeSet) => Array.prototype.slice.call(nodeSet);\n\nconst queryElements = (settings) =>\n  settings.container.querySelectorAll(settings.elements_selector);\n\nconst excludeManagedElements = (elements) => toArray(elements).filter(hasEmptyStatus);\n\nconst hasError = (element) => hasStatusError(element);\nconst filterErrorElements = (elements) => toArray(elements).filter(hasError);\n\nconst getElementsToLoad = (elements, settings) =>\n  excludeManagedElements(elements || queryElements(settings));\n\nconst retryLazyLoad = (settings, instance) => {\n  const errorElements = filterErrorElements(queryElements(settings));\n  errorElements.forEach((element) => {\n    removeClass(element, settings.class_error);\n    resetStatus(element);\n  });\n  instance.update();\n};\n\nconst setOnlineCheck = (settings, instance) => {\n  if (!runningOnBrowser) {\n    return;\n  }\n  instance._onlineHandler = () => {\n    retryLazyLoad(settings, instance);\n  };\n  window.addEventListener(\"online\", instance._onlineHandler);\n};\n\nconst resetOnlineCheck = (instance) => {\n  if (!runningOnBrowser) {\n    return;\n  }\n  window.removeEventListener(\"online\", instance._onlineHandler);\n};\n\nconst LazyLoad = function(customSettings, elements) {\n  const settings = getExtendedSettings(customSettings);\n  this._settings = settings;\n  this.loadingCount = 0;\n  setObserver(settings, this);\n  setOnlineCheck(settings, this);\n  this.update(elements);\n};\n\nLazyLoad.prototype = {\n  update: function(givenNodeset) {\n    const settings = this._settings;\n    const elementsToLoad = getElementsToLoad(givenNodeset, settings);\n    setToLoadCount(this, elementsToLoad.length);\n\n    if (isBot || !supportsIntersectionObserver) {\n      this.loadAll(elementsToLoad);\n      return;\n    }\n    if (shouldUseNative(settings)) {\n      loadAllNative(elementsToLoad, settings, this);\n      return;\n    }\n\n    updateObserver(this._observer, elementsToLoad);\n  },\n\n  destroy: function() {\n    // Observer\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n    // Clean handlers\n    resetOnlineCheck(this);\n    // Clean custom attributes on elements\n    queryElements(this._settings).forEach((element) => {\n      deleteOriginalAttrs(element);\n    });\n    // Delete all internal props\n    delete this._observer;\n    delete this._settings;\n    delete this._onlineHandler;\n    delete this.loadingCount;\n    delete this.toLoadCount;\n  },\n\n  loadAll: function(elements) {\n    const settings = this._settings;\n    const elementsToLoad = getElementsToLoad(elements, settings);\n    elementsToLoad.forEach((element) => {\n      unobserve(element, this);\n      load(element, settings, this);\n    });\n  },\n\n  restoreAll: function() {\n    const settings = this._settings;\n    queryElements(settings).forEach((element) => {\n      restore(element, settings);\n    });\n  }\n};\n\nLazyLoad.load = (element, customSettings) => {\n  const settings = getExtendedSettings(customSettings);\n  load(element, settings);\n};\n\nLazyLoad.resetStatus = (element) => {\n  resetStatus(element);\n};\n\n// Automatic instances creation if required (useful for async script loading)\nif (runningOnBrowser) {\n  autoInitialize(LazyLoad, window.lazyLoadOptions);\n}\n\nexport { LazyLoad as default };\n","const _ua = window.navigator?.userAgent;\n\nconst math = _ua?.match(/(Edge?)\\/(\\d+)/);\n\nexport const isOldEdge = () => {\n  return math && math[1] == \"Edge\" && parseInt(math[2]) < 19 ? true : false;\n};\n//  IE\nexport const isIE = () => {\n  return \"ActiveXObject\" in window;\n};\n//  webkit\nexport const isWebkit = () => {\n  return /webkit/i.test(_ua);\n};\nexport const isApple = () => {\n  return /apple/i.test(_ua.toLocaleLowerCase());\n};\nexport const isElectron = () => {\n  return /electron/i.test(_ua.toLocaleLowerCase()) && window.self === window.top;\n};\nexport const isMacOS = () => {\n  return /mac/i.test(_ua.toLocaleLowerCase());\n};\nexport const isWin = () => {\n  return /win/i.test(_ua.toLocaleLowerCase());\n};\nexport const isIOS = () => {\n  return (\n    typeof navigator !== \"undefined\" &&\n    typeof window !== \"undefined\" &&\n    /iPad|iPhone|iPod/.test(_ua)\n  );\n};\nexport const isAndroid = () => {\n  return typeof navigator !== \"undefined\" && /Android/.test(_ua);\n};\nexport const isFirefox = () => {\n  return typeof navigator !== \"undefined\" && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(_ua);\n};\nexport const isSafari = () => {\n  return typeof navigator !== \"undefined\" && /Version\\/[\\d/.]+.*Safari/.test(_ua);\n};\n\n// \"modern\" Edge was released at 79.x\nexport const isEdgeLegacy = () => {\n  return typeof navigator !== \"undefined\" && /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])/i.test(_ua);\n};\nexport const isChrome = () => {\n  return typeof navigator !== \"undefined\" && /Chrome/i.test(_ua);\n};\n// Native events don't work well with react on Chrome 75\n// and older, Chrome 76+ is ok.\nexport const isChromeLegacy = () => {\n  return typeof navigator !== \"undefined\" && /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])/i.test(_ua);\n};\nexport const isFirefoxLegacy = () => {\n  return (\n    typeof navigator !== \"undefined\" &&\n    /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(_ua)\n  );\n};\n// qq browser\nexport const is_QQBrowser = () => {\n  return typeof navigator !== \"undefined\" && /.*QQBrowser/.test(_ua);\n};\n","import { arrowLeftSVG } from \"./icons/arrow-left\";\nimport { arrowRightSVG } from \"./icons/arrow-right\";\nimport { playSVG } from \"./icons/play\";\nimport { pauseSVG } from \"./icons/pause\";\n\nimport type { AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport LazyLoad from \"vanilla-lazyload\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport type {\n  AppOptions,\n  NetlessAppDynamicDocsViewerAttributes,\n  NetlessAppStaticDocsViewerAttributes,\n} from \"..\";\nimport { isAndroid, isIOS } from \"../utils/environment\";\n\nexport interface DocsViewerPage {\n  src: string;\n  height: number;\n  width: number;\n  thumbnail?: string;\n}\n\ntype contextType = AppContext<\n  NetlessAppStaticDocsViewerAttributes | NetlessAppDynamicDocsViewerAttributes,\n  AppOptions\n>;\nexport interface DocsViewerConfig {\n  readonly: boolean;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n  onNewPageIndex: (index: number) => void;\n  onPlay?: () => void;\n  context: contextType;\n}\n\nexport class DocsViewer {\n  public constructor({ context, readonly, box, pages, onNewPageIndex, onPlay }: DocsViewerConfig) {\n    if (pages.length <= 0) {\n      throw new Error(\"[DocsViewer] Empty pages.\");\n    }\n\n    this.context = context;\n    this.readonly = readonly;\n    this.box = box;\n    this.pages = pages;\n    this.onNewPageIndex = onNewPageIndex;\n    this.onPlay = onPlay;\n    this.onPageIndexChanged = () => void 0;\n\n    this.render();\n  }\n\n  protected context: contextType;\n  protected readonly: boolean;\n  protected pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected onNewPageIndex: (index: number) => void;\n  protected onPlay?: () => void;\n\n  public $content!: HTMLElement;\n  public $preview!: HTMLElement;\n  public $previewMask!: HTMLElement;\n  public $footer!: HTMLElement;\n  public $pageNumberInput!: HTMLElement;\n  private $btnPageNext!: HTMLElement;\n  private $btnPageBack!: HTMLElement;\n\n  public pageIndex = 0;\n  public onPageIndexChanged: (index: number) => void;\n\n  public mount(): void {\n    this.box.mountContent(this.$content);\n    this.box.mountFooter(this.$footer);\n\n    // this.$footer.classList.toggle(this.wrapClassName(\"hide\"), this.box.maximized);\n    this.box.events.on(\"maximized\", max => {\n      this.$footer.classList.toggle(this.wrapClassName(\"hide\"), max);\n      // this.togglePreview(max);\n    });\n    this.$footer.classList.toggle(this.wrapClassName(\"hide\"), this.box.maximized);\n  }\n\n  public unmount(): void {\n    this.$content.remove();\n    this.$footer.remove();\n  }\n\n  public setReadonly(readonly: boolean): void {\n    if (this.readonly !== readonly) {\n      this.readonly = readonly;\n\n      this.$content.classList.toggle(this.wrapClassName(\"readonly\"), readonly);\n\n      this.$footer.classList.toggle(this.wrapClassName(\"readonly\"), readonly);\n\n      // this.$pageNumberInput.disabled = readonly;\n    }\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.unmount();\n  }\n\n  public setPageIndex(pageIndex: number): void {\n    if (!Number.isNaN(pageIndex)) {\n      this.scrollPreview(pageIndex);\n      this.pageIndex = pageIndex;\n      this.$pageNumberInput.textContent = String(pageIndex + 1);\n      this.onPageIndexChanged(pageIndex);\n      this.$btnPageBack.classList.toggle(this.wrapClassName(\"footer-btn-disable\"), pageIndex == 0);\n      this.$btnPageNext.classList.toggle(\n        this.wrapClassName(\"footer-btn-disable\"),\n        pageIndex == this.pages.length - 1\n      );\n    }\n  }\n\n  private scrollPreview(pageIndex: number) {\n    const previews = this.$preview?.querySelectorAll<HTMLElement>(\n      \".\" + this.wrapClassName(\"preview-page\")\n    );\n\n    previews?.forEach((node, i) => {\n      node\n        .querySelector(\"img\")\n        ?.classList.toggle(this.wrapClassName(\"active\"), Number(pageIndex) == i);\n    });\n\n    if (!previews) return;\n\n    const imgNode = Array.prototype.slice\n      .call(previews)\n      .find(node => node.querySelector(\"img\").className.includes(this.wrapClassName(\"active\")));\n    if (!imgNode) return;\n    const parentRect = this.$preview.getBoundingClientRect();\n    const elementRect = imgNode?.getBoundingClientRect();\n    const isInView = elementRect.top >= parentRect.top && elementRect.bottom <= parentRect.bottom;\n\n    if (!isInView) {\n      this.$preview.scrollTo({\n        top: imgNode.offsetTop - 16,\n        behavior: this.isShowPreview ? \"smooth\" : \"auto\",\n      });\n    }\n  }\n\n  public setSmallBox(isSmallBox: boolean): void {\n    if (this.isSmallBox !== isSmallBox) {\n      this.isSmallBox = isSmallBox;\n      this.$footer.classList.toggle(this.wrapClassName(\"float-footer\"), isSmallBox);\n    }\n  }\n\n  public render(): HTMLElement {\n    this.renderContent();\n    this.renderFooter();\n    return this.$content;\n  }\n\n  protected renderContent(): HTMLElement {\n    if (!this.$content) {\n      const $content = document.createElement(\"div\");\n      $content.className = this.wrapClassName(\"content\");\n      this.$content = $content;\n      if (this.readonly) {\n        $content.classList.add(this.wrapClassName(\"readonly\"));\n      }\n\n      // $content.appendChild(this.renderPreviewMask());\n      // $content.appendChild(this.renderPreview());\n    }\n    return this.$content;\n  }\n\n  protected renderPreview(): HTMLElement {\n    if (!this.$preview) {\n      const $preview = document.createElement(\"div\");\n      $preview.className = this.wrapClassName(\"preview\") + \" tele-fancy-scrollbar\";\n      this.$preview = $preview;\n\n      const title = document.createElement(\"div\");\n      title.className = this.wrapClassName(\"preview-head\");\n      const h3 = document.createElement(\"h3\");\n      h3.textContent = this.box.title;\n      title.appendChild(h3);\n      this.$preview.appendChild(title);\n\n      const pageClassName = this.wrapClassName(\"preview-page\");\n      const pageNameClassName = this.wrapClassName(\"preview-page-name\");\n      this.pages.forEach((page, i) => {\n        const previewSRC = page.thumbnail ?? (page.src.startsWith(\"ppt\") ? void 0 : page.src);\n        if (!previewSRC) {\n          return;\n        }\n\n        const pageIndex = String(i);\n\n        const $page = document.createElement(\"a\");\n        $page.className = pageClassName + \" \" + this.wrapClassName(`preview-page-${i}`);\n        $page.setAttribute(\"href\", \"#\");\n        $page.dataset.pageIndex = pageIndex;\n\n        const $name = document.createElement(\"span\");\n        $name.className = pageNameClassName;\n        $name.textContent = String(i + 1);\n        $name.dataset.pageIndex = pageIndex;\n\n        const $img = document.createElement(\"img\");\n        $img.width = page.width;\n        $img.height = page.height;\n        $img.dataset.src = previewSRC;\n        $img.dataset.pageIndex = pageIndex;\n\n        $page.appendChild($name);\n        $page.appendChild($img);\n        $preview.appendChild($page);\n        $img.classList.toggle(this.wrapClassName(\"active\"), this.pageIndex == i);\n      });\n\n      this.sideEffect.addEventListener($preview, \"click\", ev => {\n        if (this.readonly) {\n          return;\n        }\n        const pageIndex = (ev.target as HTMLElement).dataset?.pageIndex;\n        if (pageIndex) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          ev.stopImmediatePropagation();\n          this.onNewPageIndex(Number(pageIndex));\n        }\n      });\n    }\n\n    return this.$preview;\n  }\n\n  protected renderPreviewMask(): HTMLElement {\n    if (!this.$previewMask) {\n      this.$previewMask = document.createElement(\"div\");\n      this.$previewMask.className = this.wrapClassName(\"preview-mask\");\n      this.sideEffect.addEventListener(this.$previewMask, \"click\", ev => {\n        if (this.readonly) {\n          return;\n        }\n        if (ev.target === this.$previewMask) {\n          this.togglePreview(false);\n        }\n      });\n    }\n    return this.$previewMask;\n  }\n\n  protected renderFooter(): HTMLElement {\n    if (!this.$footer) {\n      const $footer = document.createElement(\"div\");\n      $footer.className = this.wrapClassName(\"footer\");\n      this.$footer = $footer;\n\n      if (this.readonly) {\n        $footer.classList.add(this.wrapClassName(\"readonly\"));\n      }\n\n      if (this.isSmallBox) {\n        $footer.classList.add(this.wrapClassName(\"float-footer\"));\n      }\n\n      const $pageJumps = document.createElement(\"div\");\n      $pageJumps.className = this.wrapClassName(\"page-jumps\");\n\n      const $btnPageBack = this.renderFooterBtn(\"btn-page-back\", arrowLeftSVG(this.namespace));\n      this.sideEffect.addEventListener($btnPageBack, \"click\", () => {\n        if (this.readonly) {\n          return;\n        }\n        this.onNewPageIndex(this.pageIndex - 1);\n      });\n      $pageJumps.appendChild($btnPageBack);\n      this.$btnPageBack = $btnPageBack;\n\n      if (this.onPlay) {\n        const $btnPlay = this.renderFooterBtn(\n          \"btn-page-play\",\n          playSVG(this.namespace),\n          pauseSVG(this.namespace)\n        );\n        const returnPlay = (): void => {\n          this.sideEffect.setTimeout(\n            () => {\n              $btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), false);\n            },\n            500,\n            \"returnPlay\"\n          );\n        };\n        this.sideEffect.addEventListener($btnPlay, \"click\", () => {\n          if (this.readonly) {\n            return;\n          }\n          $btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), true);\n          this.onPlay?.();\n          returnPlay();\n        });\n\n        if (!this.context.getIsAppReadonly() && !isIOS() && !isAndroid()) {\n          this.$footer.appendChild($btnPlay);\n        }\n      }\n      const $pageNumber = document.createElement(\"div\");\n      $pageNumber.className = this.wrapClassName(\"page-number\");\n\n      const $pageNumberInput = document.createElement(\"span\");\n      $pageNumberInput.className = this.wrapClassName(\"page-number-input\");\n      $pageNumberInput.textContent = String(this.pageIndex + 1);\n      this.$pageNumberInput = $pageNumberInput;\n\n      const $totalPage = document.createElement(\"span\");\n      $totalPage.textContent = \" / \" + this.pages.length;\n\n      $pageNumber.appendChild($pageNumberInput);\n      $pageNumber.appendChild($totalPage);\n\n      $pageJumps.appendChild($pageNumber);\n\n      const $btnPageNext = this.renderFooterBtn(\"btn-page-next\", arrowRightSVG(this.namespace));\n      this.sideEffect.addEventListener($btnPageNext, \"click\", () => {\n        if (this.readonly) {\n          return;\n        }\n        this.onNewPageIndex(this.pageIndex + 1);\n      });\n      $pageJumps.appendChild($btnPageNext);\n\n      this.$btnPageNext = $btnPageNext;\n\n      if (!this.context.getIsAppReadonly() && !isIOS() && !isAndroid()) {\n        this.$footer.appendChild($pageJumps);\n      }\n    }\n    return this.$footer;\n  }\n\n  protected renderFooterBtn(\n    className: string,\n    $icon: SVGElement,\n    $iconActive?: SVGElement\n  ): HTMLButtonElement {\n    const $btn = document.createElement(\"button\");\n    $btn.className = this.wrapClassName(\"footer-btn\") + \" \" + this.wrapClassName(className);\n\n    $btn.appendChild($icon);\n\n    if ($iconActive) {\n      $btn.appendChild($iconActive);\n    }\n\n    return $btn;\n  }\n\n  public togglePreview(isShowPreview?: boolean): void {\n    this.isShowPreview = isShowPreview ?? !this.isShowPreview;\n    console.log(this.context?.extendWrapper);\n    this.$content.classList.toggle(this.wrapClassName(\"preview-active\"), this.isShowPreview);\n    if (this.isShowPreview) {\n      if (this.context?.extendWrapper) {\n        this.context?.extendWrapper?.appendChild(this.renderPreviewMask());\n        this.context?.extendWrapper?.appendChild(this.renderPreview());\n        this.context.extendWrapper.style.display = \"block\";\n      }\n      setTimeout(() => {\n        const $previewPage = this.$preview.querySelector<HTMLElement>(\n          \".\" + this.wrapClassName(`preview-page-${this.pageIndex}`)\n        );\n\n        if ($previewPage) {\n          this.sideEffect.add(() => {\n            const previewLazyLoad = new LazyLoad({\n              container: this.$preview,\n              elements_selector: `.${this.wrapClassName(\"preview-page>img\")}`,\n            });\n            return () => previewLazyLoad.destroy();\n          }, \"preview-lazyload\");\n\n          this.$preview.scrollTo({\n            top: $previewPage.offsetTop - 16,\n          });\n        }\n\n        if ($previewPage) {\n          this.$preview.scrollTo({\n            top: $previewPage.offsetTop - 16,\n          });\n        }\n      });\n    } else {\n      if (this.context?.extendWrapper) {\n        this.context.extendWrapper.style.display = \"none\";\n        this.context.extendWrapper.innerHTML = \"\";\n      }\n    }\n  }\n\n  protected wrapClassName(className: string): string {\n    return `${this.namespace}-${className}`;\n  }\n\n  protected namespace = \"netless-app-docs-viewer\";\n\n  protected isShowPreview = false;\n\n  protected isSmallBox = false;\n\n  protected sideEffect = new SideEffectManager();\n}\n","export function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function flattenEvent(ev: MouseEvent | TouchEvent): MouseEvent | Touch {\n  return (ev as TouchEvent).touches ? (ev as TouchEvent).touches[0] : (ev as MouseEvent);\n}\n\nexport function preventEvent(ev: Event): void {\n  ev.stopPropagation();\n  if (ev.cancelable) {\n    ev.preventDefault();\n  }\n}\n\nexport function isEditable(el: EventTarget | null) {\n  if (!el) return false;\n  const tagName = (el as HTMLElement).tagName;\n  return tagName === \"INPUT\" || tagName === \"TEXTAREA\" || tagName === \"SELECT\";\n}\n","export interface StepperConfig {\n  start?: number;\n  stiffness?: number;\n  damping?: number;\n  onStep: (value: number) => void;\n}\n\nexport class Stepper {\n  public stiffness: number;\n  public damping: number;\n\n  public current: number;\n  public target: number;\n  public velocity = 0;\n  public onStep: (value: number, stepper: Stepper) => void;\n  public paused = true;\n\n  protected _animationFrameID: number | null = null;\n  protected _loopTimestamp = 0;\n\n  public constructor(config: StepperConfig) {\n    this.current = config.start ?? 0;\n    this.target = this.current;\n    this.stiffness = config.stiffness ?? 170;\n    this.damping = config.damping ?? 26;\n    this.onStep = config.onStep;\n  }\n\n  public stepTo(target: number, start?: number) {\n    if (this.paused && start != null) {\n      this.current = start;\n    }\n    this.paused = false;\n    this.target = target;\n    this.onStep(this.current, this);\n    this._loopTimestamp = Date.now();\n    window.requestAnimationFrame(this.looper);\n  }\n\n  public pause() {\n    this.paused = true;\n  }\n\n  public destroy() {\n    this.pause();\n  }\n\n  protected looper = (timestamp: number) => {\n    if (this.paused) {\n      return;\n    }\n\n    let frames = Math.floor(((timestamp - this._loopTimestamp) / 1000) * 60) + 1;\n    this._loopTimestamp = timestamp;\n    while (frames-- > 0) {\n      this.stepper();\n    }\n\n    this.onStep(this.current, this);\n\n    if (!this.paused && this.current !== this.target) {\n      window.requestAnimationFrame(this.looper);\n    }\n  };\n\n  // based on https://github.com/chenglou/react-motion/blob/master/src/stepper.js\n  protected stepper() {\n    const fSpring = -this.stiffness * (this.current - this.target);\n    const fDamper = -this.damping * this.velocity;\n    const newVelocity = this.velocity + (fSpring + fDamper) / 60;\n    const newCurrent = this.current + newVelocity / 60;\n\n    if (Math.abs(newVelocity - 0) < 0.01 && Math.abs(newCurrent - this.target) < 0.01) {\n      this.current = this.target;\n      this.velocity = 0;\n    } else {\n      this.current = newCurrent;\n      this.velocity = newVelocity;\n    }\n  }\n}\n","import type { DocsViewerPage } from \"../DocsViewer\";\n\nexport class PageEl {\n  index: number;\n  page: DocsViewerPage;\n  scale = 1;\n\n  lastVisit = Date.now();\n  $page: HTMLDivElement;\n  pageOffsetY = 0;\n  pageOffsetX = 0;\n  visible = true;\n\n  constructor(index: number, page: DocsViewerPage, scale: number, pagesIntrinsicWidth: number) {\n    this.index = index;\n    this.page = page;\n    this.scale = scale;\n    this.pageOffsetX = (pagesIntrinsicWidth - page.width) / 2;\n\n    const $page = document.createElement(\"div\");\n    $page.className = \"page-renderer-page\";\n    $page.dataset.index = `${index}`;\n    $page.style.width = `${page.width * scale}px`;\n    $page.style.height = `${page.height * scale}px`;\n    if (page.thumbnail) {\n      $page.style.backgroundImage = `url(\"${page.thumbnail}\")`;\n    }\n\n    const $img = document.createElement(\"img\");\n    $img.className = \"page-renderer-page-img\";\n    $img.width = page.width;\n    $img.height = page.height;\n    $img.src = page.src;\n\n    $page.appendChild($img);\n\n    this.$page = $page;\n  }\n\n  translateY(pageOffsetY: number): void {\n    if (Math.abs(pageOffsetY - this.pageOffsetY) >= 0.001) {\n      this.pageOffsetY = pageOffsetY;\n      this.$page.style.transform = `translate(${this.pageOffsetX * this.scale}px, ${\n        this.pageOffsetY * this.scale\n      }px)`;\n    }\n  }\n\n  setScale(scale: number): void {\n    if (Math.abs(scale - this.scale) >= 0.001) {\n      this.scale = scale;\n      this.$page.style.width = `${this.page.width * this.scale}px`;\n      this.$page.style.height = `${this.page.height * this.scale}px`;\n      this.$page.style.transform = `translate(${this.pageOffsetX * this.scale}px, ${\n        this.pageOffsetY * this.scale\n      }px)`;\n    }\n  }\n\n  setVisible(visible: boolean): void {\n    if (visible !== this.visible) {\n      this.visible = visible;\n      this.$page.style.opacity = visible ? \"1\" : \"0\";\n    }\n  }\n}\n","import type { DocsViewerPage } from \"../DocsViewer\";\nimport { PageEl } from \"./PageEl\";\n\nconst schedule: (handler: () => void) => number =\n  window.requestIdleCallback || ((handler: () => void) => window.setTimeout(handler, 5000));\n\nconst cancelSchedule = window.cancelIdleCallback || window.clearTimeout;\n\nexport class PageElManager {\n  els = new Map<number, PageEl>();\n\n  private maxElCount = 200;\n  private gcTimer: number | null = null;\n\n  constructor(\n    private pages: ReadonlyArray<DocsViewerPage>,\n    private pagesIntrinsicWidth: number,\n    private scale: number\n  ) {}\n\n  getEl(index: number): PageEl {\n    let el = this.els.get(index);\n    if (!el) {\n      el = new PageEl(index, this.pages[index], this.scale, this.pagesIntrinsicWidth);\n      this.els.set(index, el);\n    }\n    el.lastVisit = Date.now();\n\n    if (this.els.size > this.maxElCount && this.gcTimer === null) {\n      this.gcTimer = schedule(this.gc);\n    }\n\n    return el;\n  }\n\n  setScale(scale: number): void {\n    if (scale !== this.scale) {\n      this.scale = scale;\n      this.els.forEach(pageEl => pageEl.setScale(scale));\n    }\n  }\n\n  destroy() {\n    this.els.clear();\n    if (this.gcTimer !== null) {\n      cancelSchedule(this.gcTimer);\n      this.gcTimer = null;\n    }\n  }\n\n  private gc = () => {\n    this.gcTimer = null;\n\n    if (this.els.size > this.maxElCount) {\n      const sortedEls = [...this.els.values()].sort((x, y) => y.lastVisit - x.lastVisit);\n      for (let i = Math.floor(this.maxElCount / 4); i < sortedEls.length; i++) {\n        this.els.delete(sortedEls[i].index);\n      }\n    }\n  };\n}\n","import type { DocsViewerPage } from \"../DocsViewer\";\nimport { PageElManager } from \"./PageElManager\";\nimport { clamp } from \"../utils/helpers\";\n\nexport interface PageRendererConfig {\n  pagesScrollTop?: number;\n  containerWidth: number;\n  containerHeight: number;\n  pages: ReadonlyArray<DocsViewerPage>;\n  onPageIndexChanged?: (index: number) => void;\n}\n\n/**\n * High-performance renderer for large number of page images\n */\nexport class PageRenderer {\n  readonly $pages: HTMLDivElement;\n\n  readonly pages: ReadonlyArray<DocsViewerPage>;\n  readonly pagesIntrinsicYs: ReadonlyArray<number>;\n  readonly pagesIntrinsicWidth: number;\n  readonly pagesIntrinsicHeight: number;\n  readonly pagesMinHeight: number;\n\n  readonly pageElManager: PageElManager;\n\n  containerWidth: number;\n  containerHeight: number;\n\n  threshold: number;\n  scale: number;\n  pagesScrollTop: number;\n  pageScrollIndex: number;\n  onPageIndexChanged?: (index: number) => void;\n\n  constructor(config: PageRendererConfig) {\n    this.pagesScrollTop = config.pagesScrollTop || 0;\n    this.containerWidth = config.containerWidth || 1;\n    this.containerHeight = config.containerHeight || 1;\n    this.pages = config.pages.map(page => {\n      if (page.thumbnail) {\n        return page;\n      }\n      try {\n        const url = new URL(page.src);\n        url.searchParams.set(\"x-oss-process\", \"image/resize,l_50\");\n        return { ...page, thumbnail: url.toString() };\n      } catch (e) {\n        console.error(e);\n        return page;\n      }\n    });\n\n    const pagesIntrinsicYs = Array(this.pages.length);\n    let pagesMinHeight = Infinity;\n    let pagesIntrinsicWidth = 0;\n    this.pagesIntrinsicHeight = this.pages.reduce((pageY, page, i) => {\n      pagesIntrinsicYs[i] = pageY;\n      if (page.width > pagesIntrinsicWidth) {\n        pagesIntrinsicWidth = page.width;\n      }\n      if (page.height <= pagesMinHeight) {\n        pagesMinHeight = page.height;\n      }\n      return pageY + page.height;\n    }, 0);\n    this.pagesIntrinsicWidth = pagesIntrinsicWidth;\n    this.pagesMinHeight = pagesMinHeight;\n    this.pagesIntrinsicYs = pagesIntrinsicYs;\n\n    this.scale = this._calcScale();\n    this.threshold = this._calcThreshold();\n\n    this.onPageIndexChanged = config.onPageIndexChanged;\n    this.pageScrollIndex = 0;\n    if (this.pagesScrollTop !== 0) {\n      this.pageScrollIndex = this.findScrollPageIndex();\n      if (this.onPageIndexChanged && this.pageScrollIndex > 0) {\n        this.onPageIndexChanged(this.pageScrollIndex);\n      }\n    }\n\n    this.pageElManager = new PageElManager(this.pages, pagesIntrinsicWidth, this.scale);\n\n    this.$pages = this.renderPages();\n  }\n\n  setContainerSize(width: number, height: number): void {\n    if (width > 0 && height > 0) {\n      if (width !== this.containerWidth || height !== this.containerHeight) {\n        this.containerWidth = width;\n        this.containerHeight = height;\n\n        this.$pages.style.width = `${this.containerWidth}px`;\n        this.$pages.style.height = `${this.containerHeight}px`;\n\n        this.scale = this._calcScale();\n        this.threshold = this._calcThreshold();\n\n        this.pageElManager.setScale(this.scale);\n\n        if (this.$pages.parentElement) {\n          this.pagesScrollTo(this.pagesScrollTop, true);\n        }\n      }\n    }\n  }\n\n  renderPages(): HTMLDivElement {\n    const $pages = document.createElement(\"div\");\n    $pages.className = \"page-renderer-pages-container\";\n    $pages.style.width = `${this.containerWidth}px`;\n    $pages.style.height = `${this.containerHeight}px`;\n    return $pages;\n  }\n\n  pagesScrollTo(pagesScrollTop: number, force?: boolean): void {\n    pagesScrollTop = clamp(\n      pagesScrollTop,\n      0,\n      this.pagesIntrinsicHeight - this.containerHeight / this.scale\n    );\n\n    if (force || Math.abs(pagesScrollTop - this.pagesScrollTop) >= 0.001) {\n      this._turnOnHWA();\n\n      this.pagesScrollTop = pagesScrollTop;\n\n      const pageScrollIndex = this.findScrollPageIndex();\n      const startIndex = Math.max(pageScrollIndex - this.threshold, 0);\n      const endIndex = Math.min(pageScrollIndex + this.threshold, this.pages.length - 1);\n\n      for (let i = 0; i < this.$pages.children.length; i++) {\n        const $page = this.$pages.children[i] as HTMLDivElement;\n        const index = Number($page.dataset.index);\n        if (!(index >= startIndex && index <= endIndex)) {\n          $page.remove();\n          i--;\n        }\n      }\n\n      for (let i = startIndex; i <= endIndex; i++) {\n        const pageEl = this.pageElManager.getEl(i);\n        if (pageEl.$page.parentElement !== this.$pages) {\n          this.$pages.appendChild(pageEl.$page);\n        }\n        pageEl.translateY(this.pagesIntrinsicYs[i] - this.pagesScrollTop);\n      }\n\n      if (pageScrollIndex !== this.pageScrollIndex) {\n        this.pageScrollIndex = pageScrollIndex;\n        if (this.onPageIndexChanged) {\n          this.onPageIndexChanged(pageScrollIndex);\n        }\n      }\n    }\n  }\n\n  findScrollPageIndex() {\n    for (let i = 0; i < this.pagesIntrinsicYs.length; i++) {\n      if (this.pagesIntrinsicYs[i] + this.pages[i].height - this.pagesScrollTop >= 0.001) {\n        return i;\n      }\n    }\n    return this.pagesIntrinsicYs.length - 1;\n  }\n\n  mount($parent: HTMLElement): void {\n    $parent.appendChild(this.$pages);\n    this.pagesScrollTo(this.pagesScrollTop, true);\n  }\n\n  unmount(): void {\n    this.$pages.remove();\n  }\n\n  destroy() {\n    this.unmount();\n    this.onPageIndexChanged = void 0;\n    this.pageElManager.destroy();\n    if (this._hwaTimeout) {\n      window.clearTimeout(this._hwaTimeout);\n      this._hwaTimeout = NaN;\n    }\n  }\n\n  private _calcScale(): number {\n    return this.containerWidth / this.pagesIntrinsicWidth || 1;\n  }\n\n  private _calcThreshold(): number {\n    return clamp(\n      Math.ceil(this.containerHeight / this.scale / this.pagesMinHeight / 2),\n      1,\n      this.pages.length\n    );\n  }\n\n  private _hwaTimeout = NaN;\n  /** Hardware Acceleration */\n  private _turnOnHWA(): void {\n    if (this._hwaTimeout) {\n      window.clearTimeout(this._hwaTimeout);\n    } else {\n      this.$pages.classList.toggle(\"is-hwa\", true);\n    }\n    this._hwaTimeout = window.setTimeout(this._turnOffHWA, 1000);\n  }\n  private _turnOffHWA = (): void => {\n    window.clearTimeout(this._hwaTimeout);\n    this._hwaTimeout = NaN;\n    this.$pages.classList.toggle(\"is-hwa\", false);\n  };\n}\n","import { SideEffectManager } from \"side-effect-manager\";\nimport { preventEvent, flattenEvent, clamp } from \"../utils/helpers\";\n\nconst SCROLLBAR_DEFAULT_MIN_HEIGHT = 30;\n\nexport interface ScrollBarConfig {\n  pagesScrollTop?: number;\n  containerWidth: number;\n  containerHeight: number;\n  pagesWidth: number;\n  pagesHeight: number;\n  readonly: boolean;\n  scrollbarMinHeight?: number;\n  wrapClassName: (className: string) => string;\n  onDragScroll?: (pageScrollTop: number) => void;\n}\n\nexport class ScrollBar {\n  private sideEffect = new SideEffectManager();\n\n  containerWidth: number;\n  containerHeight: number;\n  readonly pagesWidth: number;\n  readonly pagesHeight: number;\n  readonly scrollbarMinHeight: number;\n  readonly: boolean;\n  wrapClassName: (className: string) => string;\n  onDragScroll?: (pageScrollTop: number) => void;\n\n  scale: number;\n  pagesScrollTop: number;\n  scrollbarHeight: number;\n\n  readonly $scrollbar: HTMLButtonElement;\n\n  constructor(config: ScrollBarConfig) {\n    this.pagesScrollTop = config.pagesScrollTop || 0;\n    this.containerWidth = config.containerWidth || 1;\n    this.containerHeight = config.containerHeight || 1;\n    this.pagesWidth = config.pagesWidth || 1;\n    this.pagesHeight = config.pagesHeight || 1;\n    this.scale = this._calcScale();\n    this.scrollbarMinHeight = config.scrollbarMinHeight || SCROLLBAR_DEFAULT_MIN_HEIGHT;\n    this.scrollbarHeight = this._calcScrollbarHeight(); // after scale is set\n    this.readonly = config.readonly;\n    this.wrapClassName = config.wrapClassName;\n    this.onDragScroll = config.onDragScroll;\n\n    this.$scrollbar = this.renderScrollbar();\n  }\n\n  mount($parent: HTMLElement): void {\n    $parent.appendChild(this.$scrollbar);\n    this.pagesScrollTo(this.pagesScrollTop, true);\n  }\n\n  unmount(): void {\n    this.$scrollbar.remove();\n  }\n\n  setReadonly(readonly: boolean): void {\n    this.readonly = readonly;\n  }\n\n  setContainerSize(width: number, height: number): void {\n    if (width > 0 && height > 0) {\n      if (width !== this.containerWidth || height !== this.containerHeight) {\n        this.containerWidth = width;\n        this.containerHeight = height;\n\n        this.scale = this._calcScale();\n        this._updateScrollbarHeight();\n\n        if (this.$scrollbar.parentElement) {\n          this.pagesScrollTo(this.pagesScrollTop, true);\n        }\n      }\n    }\n  }\n\n  pagesScrollTo(pagesScrollTop: number, force?: boolean): void {\n    pagesScrollTop = clamp(pagesScrollTop, 0, this.pagesHeight - this.containerHeight / this.scale);\n\n    if (force || Math.abs(pagesScrollTop - this.pagesScrollTop) >= 0.001) {\n      this.pagesScrollTop = pagesScrollTop;\n\n      const elScrollTop = this.pagesScrollTop * this.scale;\n      const elPagesHeight = this.pagesHeight * this.scale;\n      const translateY =\n        (elScrollTop / (elPagesHeight - this.containerHeight)) *\n        (this.containerHeight - this.scrollbarHeight);\n\n      if (window.requestAnimationFrame) {\n        window.requestAnimationFrame(() => {\n          this.$scrollbar.style.transform = `translateY(${translateY}px)`;\n        });\n      } else {\n        this.$scrollbar.style.transform = `translateY(${translateY}px)`;\n      }\n    }\n  }\n\n  destroy() {\n    this.unmount();\n    this.onDragScroll = void 0;\n    this.sideEffect.flushAll();\n  }\n\n  private renderScrollbar(): HTMLButtonElement {\n    const $scrollbar = document.createElement(\"button\");\n    $scrollbar.className = this.wrapClassName(\"scrollbar\");\n    $scrollbar.style.minHeight = `${this.scrollbarMinHeight}px`;\n    $scrollbar.style.height = `${this.scrollbarHeight}px`;\n\n    const trackStart = (ev: MouseEvent | TouchEvent): void => {\n      if (this.readonly) {\n        return;\n      }\n\n      if ((ev as MouseEvent).button != null && (ev as MouseEvent).button !== 0) {\n        // Not left mouse\n        return;\n      }\n\n      preventEvent(ev);\n\n      const draggingClassName = this.wrapClassName(\"scrollbar-dragging\");\n\n      $scrollbar.classList.toggle(draggingClassName, true);\n\n      const startTop = this.pagesScrollTop;\n\n      const { clientY: startY } = flattenEvent(ev);\n\n      const tracking = (ev: MouseEvent | TouchEvent): void => {\n        if (this.readonly) {\n          return;\n        }\n\n        const { clientY } = flattenEvent(ev);\n        const offsetY = (clientY - startY) / this.scale;\n        if (Math.abs(offsetY) > 0 && this.onDragScroll) {\n          this.onDragScroll(\n            startTop + offsetY * ((this.pagesHeight * this.scale) / this.containerHeight)\n          );\n        }\n      };\n\n      const trackEnd = (): void => {\n        $scrollbar.classList.toggle(draggingClassName, false);\n        window.removeEventListener(\"mousemove\", tracking, true);\n        window.removeEventListener(\"touchmove\", tracking, true);\n        window.removeEventListener(\"mouseup\", trackEnd, true);\n        window.removeEventListener(\"touchend\", trackEnd, true);\n        window.removeEventListener(\"touchcancel\", trackEnd, true);\n      };\n\n      window.addEventListener(\"mousemove\", tracking, true);\n      window.addEventListener(\"touchmove\", tracking, true);\n      window.addEventListener(\"mouseup\", trackEnd, true);\n      window.addEventListener(\"touchend\", trackEnd, true);\n      window.addEventListener(\"touchcancel\", trackEnd, true);\n    };\n\n    this.sideEffect.addEventListener($scrollbar, \"mousedown\", trackStart);\n    this.sideEffect.addEventListener($scrollbar, \"touchstart\", trackStart);\n\n    return $scrollbar;\n  }\n\n  private _calcScale(): number {\n    return this.containerWidth / this.pagesWidth || 1;\n  }\n\n  private _calcScrollbarHeight() {\n    return clamp(\n      (this.containerHeight / (this.pagesHeight * this.scale)) * this.containerHeight,\n      this.scrollbarMinHeight,\n      this.containerHeight\n    );\n  }\n\n  private _updateScrollbarHeight(): void {\n    const newHeight = this._calcScrollbarHeight();\n    if (Math.abs(newHeight - this.scrollbarHeight) > 0.001) {\n      this.scrollbarHeight = newHeight;\n      this.$scrollbar.style.height = `${newHeight}px`;\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { AnimationMode, AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport type { View, Size, Camera } from \"white-web-sdk\";\nimport type { DebouncedFunction, Options } from \"debounce-fn\";\nimport debounceFn from \"debounce-fn\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport { ResizeObserver as Polyfill } from \"@juggle/resize-observer\";\nimport type { DocsViewerPage } from \"../DocsViewer\";\nimport { DocsViewer } from \"../DocsViewer\";\nimport { clamp, isEditable, preventEvent } from \"../utils/helpers\";\nimport { Stepper } from \"./stepper\";\nimport { PageRenderer } from \"../PageRenderer\";\nimport { ScrollBar } from \"../ScrollBar\";\nimport type { NetlessAppStaticDocsViewerAttributes } from \"..\";\n\nconst ResizeObserver = window.ResizeObserver || Polyfill;\n\nconst RATIO_BASE_CONTAINER_HEIGHT = 640;\n\nexport interface StaticDocsViewerConfig {\n  context: AppContext<NetlessAppStaticDocsViewerAttributes>;\n  whiteboardView: View;\n  readonly: boolean;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n  mountWhiteboard: (dom: HTMLDivElement) => void;\n  /** Scroll Top of the original page */\n  pageScrollTop?: number;\n  onUserScroll?: (pageScrollTop: number) => void;\n  baseScenePath: string | undefined;\n  appId: string;\n}\n\nexport interface SavePdfConfig {\n  appId: string;\n  type: \"@netless/_request_save_pdf_\";\n}\n\nexport class StaticDocsViewer {\n  public constructor({\n    context,\n    whiteboardView,\n    readonly,\n    box,\n    pages,\n    pageScrollTop = 0,\n    mountWhiteboard,\n    onUserScroll,\n    baseScenePath,\n    appId,\n  }: StaticDocsViewerConfig) {\n    this.context = context;\n    this.whiteboardView = whiteboardView;\n    this.readonly = readonly;\n    this.box = box;\n    this.pages = pages;\n    this.baseScenePath = baseScenePath;\n    this.appId = appId;\n    this.mountWhiteboard = mountWhiteboard;\n    this._onUserScroll = onUserScroll;\n\n    const debouncedOnUserScroll = this.debounce(\n      () => {\n        this.userScrolling = false;\n        if (this._onUserScroll) {\n          this._onUserScroll(this.pageRenderer.pagesScrollTop);\n        }\n      },\n      { wait: 80 },\n      \"debounce-updateUserScroll\"\n    );\n\n    this.updateUserScroll = () => {\n      this.userScrolling = true;\n      debouncedOnUserScroll();\n    };\n\n    this.viewer = new DocsViewer({\n      context,\n      readonly,\n      box,\n      pages,\n      onNewPageIndex: this.onNewPageIndex,\n    });\n\n    const { width: containerWidth, height: containerHeight } = this.whiteboardView.size;\n\n    this.pageRenderer = new PageRenderer({\n      pagesScrollTop: pageScrollTop,\n      pages: this.pages,\n      containerWidth,\n      containerHeight,\n      onPageIndexChanged: this.viewer.setPageIndex.bind(this.viewer),\n    });\n\n    this.scrollbar = new ScrollBar({\n      pagesScrollTop: this.pageRenderer.pagesScrollTop,\n      containerWidth,\n      containerHeight,\n      pagesWidth: this.pageRenderer.pagesIntrinsicWidth,\n      pagesHeight: this.pageRenderer.pagesIntrinsicHeight,\n      readonly: this.readonly,\n      wrapClassName: this.wrapClassName.bind(this),\n      onDragScroll: pageScrollTop => {\n        this.pageScrollTo(pageScrollTop);\n        this.updateUserScroll();\n      },\n    });\n\n    this.pageScrollStepper = new Stepper({\n      start: this.pageRenderer.pagesScrollTop,\n      onStep: pageScrollTop => {\n        this.pageScrollTo(pageScrollTop);\n      },\n    });\n\n    this.render();\n  }\n\n  readonly pageRenderer: PageRenderer;\n  readonly scrollbar: ScrollBar;\n  readonly context: AppContext<NetlessAppStaticDocsViewerAttributes>;\n\n  protected sideEffect = new SideEffectManager();\n\n  protected pageScrollStepper: Stepper;\n  protected userScrolling = false;\n\n  protected readonly: boolean;\n  public pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected whiteboardView: View;\n  private readonly baseScenePath: string | undefined;\n  private readonly appId: string;\n  protected mountWhiteboard: (dom: HTMLDivElement) => void;\n\n  public _onUserScroll?: (pageScrollTop: number) => void;\n\n  public viewer: DocsViewer;\n\n  public $whiteboardView!: HTMLDivElement;\n\n  public mount(): this {\n    this.viewer.mount();\n\n    this.setupScrollListener();\n\n    const debouncedRenderRatioHeight = this.debounce(this.renderRatioHeight.bind(this), {\n      wait: 80,\n    });\n\n    this.sideEffect.add(() => {\n      const observer = new ResizeObserver(debouncedRenderRatioHeight);\n      observer.observe(this.viewer.$content);\n      return () => observer.disconnect();\n    });\n\n    // guard scroll position\n    this.sideEffect.setTimeout(() => {\n      if (!this.userScrolling) {\n        this.pageScrollTo(this.pageRenderer.pagesScrollTop);\n      }\n    }, 100);\n\n    this.sideEffect.add(() => {\n      const handleDownloadPdf = (evt: MessageEvent<SavePdfConfig>) => {\n        if (evt.data.type === \"@netless/_request_save_pdf_\" && evt.data.appId === this.appId) {\n          this.toPdf().catch(() => this.reportProgress(100, null));\n        }\n      };\n      window.addEventListener(\"message\", handleDownloadPdf);\n      return () => {\n        window.removeEventListener(\"message\", handleDownloadPdf);\n      };\n    });\n\n    return this;\n  }\n\n  public unmount(): this {\n    this.viewer.unmount();\n    return this;\n  }\n\n  public setReadonly(readonly: boolean): void {\n    if (this.readonly !== readonly) {\n      this.readonly = readonly;\n      this.viewer.setReadonly(readonly);\n      this.scrollbar.setReadonly(readonly);\n    }\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.pageScrollStepper.destroy();\n    this._onUserScroll = void 0;\n    this.unmount();\n    this.viewer.destroy();\n    this.pageRenderer.destroy();\n    this.scrollbar.destroy();\n  }\n\n  /** Sync scrollTop from writable user */\n  public syncPageScrollTop(pageScrollTop: number): void {\n    if (\n      !this.userScrolling &&\n      pageScrollTop >= 0 &&\n      Math.abs(this.pageRenderer.pagesScrollTop - pageScrollTop) > 0.01\n    ) {\n      this.pageScrollStepper.stepTo(pageScrollTop, this.pageRenderer.pagesScrollTop);\n    }\n  }\n\n  public render(): void {\n    this.pageRenderer.mount(this.viewer.$content);\n    this.viewer.$content.appendChild(this.renderWhiteboardView());\n    this.scrollbar.mount(this.viewer.$content);\n    this.renderRatioHeight();\n  }\n\n  protected renderRatioHeight(): void {\n    const boxHeight = Math.round(this.box.absoluteHeight);\n    const isSmallBox = boxHeight <= RATIO_BASE_CONTAINER_HEIGHT;\n\n    this.viewer.setSmallBox(isSmallBox);\n\n    if (this.box.$titleBar) {\n      this.box.$titleBar.style.height = `2.778vw`;\n    }\n\n    if (this.box.$footer) {\n      this.box.$footer.style.height = `2.778vw`;\n    }\n  }\n\n  protected renderWhiteboardView(): HTMLDivElement {\n    if (!this.$whiteboardView) {\n      this.$whiteboardView = document.createElement(\"div\");\n      this.$whiteboardView.className = this.wrapClassName(\"wb-view\");\n      this.mountWhiteboard(this.$whiteboardView);\n      this.sideEffect.addEventListener(\n        this.$whiteboardView,\n        \"wheel\",\n        ev => {\n          preventEvent(ev);\n          if (!this.readonly) {\n            this.pageScrollTo(this.pageRenderer.pagesScrollTop + ev.deltaY);\n            this.updateUserScroll();\n          }\n        },\n        { passive: false, capture: true }\n      );\n      this.sideEffect.addEventListener(\n        this.$whiteboardView,\n        \"touchmove\",\n        ev => {\n          if (this.readonly || ev.touches.length <= 1) {\n            return;\n          }\n          this.updateUserScroll();\n        },\n        { passive: true, capture: true }\n      );\n    }\n    return this.$whiteboardView;\n  }\n\n  protected scrollTopPageToEl(pageScrollTop: number): number {\n    return pageScrollTop * this.pageRenderer.scale;\n  }\n\n  protected scrollTopElToPage(elScrollTop: number): number {\n    return elScrollTop / this.pageRenderer.scale;\n  }\n\n  /** Scroll base on DOM rect */\n  protected elScrollTo(elScrollTop: number): void {\n    this.pageScrollTo(this.scrollTopElToPage(elScrollTop));\n  }\n\n  /** Scroll base on docs size */\n  protected pageScrollTo(pageScrollTop: number): void {\n    const halfWbHeight = this.scrollTopElToPage(this.whiteboardView.size.height / 2);\n    this.whiteboardView.moveCamera({\n      centerY: clamp(\n        pageScrollTop + halfWbHeight,\n        halfWbHeight,\n        this.pageRenderer.pagesIntrinsicHeight - halfWbHeight\n      ),\n      animationMode: \"immediately\" as AnimationMode,\n    });\n  }\n\n  protected scrollToPage(index: number): void {\n    if (!this.readonly && !Number.isNaN(index)) {\n      const offsetY = this.pageRenderer.pagesIntrinsicYs[index];\n      if (offsetY >= 0) {\n        this.pageScrollTo(offsetY + 5 / this.pageRenderer.scale);\n        this.updateUserScroll();\n      }\n    }\n  }\n\n  protected setupScrollListener(): void {\n    this.sideEffect.add(() => {\n      const handleCameraUpdate = (camera: Camera) => {\n        const { width: wbWidth, height: wbHeight } = this.whiteboardView.size;\n        if (wbWidth <= 0 || wbHeight <= 0) {\n          return;\n        }\n\n        const pagesScrollTop =\n          camera.centerY - this.pageRenderer.containerHeight / this.pageRenderer.scale / 2;\n\n        this.pageRenderer.pagesScrollTo(pagesScrollTop);\n        this.scrollbar.pagesScrollTo(pagesScrollTop);\n      };\n      this.whiteboardView.callbacks.on(\"onCameraUpdated\", handleCameraUpdate);\n      return () => this.whiteboardView.callbacks.off(\"onCameraUpdated\", handleCameraUpdate);\n    });\n\n    // Handle drag event (hand tool).\n    this.sideEffect.add(() => {\n      const { updateUserScroll } = this;\n      this.whiteboardView.callbacks.on(\"onCameraUpdatedByDevice\", updateUserScroll);\n      return () => this.whiteboardView.callbacks.off(\"onCameraUpdatedByDevice\", updateUserScroll);\n    });\n\n    this.sideEffect.add(() => {\n      const handleSizeUpdate = ({ width: wbWidth, height: wbHeight }: Size): void => {\n        if (wbWidth <= 0 || wbHeight <= 0) {\n          return;\n        }\n\n        this.pageRenderer.setContainerSize(wbWidth, wbHeight);\n        this.scrollbar.setContainerSize(wbWidth, wbHeight);\n\n        const { pagesIntrinsicWidth, pagesIntrinsicHeight } = this.pageRenderer;\n\n        this.whiteboardView.moveCameraToContain({\n          originX: 0,\n          originY: this.pageRenderer.pagesScrollTop,\n          width: pagesIntrinsicWidth,\n          height: wbHeight / this.pageRenderer.scale,\n          animationMode: \"immediately\" as AnimationMode,\n        });\n\n        this.whiteboardView.setCameraBound({\n          damping: 1,\n          maxContentMode: () => this.pageRenderer.scale,\n          minContentMode: () => this.pageRenderer.scale,\n          centerX: pagesIntrinsicWidth / 2,\n          centerY: pagesIntrinsicHeight / 2,\n          width: pagesIntrinsicWidth,\n          height: pagesIntrinsicHeight,\n        });\n      };\n      this.whiteboardView.callbacks.on(\"onSizeUpdated\", handleSizeUpdate);\n      return () => {\n        this.whiteboardView.callbacks.off(\"onSizeUpdated\", handleSizeUpdate);\n      };\n    }, \"whiteboard-size-update\");\n\n    this.sideEffect.addEventListener(\n      window,\n      \"keyup\",\n      ev => {\n        if (this.readonly || !this.box.focus || this.box.minimized || isEditable(ev.target)) {\n          return;\n        }\n        let newPageScrollTop: number | null = null;\n        switch (ev.key) {\n          case \"PageDown\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop +\n              this.pageRenderer.containerHeight / this.pageRenderer.scale;\n            break;\n          }\n          case \"PageUp\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop -\n              this.pageRenderer.containerHeight / this.pageRenderer.scale;\n            break;\n          }\n          case \"ArrowDown\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop +\n              this.pageRenderer.containerHeight / 4 / this.pageRenderer.scale;\n            break;\n          }\n          case \"ArrowUp\": {\n            newPageScrollTop =\n              this.pageRenderer.pagesScrollTop -\n              this.pageRenderer.containerHeight / 4 / this.pageRenderer.scale;\n            break;\n          }\n          default:\n            break;\n        }\n        if (newPageScrollTop !== null) {\n          if (this._onUserScroll) {\n            // this will trigger stepper for smooth scrolling effect\n            this._onUserScroll(newPageScrollTop);\n          } else {\n            this.pageScrollTo(newPageScrollTop);\n            this.updateUserScroll();\n          }\n        }\n      },\n      { capture: true }\n    );\n  }\n\n  protected debounce<ArgumentsType extends unknown[], ReturnType>(\n    fn: (...args: ArgumentsType) => ReturnType,\n    options?: Options,\n    disposerID?: string\n  ): DebouncedFunction<ArgumentsType, ReturnType | undefined> {\n    const dFn = debounceFn(fn, options);\n    this.sideEffect.addDisposer(() => dFn.cancel(), disposerID);\n    return dFn;\n  }\n\n  protected updateUserScroll: () => void;\n\n  protected wrapClassName(className: string): string {\n    return \"netless-app-docs-viewer-static-\" + className;\n  }\n\n  protected onNewPageIndex = (index: number): void => {\n    this.scrollToPage(index);\n  };\n\n  private async getBase64FromUrl(url: string): Promise<string> {\n    const data = await fetch(this._invalidate(url));\n    const blob = await data.blob();\n    return new Promise(resolve => {\n      const reader = new FileReader();\n      reader.readAsDataURL(blob);\n      reader.onloadend = () => {\n        const base64data = reader.result as string;\n        resolve(base64data);\n      };\n    });\n  }\n\n  private _invalidate(url: string): string {\n    try {\n      const a = new URL(url);\n      a.searchParams.set(\"t\", Date.now().toString());\n      return a.toString();\n    } catch {\n      return url;\n    }\n  }\n\n  private reportProgress(progress: number, result: { pdf: ArrayBuffer; title: string } | null) {\n    window.postMessage({\n      type: \"@netless/_result_save_pdf_\",\n      appId: this.appId,\n      progress,\n      result,\n    });\n  }\n\n  public toPdf = async () => {\n    const whiteSnapshotCanvas = document.createElement(\"canvas\");\n    const whiteCtx = whiteSnapshotCanvas.getContext(\"2d\");\n    if (!whiteCtx || !this.baseScenePath) {\n      this.reportProgress(100, null);\n      return;\n    }\n    const scenePath = this.whiteboardView.focusScenePath || `${this.baseScenePath}/1`;\n    const firstPage = this.pages[0];\n    const { jsPDF } = await import(\"jspdf\");\n    const pdf = new jsPDF({\n      format: [firstPage.width, firstPage.height],\n      orientation: firstPage.width > firstPage.height ? \"l\" : \"p\",\n      compress: true,\n    });\n\n    for (const [index, page] of this.pages.entries()) {\n      const { width, height, src } = page;\n      whiteSnapshotCanvas.width = width;\n      whiteSnapshotCanvas.height = height;\n      const orientation = width > height ? \"l\" : \"p\";\n\n      if (index > 0) {\n        pdf.addPage([width, height], orientation);\n      }\n\n      const pdfPageSrc = await this.getBase64FromUrl(src);\n      const img = document.createElement(\"img\");\n      img.src = pdfPageSrc;\n      await new Promise(resolve => (img.onload = resolve));\n      whiteCtx.drawImage(img, 0, 0);\n      const pdfPageBase64 = whiteSnapshotCanvas.toDataURL(\"image/jpeg\", 0.6);\n      whiteCtx.clearRect(0, 0, width, height);\n      const camera = {\n        centerX: width / 2,\n        centerY: height / 2 + index * height,\n        scale: 1,\n      };\n      // appliancePlugin is a performance optimization for whiteboard;\n      const windowManger = (this.context as any).manager.windowManger as any;\n      if (windowManger._appliancePlugin) {\n        await windowManger._appliancePlugin.screenshotToCanvasAsync(\n          whiteCtx,\n          scenePath,\n          width,\n          height,\n          camera\n        );\n      } else {\n        this.whiteboardView.screenshotToCanvas(whiteCtx, scenePath, width, height, camera);\n      }\n      const snapshot = whiteSnapshotCanvas.toDataURL(\"image/png\");\n      pdf.addImage(pdfPageBase64, \"JPEG\", 0, 0, width, height, \"\", \"FAST\");\n      pdf.addImage(snapshot, \"PNG\", 0, 0, width, height, \"\", \"FAST\");\n\n      whiteCtx.clearRect(0, 0, width, height);\n      const progress = Math.ceil(((index + 1) / this.pages.length) * 100);\n      if (progress < 100) {\n        this.reportProgress(Math.ceil(((index + 1) / this.pages.length) * 100), null);\n      }\n    }\n    const dataUrl = pdf.output(\"arraybuffer\");\n    this.reportProgress(100, { pdf: dataUrl, title: this.box.title });\n  };\n}\n","import type {\n  ReadonlyTeleBox,\n  View,\n  Displayer,\n  AnimationMode,\n  AppContext,\n  SceneState,\n  PageState,\n} from \"@netless/window-manager\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport type { DocsViewerPage } from \"../DocsViewer\";\nimport { DocsViewer } from \"../DocsViewer\";\nimport { clamp, isEditable } from \"../utils/helpers\";\n\nexport interface DynamicDocsViewerConfig {\n  context: AppContext;\n  whiteboardView: View;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n}\n\nexport class DynamicDocsViewer {\n  public constructor({ context, whiteboardView, box, pages }: DynamicDocsViewerConfig) {\n    this.context = context;\n    this.whiteboardView = whiteboardView;\n    this.box = box;\n    this.pages = pages;\n    this.displayer = context.getDisplayer();\n\n    this.viewer = new DocsViewer({\n      context,\n      readonly: !context.getIsWritable(),\n      box,\n      pages,\n      onNewPageIndex: this.onNewPageIndex,\n      onPlay: this.onPlayPPT,\n    });\n\n    this.render();\n\n    this.sideEffect.add(() => {\n      const handler = (isWritable: boolean): void => {\n        this.viewer.setReadonly(!isWritable);\n      };\n      this.context.emitter.on(\"writableChange\", handler);\n      return () => this.context.emitter.off(\"writableChange\", handler);\n    });\n\n    this.sideEffect.add(() => {\n      const handler = (sceneState: SceneState) => {\n        this.jumpToPage(sceneState.index);\n      };\n      this.context.emitter.on(\"sceneStateChange\", handler);\n      return () => this.context.emitter.off(\"sceneStateChange\", handler);\n    });\n    this.sideEffect.add(() => {\n      const handler = (pageState: PageState) => {\n        this.jumpToPage(pageState.index);\n      };\n      this.context.emitter.on(\"pageStateChange\", handler);\n      return () => this.context.emitter.off(\"pageStateChange\", handler);\n    });\n\n    this.sideEffect.add(() => {\n      const handler = (visible?: boolean) => {\n        this.viewer.togglePreview(visible);\n      };\n      this.context.emitter.on(\"togglePreview\", handler);\n      return () => this.context.emitter.off(\"togglePreview\", handler);\n    });\n  }\n\n  protected sideEffect = new SideEffectManager();\n\n  protected context: AppContext;\n  public pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected whiteboardView: View;\n  protected displayer: Displayer;\n\n  public viewer: DocsViewer;\n\n  public $mask!: HTMLElement;\n  public $whiteboardView!: HTMLDivElement;\n\n  public mount(): this {\n    this.viewer.mount();\n\n    const pageIndex = this.getPageIndex();\n    if (pageIndex !== 0) {\n      this.jumpToPage(pageIndex);\n    }\n\n    this.scaleDocsToFit();\n    this.sideEffect.add(() => {\n      this.whiteboardView.callbacks.on(\"onSizeUpdated\", this.scaleDocsToFit);\n      return () => {\n        this.whiteboardView.callbacks.off(\"onSizeUpdated\", this.scaleDocsToFit);\n      };\n    });\n\n    return this;\n  }\n\n  public unmount(): this {\n    this.viewer.unmount();\n    return this;\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.unmount();\n    this.viewer.destroy();\n  }\n\n  public getPageIndex(): number {\n    return this.displayer.state.sceneState.index;\n  }\n\n  public jumpToPage(index: number, reset?: boolean): void {\n    index = clamp(index, 0, this.pages.length - 1);\n    if (index !== this.getPageIndex()) {\n      if (this.context.getIsWritable()) {\n        const initScenePath = this.context.getInitScenePath();\n        const scene = this.context.getScenes()?.[index]?.name;\n        if (initScenePath && scene) {\n          this.context.setScenePath(`${initScenePath}/${scene}`);\n        }\n        this.scaleDocsToFit();\n      }\n    }\n    if (index !== this.viewer.pageIndex) {\n      this.viewer.setPageIndex(index);\n    }\n    if (reset) {\n      const room = this.context.getRoom();\n      if (room) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const pptState = (room.state.globalState as any).__pptState;\n        room.setGlobalState({\n          __pptState: pptState && {\n            uuid: pptState.uuid,\n            pageIndex: index,\n            disableAutoPlay: pptState.disableAutoPlay,\n          },\n        });\n      }\n    }\n  }\n\n  public onPlayPPT = (): void => {\n    const room = this.context.getRoom();\n    if (room) {\n      room.pptNextStep();\n    }\n  };\n\n  public render(): void {\n    this.viewer.$content.appendChild(this.renderMask());\n    this.viewer.$content.appendChild(this.renderWhiteboardView());\n    this.sideEffect.addEventListener(window, \"keydown\", ev => {\n      if (this.box.focus && !isEditable(ev.target)) {\n        switch (ev.key) {\n          case \"ArrowUp\":\n          case \"ArrowLeft\": {\n            this.jumpToPage(this.getPageIndex() - 1, true);\n            break;\n          }\n          case \"ArrowRight\":\n          case \"ArrowDown\": {\n            this.context.getRoom()?.pptNextStep();\n            break;\n          }\n          default: {\n            break;\n          }\n        }\n      }\n    });\n  }\n\n  protected renderMask(): HTMLElement {\n    if (!this.$mask) {\n      const $mask = document.createElement(\"div\");\n      $mask.className = this.wrapClassName(\"mask\");\n      this.$mask = $mask;\n\n      const $back = document.createElement(\"button\");\n      $back.className = this.wrapClassName(\"back\");\n\n      const $next = document.createElement(\"button\");\n      $next.className = this.wrapClassName(\"next\");\n\n      // this.$mask.appendChild($back)\n      // this.$mask.appendChild($next)\n    }\n    return this.$mask;\n  }\n\n  protected renderWhiteboardView(): HTMLDivElement {\n    if (!this.$whiteboardView) {\n      this.$whiteboardView = document.createElement(\"div\");\n      this.$whiteboardView.className = this.wrapClassName(\"wb-view\");\n      this.sideEffect.addEventListener(this.$whiteboardView, \"click\", ev => {\n        const room = this.context.getRoom();\n        if (room && room.state.memberState.currentApplianceName === \"clicker\") {\n          for (let el = ev.target as HTMLElement | null; el; el = el.parentElement) {\n            if (el.classList?.contains(\"ppt-event-source\")) {\n              return;\n            }\n          }\n          room.pptNextStep();\n        }\n      });\n      this.context.mountView(this.$whiteboardView);\n    }\n    return this.$whiteboardView;\n  }\n\n  protected _scaleDocsToFitImpl = (): void => {\n    const page = this.pages[this.getPageIndex()];\n    if (page) {\n      this.whiteboardView.moveCameraToContain({\n        originX: -page.width / 2,\n        originY: -page.height / 2,\n        width: page.width,\n        height: page.height,\n        animationMode: \"immediately\" as AnimationMode,\n      });\n      this.whiteboardView.setCameraBound({\n        damping: 1,\n        maxContentMode: () => this.whiteboardView.camera.scale,\n        minContentMode: () => this.whiteboardView.camera.scale,\n        centerX: 0,\n        centerY: 0,\n        width: page.width,\n        height: page.height,\n      });\n    }\n  };\n\n  protected _scaleDocsToFitDebounced = (): void => {\n    this.sideEffect.setTimeout(this._scaleDocsToFitImpl, 1000, \"_scaleDocsToFitDebounced\");\n  };\n\n  protected scaleDocsToFit = (): void => {\n    this._scaleDocsToFitImpl();\n    this._scaleDocsToFitDebounced();\n  };\n\n  protected onNewPageIndex = (index: number): void => {\n    this.jumpToPage(index, true);\n  };\n\n  protected wrapClassName(className: string): string {\n    return \"netless-app-docs-viewer-dynamic-\" + className;\n  }\n}\n","export const kind = \"DocsViewer\";\n","import styles from \"./style.scss?inline\";\n\nimport type { NetlessApp, AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport type { View, Size } from \"white-web-sdk\";\nimport { StaticDocsViewer } from \"./StaticDocsViewer\";\nimport type { DocsViewerPage } from \"./DocsViewer\";\nimport { DynamicDocsViewer } from \"./DynamicDocsViewer\";\nimport { kind } from \"./constants\";\n\nexport type { DocsViewerPage } from \"./DocsViewer\";\n\nexport interface NetlessAppStaticDocsViewerAttributes {\n  /** ScrollTop base on the real page size */\n  pageScrollTop?: number;\n}\n\nexport interface AppResult {\n  viewer: () => StaticDocsViewer | DynamicDocsViewer | null;\n  position: () => [page: number, length: number] | undefined;\n  nextStep?: () => void;\n  prevStep?: () => void;\n  nextPage?: () => void;\n  prevPage?: () => void;\n  jumpToPage?: (page: number) => void;\n  togglePreview?: (visible?: boolean) => void;\n}\n\nexport interface NetlessAppDynamicDocsViewerAttributes {}\n\nexport interface AppOptions {}\n\nexport type MagixEvents = {\n  [key: string]: string;\n};\n\nconst NetlessAppDocsViewer: NetlessApp<\n  NetlessAppStaticDocsViewerAttributes | NetlessAppDynamicDocsViewerAttributes,\n  MagixEvents,\n  AppOptions,\n  AppResult\n> = {\n  kind,\n  setup(context) {\n    const box = context.getBox();\n\n    const scenes = context.getScenes();\n    if (!scenes) {\n      throw new Error(\"[Docs Viewer]: scenes not found.\");\n    }\n\n    const whiteboardView = context.getView();\n\n    if (!whiteboardView) {\n      throw new Error(\"[Docs Viewer]: no whiteboard view.\");\n    }\n\n    const pages = scenes\n      .map(({ ppt }): DocsViewerPage | null =>\n        ppt\n          ? {\n              width: ppt.width,\n              height: ppt.height,\n              src: ppt.src,\n              thumbnail: ppt.previewURL,\n            }\n          : null\n      )\n      .filter((page): page is DocsViewerPage => Boolean(page));\n\n    if (pages.length <= 0) {\n      throw new Error(\"[Docs Viewer]: empty scenes.\");\n    }\n\n    box.mountStyles(styles);\n\n    if (pages[0].src.startsWith(\"ppt\")) {\n      return setupDynamicDocsViewer(\n        context as AppContext<NetlessAppDynamicDocsViewerAttributes>,\n        whiteboardView,\n        box,\n        pages\n      );\n    } else {\n      return setupStaticDocsViewer(\n        context as AppContext<NetlessAppStaticDocsViewerAttributes>,\n        whiteboardView,\n        box,\n        pages\n      );\n    }\n  },\n};\n\nexport default NetlessAppDocsViewer;\n\nfunction setupStaticDocsViewer(\n  context: AppContext<NetlessAppStaticDocsViewerAttributes>,\n  whiteboardView: View,\n  box: ReadonlyTeleBox,\n  pages: DocsViewerPage[]\n): AppResult {\n  whiteboardView.disableCameraTransform = !context.getIsWritable();\n\n  const docsViewer = new StaticDocsViewer({\n    context,\n    whiteboardView,\n    readonly: !context.getIsWritable(),\n    box,\n    pages: pages,\n    pageScrollTop: context.getAttributes()?.pageScrollTop,\n    mountWhiteboard: context.mountView.bind(context),\n    onUserScroll: pageScrollTop => {\n      if (context.getAttributes()?.pageScrollTop !== pageScrollTop && !box.readonly) {\n        context.updateAttributes([\"pageScrollTop\"], pageScrollTop);\n      }\n    },\n    baseScenePath: context.getInitScenePath(),\n    appId: context.appId,\n  }).mount();\n\n  docsViewer.viewer.onPageIndexChanged = index => {\n    context.dispatchAppEvent(\"pageStateChange\", { index, length: pages.length });\n  };\n\n  context.dispatchAppEvent(\"pageStateChange\", {\n    index: docsViewer.viewer.pageIndex,\n    length: pages.length,\n  });\n\n  if (import.meta.env.DEV) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).docsViewer = docsViewer;\n  }\n\n  context.emitter.on(\"attributesUpdate\", attributes => {\n    if (attributes) {\n      if (attributes.pageScrollTop != null) {\n        docsViewer.syncPageScrollTop(attributes.pageScrollTop);\n      }\n    }\n  });\n\n  context.emitter.on(\"writableChange\", isWritable => {\n    docsViewer.setReadonly(!isWritable);\n    whiteboardView.disableCameraTransform = !isWritable;\n  });\n  const result = {\n    viewer: () => {\n      return docsViewer;\n    },\n    position: () => {\n      const controller = docsViewer?.viewer;\n      if (controller) {\n        return [controller.pageIndex, docsViewer.pages.length] as [page: number, length: number];\n      }\n    },\n  }\n  if ((context.getInitScenePath()?.toLowerCase()?.indexOf(\"pdf\") ?? 0) > 0) {\n    return {\n      ...result, togglePreview: (visible?: boolean) => {\n        docsViewer.viewer.togglePreview(visible);\n      },\n    }\n  }\n  return result;\n}\n\nfunction setupDynamicDocsViewer(\n  context: AppContext<NetlessAppDynamicDocsViewerAttributes>,\n  whiteboardView: View,\n  box: ReadonlyTeleBox,\n  pages: DocsViewerPage[]\n): AppResult {\n  whiteboardView.disableCameraTransform = true;\n\n  const docsViewer = new DynamicDocsViewer({\n    context,\n    whiteboardView,\n    box,\n    pages,\n  }).mount();\n\n  docsViewer.viewer.onPageIndexChanged = index => {\n    context.dispatchAppEvent(\"pageStateChange\", { index, length: pages.length });\n  };\n\n  context.dispatchAppEvent(\"pageStateChange\", {\n    index: docsViewer.getPageIndex(),\n    length: pages.length,\n  });\n\n  context.mountView(docsViewer.$whiteboardView);\n\n  if (context.isAddApp) {\n    whiteboardView.callbacks.once(\n      \"onSizeUpdated\",\n      ({ width: contentWidth, height: contentHeight }: Size) => {\n        if (pages.length > 0 && box.state !== \"maximized\") {\n          const { width: pageWidth, height: pageHeight } = pages[0];\n          const preferHeight = (pageHeight / pageWidth) * contentWidth;\n          const diff = preferHeight - contentHeight;\n          if (diff !== 0 && context.getIsWritable()) {\n            context.emitter.emit(\"setBoxSize\", {\n              width: box.width,\n              height: box.height + diff / box.containerRect.height,\n            });\n          }\n        }\n      }\n    );\n  }\n\n  if (import.meta.env.DEV) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).docsViewer = docsViewer;\n  }\n\n  return {\n    viewer: () => {\n      return docsViewer;\n    },\n    position: () => {\n      const controller = docsViewer?.viewer;\n      if (controller) {\n        return [controller.pageIndex, docsViewer.pages.length] as [page: number, length: number];\n      }\n    },\n    nextStep: () => {\n      return docsViewer.onPlayPPT();\n    },\n    nextPage: () => {\n      return docsViewer.jumpToPage(docsViewer.getPageIndex() + 1, true);\n    },\n    prevPage: () => {\n      return docsViewer.jumpToPage(docsViewer.getPageIndex() + 1, true);\n    },\n    jumpToPage: (pageIndex?: number) => {\n      if (typeof pageIndex == \"number\") {\n        docsViewer.jumpToPage(pageIndex, true);\n      }\n    },\n    togglePreview: (visible?: boolean) => {\n      docsViewer.viewer.togglePreview(visible);\n    },\n  };\n}\n"],"names":["copyProperty","to","from","property","ignoreNonConfigurable","toDescriptor","fromDescriptor","canCopyProperty","changePrototype","fromPrototype","wrappedToString","withName","fromBody","toStringDescriptor","toStringName","changeToString","name","newToString","mimicFunction","debounceFn","inputFunction","options","wait","maxWait","before","after","timeout","maxTimeout","result","debouncedFunction","arguments_","context","later","maxLater","shouldCallNow","mimicFn","SOUP","SOUP_LEN","ID_LEN","reusedIdCarrier","genUID","i","invoke","fn","SideEffectManager","disposer","disposerID","joinDisposers","executor","disposers","el","type","listener","handler","ticket","uid","resizeObservers","hasActiveObservations","ro","hasSkippedObservations","msg","deliverResizeLoopError","event","ResizeObserverBoxOptions","freeze","obj","ResizeObserverSize","inlineSize","blockSize","DOMRectReadOnly","x","y","width","height","_a","top","right","bottom","left","rectangle","isSVG","target","isHidden","_b","offsetWidth","offsetHeight","isElement","scope","isReplacedElement","global","cache","scrollRegexp","verticalRegexp","IE","parseDimension","pixel","size","switchSizes","zeroBoxes","calculateBoxSizes","forceRecalculation","cs","svg","removePadding","canScrollVertically","canScrollHorizontally","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderRight","borderBottom","borderLeft","horizontalPadding","verticalPadding","horizontalBorderArea","verticalBorderArea","horizontalScrollbarThickness","verticalScrollbarThickness","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","calculateBoxSize","observedBox","borderBoxSize","contentBoxSize","devicePixelContentBoxSize","ResizeObserverEntry","calculateDepthForNode","node","depth","parent","broadcastActiveObservations","shallowestDepth","callbacks","entries","ot","entry","targetDepth","_i","callbacks_1","callback","gatherActiveObservationsAtDepth","process","trigger","notify","cb","queueMicroTask","toggle_1","el_1","config","queueResizeObserver","watching","isWatching","CATCH_PERIOD","observerConfig","events","time","scheduled","Scheduler","_this","until","elementsHaveResized","scheduler","updateCount","n","skipNotifyOnElement","ResizeObservation","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","observationTargets","ResizeObserverController","detail","firstObservation","index","lastObservation","ResizeObserver","arrowLeftSVG","namespace","NS","$svg","arrowRightSVG","playSVG","$path","pauseSVG","runningOnBrowser","isBot","supportsIntersectionObserver","supportsClassList","isHiDpi","defaultSettings","getExtendedSettings","customSettings","createInstance","classObj","eventString","instance","autoInitialize","optionsItem","SRC","SRCSET","SIZES","POSTER","ORIGINALS","DATA","statusLoading","statusLoaded","statusApplied","statusEntered","statusError","statusNative","dataPrefix","statusDataName","getData","element","attribute","setData","value","attrName","getStatus","setStatus","status","resetStatus","hasEmptyStatus","hasStatusLoading","hasStatusError","hasStatusNative","statusesAfterLoading","hadStartedLoading","safeCallback","arg1","arg2","arg3","addClass","className","removeClass","addTempImage","deleteTempImage","getTempImage","unobserve","observer","resetObserver","unobserveEntered","settings","updateLoadingCount","delta","decreaseToLoadCount","setToLoadCount","isSomethingLoading","haveElementsToLoad","getSourceTags","parentTag","sourceTags","childTag","forEachPictureSource","forEachVideoSource","attrsSrc","attrsSrcPoster","attrsSrcSrcsetSizes","attrsData","hasOriginalAttrs","getOriginalAttrs","deleteOriginalAttrs","setOriginalsObject","attributes","originals","saveOriginalBackgroundStyle","setOrResetAttribute","restoreOriginalAttrs","restoreOriginalBgImage","manageApplied","manageLoading","setAttributeIfValue","setImageAttributes","setSourcesImg","imgEl","sourceTag","setSourcesIframe","iframe","setSourcesVideo","videoEl","sourceEl","setSourcesObject","object","setBackground","bg1xValue","bgHiDpiValue","bgDataValue","setMultiBackground","setImgsetBackground","bgImgSetDataValue","imgSetValues","bgImageValues","setSourcesFunctions","setSourcesNative","setSourcesFunction","setSources","elementsWithLoadEvent","hasLoadEvent","checkFinish","addEventListener","eventName","removeEventListener","hasEventListeners","addEventListeners","loadHandler","errorHandler","loadEventName","removeEventListeners","eventListeners","doneHandler","goingNative","addOneShotEventListeners","elementToListenTo","loadBackground","loadRegular","load","loadNative","removeImageAttributes","resetSourcesImg","restoreImg","restoreVideo","restoreIframe","iframeEl","restoreObject","objectEl","restoreFunctions","restoreAttributes","restoreFunction","resetClasses","restore","cancelLoading","onEnter","dontLoad","onExit","tagsWithNativeLazy","shouldUseNative","loadAllNative","elements","isIntersecting","getObserverSettings","intersectionHandler","observeElements","updateObserver","elementsToObserve","setObserver","toArray","nodeSet","queryElements","excludeManagedElements","hasError","filterErrorElements","getElementsToLoad","retryLazyLoad","setOnlineCheck","resetOnlineCheck","LazyLoad","givenNodeset","elementsToLoad","_ua","isIOS","isAndroid","DocsViewer","readonly","box","pages","onNewPageIndex","onPlay","max","pageIndex","previews","imgNode","parentRect","elementRect","isSmallBox","$content","$preview","title","h3","pageClassName","pageNameClassName","page","previewSRC","$page","$name","$img","ev","$footer","$pageJumps","$btnPageBack","$btnPlay","returnPlay","$pageNumber","$pageNumberInput","$totalPage","$btnPageNext","$icon","$iconActive","$btn","isShowPreview","_d","_c","_f","_e","$previewPage","previewLazyLoad","_g","clamp","min","flattenEvent","preventEvent","isEditable","tagName","Stepper","timestamp","frames","start","fSpring","fDamper","newVelocity","newCurrent","PageEl","scale","pagesIntrinsicWidth","pageOffsetY","visible","schedule","cancelSchedule","PageElManager","sortedEls","pageEl","PageRenderer","url","e","pagesIntrinsicYs","pagesMinHeight","pageY","$pages","pagesScrollTop","force","pageScrollIndex","startIndex","endIndex","$parent","SCROLLBAR_DEFAULT_MIN_HEIGHT","ScrollBar","elScrollTop","elPagesHeight","translateY","$scrollbar","trackStart","draggingClassName","startTop","startY","tracking","clientY","offsetY","trackEnd","newHeight","Polyfill","RATIO_BASE_CONTAINER_HEIGHT","StaticDocsViewer","whiteboardView","pageScrollTop","mountWhiteboard","onUserScroll","baseScenePath","appId","whiteSnapshotCanvas","whiteCtx","scenePath","firstPage","jsPDF","_interopNamespace","pdf","src","orientation","pdfPageSrc","img","resolve","pdfPageBase64","camera","windowManger","snapshot","dataUrl","debouncedOnUserScroll","containerWidth","containerHeight","debouncedRenderRatioHeight","handleDownloadPdf","evt","halfWbHeight","handleCameraUpdate","wbWidth","wbHeight","updateUserScroll","handleSizeUpdate","pagesIntrinsicHeight","newPageScrollTop","dFn","blob","reader","base64data","a","progress","DynamicDocsViewer","room","isWritable","sceneState","pageState","reset","initScenePath","scene","pptState","$mask","$back","$next","kind","NetlessAppDocsViewer","scenes","ppt","styles","setupDynamicDocsViewer","setupStaticDocsViewer","docsViewer","controller","pageWidth","pageHeight","diff"],"mappings":"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"}